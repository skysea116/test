; /* /bitrix/js/main/utils.js?164661037829279*/
; /* /bitrix/js/main/core/core_uf.min.js?167663848411603*/
; /* /bitrix/js/main/core/core.min.js?1721672318223197*/
; /* /bitrix/js/main/session.min.js?16466103802394*/
; /* /bitrix/js/main/pageobject/pageobject.min.js?1646610375570*/
; /* /bitrix/js/main/core/core_window.min.js?172167231676324*/
; /* /bitrix/js/main/date/main.date.min.js?169091151117992*/
; /* /bitrix/js/main/core/core_date.js?164661037836080*/
; /* /bitrix/js/main/core/core_fx.min.js?16466103779768*/

; /* Start:"a:4:{s:4:"full";s:50:"/bitrix/js/main/core/core_fx.min.js?16466103779768";s:6:"source";s:31:"/bitrix/js/main/core/core_fx.js";s:3:"min";s:35:"/bitrix/js/main/core/core_fx.min.js";s:3:"map";s:35:"/bitrix/js/main/core/core_fx.map.js";}"*/
(function(t){var i={time:1,step:.05,type:"linear",allowFloat:false};BX.fx=function(t){this.options=t;if(null!=this.options.time)this.options.originalTime=this.options.time;if(null!=this.options.step)this.options.originalStep=this.options.step;if(!this.__checkOptions())return false;this.__go=BX.delegate(this.go,this);this.PARAMS={}};BX.fx.prototype.__checkOptions=function(){if(typeof this.options.start!=typeof this.options.finish)return false;if(null==this.options.time)this.options.time=i.time;if(null==this.options.step)this.options.step=i.step;if(null==this.options.type)this.options.type=i.type;if(null==this.options.allowFloat)this.options.allowFloat=i.allowFloat;this.options.time*=1e3;this.options.step*=1e3;if(typeof this.options.start!="object"){this.options.start={_param:this.options.start};this.options.finish={_param:this.options.finish}}var e;for(e in this.options.start){if(null==this.options.finish[e]){this.options.start[e]=null;delete this.options.start[e]}}if(!BX.type.isFunction(this.options.type)){if(BX.type.isFunction(t[this.options.type]))this.options.type=t[this.options.type];else if(BX.type.isFunction(BX.fx.RULES[this.options.type]))this.options.type=BX.fx.RULES[this.options.type];else this.options.type=BX.fx.RULES[i.type]}return true};BX.fx.prototype.go=function(){var t=(new Date).valueOf();if(t<this.PARAMS.timeFinish){for(var i in this.PARAMS.current){this.PARAMS.current[i][0]=this.options.type.apply(this,[{start_value:this.PARAMS.start[i][0],finish_value:this.PARAMS.finish[i][0],current_value:this.PARAMS.current[i][0],current_time:t-this.PARAMS.timeStart,total_time:this.options.time}])}this._callback(this.options.callback);if(!this.paused)this.PARAMS.timer=setTimeout(this.__go,this.options.step)}else{this.stop()}};BX.fx.prototype._callback=function(t){var i={};t=t||this.options.callback;for(var e in this.PARAMS.current){i[e]=(this.options.allowFloat?this.PARAMS.current[e][0]:Math.round(this.PARAMS.current[e][0]))+this.PARAMS.current[e][1]}return t.apply(this,[null!=i["_param"]?i._param:i])};BX.fx.prototype.start=function(){var t,i,e;this.PARAMS.start={};this.PARAMS.current={};this.PARAMS.finish={};for(t in this.options.start){i=+this.options.start[t];e=(this.options.start[t]+"").substring((i+"").length);this.PARAMS.start[t]=[i,e];this.PARAMS.current[t]=[i,e];this.PARAMS.finish[t]=[+this.options.finish[t],e]}this._callback(this.options.callback_start);this._callback(this.options.callback);this.PARAMS.timeStart=(new Date).valueOf();this.PARAMS.timeFinish=this.PARAMS.timeStart+this.options.time;this.PARAMS.timer=setTimeout(BX.delegate(this.go,this),this.options.step);return this};BX.fx.prototype.pause=function(){if(this.paused){this.PARAMS.timer=setTimeout(this.__go,this.options.step);this.paused=false}else{clearTimeout(this.PARAMS.timer);this.paused=true}};BX.fx.prototype.stop=function(t){t=!!t;if(this.PARAMS.timer)clearTimeout(this.PARAMS.timer);if(null!=this.options.originalTime)this.options.time=this.options.originalTime;if(null!=this.options.originalStep)this.options.step=this.options.originalStep;this.PARAMS.current=this.PARAMS.finish;if(!t){this._callback(this.options.callback);this._callback(this.options.callback_complete)}};BX.fx.RULES={linear:function(t){return t.start_value+t.current_time/t.total_time*(t.finish_value-t.start_value)},decelerated:function(t){return t.start_value+Math.sqrt(t.current_time/t.total_time)*(t.finish_value-t.start_value)},accelerated:function(t){var i=t.current_time/t.total_time;return t.start_value+i*i*(t.finish_value-t.start_value)}};BX.fx.hide=function(t,i,e){t=BX(t);if(typeof i=="object"&&null==e){e=i;i=e.type}if(!e)e={};if(!BX.type.isNotEmptyString(i)){t.style.display="none";return}var s=BX.fx.EFFECTS[i](t,e,0);s.callback_complete=function(){if(e.hide!==false)t.style.display="none";if(e.callback_complete)e.callback_complete.apply(this,arguments)};return new BX.fx(s).start()};BX.fx.show=function(t,i,e){t=BX(t);if(typeof i=="object"&&null==e){e=i;i=e.type}if(!e)e={};if(!BX.type.isNotEmptyString(i)){t.style.display="block";return}var s=BX.fx.EFFECTS[i](t,e,1);s.callback_complete=function(){if(e.show!==false)t.style.display="block";if(e.callback_complete)e.callback_complete.apply(this,arguments)};return new BX.fx(s).start()};BX.fx.EFFECTS={scroll:function(t,e,s){if(!e.direction)e.direction="vertical";var n=e.direction=="horizontal"?"width":"height";var o=parseInt(BX.style(t,n));if(isNaN(o)){o=BX.pos(t)[n]}if(s==0)var a=o,r=e.min_height?parseInt(e.min_height):0;else var r=o,a=e.min_height?parseInt(e.min_height):0;return{start:a,finish:r,time:e.time||i.time,type:"linear",callback_start:function(){if(BX.style(t,"position")=="static")t.style.position="relative";t.style.overflow="hidden";t.style[n]=a+"px";t.style.display="block"},callback:function(i){t.style[n]=i+"px"}}},fade:function(t,e,s){var n={time:e.time||i.time,type:s==0?"decelerated":"linear",start:s==0?1:0,finish:s==0?0:1,allowFloat:true};if(BX.browser.IsIE()&&!BX.browser.IsIE9()){n.start*=100;n.finish*=100;n.allowFloat=false;n.callback_start=function(){t.style.display="block";t.style.filter+="progid:DXImageTransform.Microsoft.Alpha(opacity="+n.start+")"};n.callback=function(i){(t.filters["DXImageTransform.Microsoft.alpha"]||t.filters.alpha).opacity=i}}else{n.callback_start=function(){t.style.display="block"};n.callback=function(i){t.style.opacity=t.style.KhtmlOpacity=t.style.MozOpacity=i}}return n},fold:function(t,e,s){if(s!=0)return;var n=BX.pos(t);var o=n.height/(n.width+n.height);var a={time:e.time||i.time,callback_complete:e.callback_complete,hide:e.hide};e.type="scroll";e.direction="vertical";e.min_height=e.min_height||10;e.hide=false;e.time=o*a.time;e.callback_complete=function(){t.style.whiteSpace="nowrap";e.direction="horizontal";e.min_height=null;e.time=a.time-e.time;e.hide=a.hide;e.callback_complete=a.callback_complete;BX.fx.hide(t,e)};return BX.fx.EFFECTS.scroll(t,e,s)},scale:function(t,e,s){var n={width:parseInt(BX.style(t,"width")),height:parseInt(BX.style(t,"height"))};if(isNaN(n.width)||isNaN(n.height)){var o=BX.pos(t);n={width:o.width,height:o.height}}if(s==0)var a=n,r={width:0,height:0};else var r=n,a={width:0,height:0};return{start:a,finish:r,time:e.time||i.time,type:"linear",callback_start:function(){t.style.position="relative";t.style.overflow="hidden";t.style.display="block";t.style.height=a.height+"px";t.style.width=a.width+"px"},callback:function(i){t.style.height=i.height+"px";t.style.width=i.width+"px"}}}};var e={arStack:{},arRules:{},globalAnimationId:0};BX.fx.colorAnimate=function(t,i,s){if(t==null)return;animationId=t.getAttribute("data-animation-id");if(animationId==null){animationId=e.globalAnimationId;t.setAttribute("data-animation-id",e.globalAnimationId++)}var n=i.split(/\s*,\s*/);for(var o=0;o<n.length;o++){i=n[o];if(!e.arRules[i])continue;var a=0;if(!e.arStack[animationId]){e.arStack[animationId]={}}else if(e.arStack[animationId][i]){a=e.arStack[animationId][i].i;clearInterval(e.arStack[animationId][i].tId)}if(a==0&&s||a==e.arRules[i][3]&&!s)continue;e.arStack[animationId][i]={i:a,element:t,tId:setInterval('BX.fx.colorAnimate.run("'+animationId+'","'+i+'")',e.arRules[i][4]),back:Boolean(s)}}};BX.fx.colorAnimate.addRule=function(t,i,s,n,o,a,r){e.arRules[t]=[BX.util.hex2rgb(i),BX.util.hex2rgb(s),n.replace(/\-(.)/g,function(){return arguments[1].toUpperCase()}),o,a||1,r||false]};BX.fx.colorAnimate.run=function(t,i){element=e.arStack[t][i].element;e.arStack[t][i].i+=e.arStack[t][i].back?-1:1;var s=e.arStack[t][i].i/e.arRules[i][3];var n=1-s;var o=e.arRules[i][0];var a=e.arRules[i][1];element.style[e.arRules[i][2]]="rgb("+Math.floor(o["r"]*n+a["r"]*s)+","+Math.floor(o["g"]*n+a["g"]*s)+","+Math.floor(o["b"]*n+a["b"]*s)+")";if(e.arStack[t][i].i==e.arRules[i][3]||e.arStack[t][i].i==0){clearInterval(e.arStack[t][i].tId);if(e.arRules[i][5])BX.fx.colorAnimate(e.arStack[t][i].element,i,true)}};BX.easing=function(t){this.options=t;this.timer=null};BX.easing.prototype.animate=function(){if(!this.options||!this.options.start||!this.options.finish||typeof this.options.start!="object"||typeof this.options.finish!="object")return null;for(var t in this.options.start){if(typeof this.options.finish[t]=="undefined"){delete this.options.start[t]}}this.options.progress=function(t){var i={};for(var e in this.start)i[e]=Math.round(this.start[e]+(this.finish[e]-this.start[e])*t);if(this.step){this.step(i)}};this.animateProgress()};BX.easing.prototype.stop=function(t){if(this.timer){cancelAnimationFrame(this.timer);this.timer=null;if(t){this.options.complete&&this.options.complete()}}};BX.easing.prototype.animateProgress=function(){if(!t.requestAnimationFrame){this.options.progress(1);this.options.complete&&this.options.complete();return}var i=null;var e=this.options.transition||BX.easing.transitions.linear;var s=this.options.duration||1e3;var n=BX.proxy(function(t){if(i===null){i=t}var o=(t-i)/s;if(o>1){o=1}this.options.progress(e(o));if(o==1){this.stop(true)}else{this.timer=requestAnimationFrame(n)}},this);this.timer=requestAnimationFrame(n)};BX.easing.makeEaseInOut=function(t){return function(i){if(i<.5)return t(2*i)/2;else return(2-t(2*(1-i)))/2}};BX.easing.makeEaseOut=function(t){return function(i){return 1-t(1-i)}};BX.easing.transitions={linear:function(t){return t},quad:function(t){return Math.pow(t,2)},cubic:function(t){return Math.pow(t,3)},quart:function(t){return Math.pow(t,4)},quint:function(t){return Math.pow(t,5)},circ:function(t){return 1-Math.sin(Math.acos(t))},back:function(t){return Math.pow(t,2)*((1.5+1)*t-1.5)},elastic:function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*1.5/3*t)},bounce:function(t){for(var i=0,e=1;1;i+=e,e/=2){if(t>=(7-4*i)/11){return-Math.pow((11-6*i-11*t)/4,2)+Math.pow(e,2)}}}}})(window);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:45:"/bitrix/js/main/session.min.js?16466103802394";s:6:"source";s:26:"/bitrix/js/main/session.js";s:3:"min";s:30:"/bitrix/js/main/session.min.js";s:3:"map";s:30:"/bitrix/js/main/session.map.js";}"*/
function CBXSession(){var e=this;this.dateInput=new Date;this.dateCheck=new Date;this.dateHit=new Date;this.notifier=null;this.checkInterval=60;this.checkImmediately=false;this.Expand=function(t){this.key=t;BX.ready(function(){BX.bind(document,"keypress",e.OnUserInput);BX.bind(document.body,"mousemove",e.OnUserInput);BX.bind(document.body,"click",e.OnUserInput);setInterval(e.CheckSession,e.checkInterval*1e3)})};this.OnUserInput=function(){var t=new Date;e.dateInput.setTime(t.valueOf());if((t-e.dateHit)/1e3>e.checkInterval+5&&e.checkImmediately===false){e.checkImmediately=true;e.CheckSession()}};this.CheckSession=function(){var t=new Date;if((t-e.dateCheck)/1e3<e.checkInterval-1&&e.checkImmediately===false){return}e.dateCheck.setTime(t.valueOf());if(e.dateInput>e.dateHit){var i={method:"GET",headers:[{name:"X-Bitrix-Csrf-Token",value:BX.bitrix_sessid()}],dataType:"html",url:"/bitrix/tools/public_session.php?k="+e.key,data:"",onsuccess:function(t){e.CheckResult(t)},lsId:"sess_expand",lsTimeout:e.checkInterval-5};BX.ajax(i)}};this.CheckResult=function(t){var i=new Date;e.dateHit.setTime(i.valueOf());e.checkImmediately=false;if(t=="SESSION_EXPIRED"){if(BX.message("SessExpired")){if(!e.notifier){e.notifier=document.body.appendChild(BX.create("DIV",{props:{className:"bx-session-message"},style:{top:"0",backgroundColor:"#FFEB41",border:"1px solid #EDDA3C",width:"630px",fontFamily:"Arial,Helvetica,sans-serif",fontSize:"13px",fontWeight:"bold",textAlign:"center",color:"black",position:"absolute",zIndex:"10000",padding:"10px"},html:'<a class="bx-session-message-close" '+'style="display:block; width:12px; height:12px; background:url(/bitrix/js/main/core/images/close.gif) center no-repeat; float:right;" '+'href="javascript:bxSession.Close()"></a>'+BX.message("SessExpired")}));BX.ZIndexManager.register(e.notifier);BX.ZIndexManager.bringToFront(e.notifier);var s=BX.GetWindowScrollPos();var n=BX.GetWindowInnerSize();e.notifier.style.left=parseInt(s.scrollLeft+n.innerWidth/2-parseInt(e.notifier.clientWidth)/2)+"px";if(BX.browser.IsIE()){e.notifier.style.top=s.scrollTop+"px";BX.bind(window,"scroll",function(){var t=BX.GetWindowScrollPos();e.notifier.style.top=t.scrollTop+"px"})}else{e.notifier.style.position="fixed"}}e.notifier.style.display=""}}};this.Close=function(){this.notifier.style.display="none"}}var bxSession=new CBXSession;
/* End */
;
; /* Start:"a:4:{s:4:"full";s:58:"/bitrix/js/main/pageobject/pageobject.min.js?1646610375570";s:6:"source";s:40:"/bitrix/js/main/pageobject/pageobject.js";s:3:"min";s:44:"/bitrix/js/main/pageobject/pageobject.min.js";s:3:"map";s:44:"/bitrix/js/main/pageobject/pageobject.map.js";}"*/
window.BX=BX||{};BX.PageObject={getRootWindow:function(){return BX.PageObject.getTopWindowOfCurrentHost(window)},isCrossOriginObject:function(t){try{void t.location.host}catch(t){return true}return false},getTopWindowOfCurrentHost:function(t){if(!BX.PageObject.isCrossOriginObject(t.parent)&&t.parent!==t&&t.parent.location.host===t.location.host){return BX.PageObject.getTopWindowOfCurrentHost(t.parent)}return t},getParentWindowOfCurrentHost:function(t){if(BX.PageObject.isCrossOriginObject(t.parent)){return t}return t.parent}};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:55:"/bitrix/js/main/core/core_window.min.js?172167231676324";s:6:"source";s:35:"/bitrix/js/main/core/core_window.js";s:3:"min";s:39:"/bitrix/js/main/core/core_window.min.js";s:3:"map";s:39:"/bitrix/js/main/core/core_window.map.js";}"*/
(function(window){if(BX.WindowManager)return;BX.WindowManager={_stack:[],_runtime_resize:{},_delta:2,_delta_start:1e3,currently_loaded:null,settings_category:"BX.WindowManager.9.5",register:function(t){this.currently_loaded=null;t.WM_REG_INDEX=this._stack.length;this._stack.push(t);if(this._stack.length<2){BX.bind(document,"keyup",BX.proxy(this.__checkKeyPress,this))}},unregister:function(t){if(null==t.WM_REG_INDEX)return null;var e;if(this._stack.length>0){while((e=this.__pop_stack())!=t){if(!e){e=null;break}}if(this._stack.length<=0){this.enableKeyCheck()}return e}else{return null}},__pop_stack:function(t){if(this._stack.length>0){var e=this._stack.pop();e.WM_REG_INDEX=null;BX.onCustomEvent(e,"onWindowUnRegister",[t===true]);return e}else return null},clean:function(){while(this.__pop_stack(true)){}this._stack=[];this.disableKeyCheck()},Get:function(){if(this.currently_loaded)return this.currently_loaded;else if(this._stack.length>0)return this._stack[this._stack.length-1];else return null},setStartZIndex:function(t){this._delta_start=t},restoreStartZIndex:function(){this._delta_start=1e3},GetZIndex:function(){var t;return null!=(t=this._stack[this._stack.length-1])?parseInt(t.Get().style.zIndex)+this._delta:this._delta_start},__get_check_url:function(t){var e=t.indexOf("?");return e==-1?t:t.substring(0,e)},saveWindowSize:function(t,e){var i=this.__get_check_url(t);if(BX.userOptions){BX.userOptions.save(this.settings_category,"size_"+i,"width",e.width);BX.userOptions.save(this.settings_category,"size_"+i,"height",e.height)}this._runtime_resize[i]=e},saveWindowOptions:function(t,e){if(BX.userOptions){for(var i in e){if(e.hasOwnProperty(i)){BX.userOptions.save(this.settings_category,"options_"+t,i,e[i])}}}},getRuntimeWindowSize:function(t){return this._runtime_resize[this.__get_check_url(t)]},disableKeyCheck:function(){BX.unbind(document,"keyup",BX.proxy(this.__checkKeyPress,this))},enableKeyCheck:function(){BX.bind(document,"keyup",BX.proxy(this.__checkKeyPress,this))},__checkKeyPress:function(t){if(null==t)t=window.event;if(t.keyCode==27){var e=BX.WindowManager.Get();if(e&&!e.unclosable)e.Close()}}};BX.garbage(BX.WindowManager.clean,BX.WindowManager);BX.CWindowButton=function(t){if(t.btn){this.btn=t.btn;this.parentWindow=t.parentWindow;if(/save|apply/i.test(this.btn.name)){BX.bind(this.btn,"click",BX.delegate(this.disableUntilError,this))}}else{this.title=t.title;this.hint=t.hint;this.id=t.id;this.name=t.name;this.className=t.className;this.action=t.action;this.onclick=t.onclick;if(t.Button&&BX.type.isFunction(t.Button))this.Button=t.Button;this.btn=null}};BX.CWindowButton.prototype.disable=function(){if(this.btn)this.parentWindow.showWait(this.btn)};BX.CWindowButton.prototype.enable=function(){if(this.btn)this.parentWindow.closeWait(this.btn)};BX.CWindowButton.prototype.emulate=function(){if(this.btn&&this.btn.disabled)return;var t=this.action?BX.delegate(this.action,this):this.onclick?this.onclick:this.btn?this.btn.getAttribute("onclick"):"";if(t){setTimeout(t,50);if(this.btn&&/save|apply/i.test(this.btn.name)&&!this.action){this.disableUntilError()}}};BX.CWindowButton.prototype.Button=function(parentWindow){this.parentWindow=parentWindow;var btn={props:{type:"button",name:this.id?this.id:this.name,value:this.title?this.title:this.name,id:this.id}};if(this.hint)btn.props.title=this.hint;if(!!this.className)btn.props.className=this.className;if(this.action){btn.events={click:BX.delegate(this.action,this)}}else if(this.onclick){if(BX.browser.IsIE()){btn.events={click:BX.delegate((function(){eval(this.onclick)}),this)}}else{btn.attrs={onclick:this.onclick}}}this.btn=BX.create("INPUT",btn);return this.btn};BX.CWindowButton.prototype.disableUntilError=function(){this.disable();if(!this.__window_error_handler_set){BX.addCustomEvent(this.parentWindow,"onWindowError",BX.delegate(this.enable,this));this.__window_error_handler_set=true}};BX.CWindow=function(t,e){this.DIV=t||document.createElement("DIV");this.SETTINGS={resizable:false,min_height:0,min_width:0,top:0,left:0,draggable:false,drag_restrict:true,resize_restrict:true};this.ELEMENTS={draggable:[],resizer:[],close:[]};this.type=e=="float"?"float":"dialog";BX.adjust(this.DIV,{props:{className:"bx-core-window"},style:{zIndex:0,position:"absolute",display:"none",top:this.SETTINGS.top+"px",left:this.SETTINGS.left+"px",height:"100px",width:"100px"}});this.isOpen=false;BX.addCustomEvent(this,"onWindowRegister",BX.delegate(this.onRegister,this));BX.addCustomEvent(this,"onWindowUnRegister",BX.delegate(this.onUnRegister,this));this.MOUSEOVER=null;BX.bind(this.DIV,"mouseover",BX.delegate(this.__set_msover,this));BX.bind(this.DIV,"mouseout",BX.delegate(this.__unset_msover,this));BX.ready(BX.delegate((function(){document.body.appendChild(this.DIV);BX.ZIndexManager.register(this.DIV)}),this))};BX.CWindow.prototype.Get=function(){return this.DIV};BX.CWindow.prototype.visible=function(){return this.isOpen};BX.CWindow.prototype.Show=function(t){this.DIV.style.display="block";if(!t){BX.WindowManager.register(this);BX.onCustomEvent(this,"onWindowRegister")}BX.ZIndexManager.bringToFront(this.DIV)};BX.CWindow.prototype.Hide=function(){BX.WindowManager.unregister(this);this.DIV.style.display="none"};BX.CWindow.prototype.onRegister=function(){this.isOpen=true};BX.CWindow.prototype.onUnRegister=function(t){this.isOpen=false;if(t||this.PARAMS&&this.PARAMS.content_url){if(t){BX.onCustomEvent(this,"onWindowClose",[this,true])}if(this.DIV.parentNode)this.DIV.parentNode.removeChild(this.DIV)}else{this.DIV.style.display="none"}};BX.CWindow.prototype.CloseDialog=BX.CWindow.prototype.Close=function(t){BX.onCustomEvent(this,"onBeforeWindowClose",[this]);if(t!==true){if(this.denyClose)return false}BX.onCustomEvent(this,"onWindowClose",[this]);if(this.bExpanded){var e=BX.GetDocElement();BX.unbind(window,"resize",BX.proxy(this.__expand_onresize,this));e.style.overflow=this.__expand_settings.overflow}BX.WindowManager.unregister(this);return true};BX.CWindow.prototype.SetResize=function(t){t.style.cursor="se-resize";BX.bind(t,"mousedown",BX.proxy(this.__startResize,this));this.ELEMENTS.resizer.push(t);this.SETTINGS.resizable=true};BX.CWindow.prototype.SetExpand=function(t,e){e=e||"click";BX.bind(t,e,BX.proxy(this.__expand,this))};BX.CWindow.prototype.__expand_onresize=function(){var t=BX.GetWindowInnerSize();this.DIV.style.width=t.innerWidth+"px";this.DIV.style.height=t.innerHeight+"px";BX.onCustomEvent(this,"onWindowResize")};BX.CWindow.prototype.__expand=function(){var t=BX.GetDocElement();if(!this.bExpanded){var e=BX.GetWindowScrollPos(),i=BX.GetWindowInnerSize();this.__expand_settings={resizable:this.SETTINGS.resizable,draggable:this.SETTINGS.draggable,width:this.DIV.style.width,height:this.DIV.style.height,left:this.DIV.style.left,top:this.DIV.style.top,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,overflow:BX.style(t,"overflow")};this.SETTINGS.resizable=false;this.SETTINGS.draggable=false;window.scrollTo(0,0);t.style.overflow="hidden";this.DIV.style.top="0px";this.DIV.style.left="0px";this.DIV.style.width=i.innerWidth+"px";this.DIV.style.height=i.innerHeight+"px";this.bExpanded=true;BX.onCustomEvent(this,"onWindowExpand");BX.onCustomEvent(this,"onWindowResize");BX.bind(window,"resize",BX.proxy(this.__expand_onresize,this))}else{BX.unbind(window,"resize",BX.proxy(this.__expand_onresize,this));this.SETTINGS.resizable=this.__expand_settings.resizable;this.SETTINGS.draggable=this.__expand_settings.draggable;t.style.overflow=this.__expand_settings.overflow;this.DIV.style.top=this.__expand_settings.top;this.DIV.style.left=this.__expand_settings.left;this.DIV.style.width=this.__expand_settings.width;this.DIV.style.height=this.__expand_settings.height;window.scrollTo(this.__expand_settings.scrollLeft,this.__expand_settings.scrollTop);this.bExpanded=false;BX.onCustomEvent(this,"onWindowNarrow");BX.onCustomEvent(this,"onWindowResize")}};BX.CWindow.prototype.Resize=function(t,e){var i=Math.max(t-this.pos.left+this.dx,this.SETTINGS.min_width);var s=Math.max(e-this.pos.top+this.dy,this.SETTINGS.min_height);if(this.SETTINGS.resize_restrict){var o=BX.GetWindowScrollSize();if(this.pos.left+i>o.scrollWidth-this.dw)i=o.scrollWidth-this.pos.left-this.dw}this.DIV.style.width=i+"px";this.DIV.style.height=s+"px";BX.onCustomEvent(this,"onWindowResize")};BX.CWindow.prototype.__startResize=function(t){if(!this.SETTINGS.resizable)return false;if(!t)t=window.event;this.wndSize=BX.GetWindowScrollPos();this.wndSize.innerWidth=BX.GetWindowInnerSize().innerWidth;this.pos=BX.pos(this.DIV);this.x=t.clientX+this.wndSize.scrollLeft;this.y=t.clientY+this.wndSize.scrollTop;this.dx=this.pos.left+this.pos.width-this.x;this.dy=this.pos.top+this.pos.height-this.y;this.dw=this.pos.width-parseInt(this.DIV.style.width);BX.bind(document,"mousemove",BX.proxy(this.__moveResize,this));BX.bind(document,"mouseup",BX.proxy(this.__stopResize,this));if(document.body.setCapture)document.body.setCapture();document.onmousedown=BX.False;var e=document.body;e.ondrag=e.onselectstart=BX.False;e.style.MozUserSelect=this.DIV.style.MozUserSelect="none";e.style.cursor="se-resize";BX.onCustomEvent(this,"onWindowResizeStart");return true};BX.CWindow.prototype.__moveResize=function(t){if(!t)t=window.event;var e=BX.GetWindowScrollPos();var i=t.clientX+e.scrollLeft;var s=t.clientY+e.scrollTop;if(this.x==i&&this.y==s)return;this.Resize(i,s);this.x=i;this.y=s};BX.CWindow.prototype.__stopResize=function(){if(document.body.releaseCapture)document.body.releaseCapture();BX.unbind(document,"mousemove",BX.proxy(this.__moveResize,this));BX.unbind(document,"mouseup",BX.proxy(this.__stopResize,this));document.onmousedown=null;var t=document.body;t.ondrag=t.onselectstart=null;t.style.MozUserSelect=this.DIV.style.MozUserSelect="";t.style.cursor="";BX.onCustomEvent(this,"onWindowResizeFinished")};BX.CWindow.prototype.SetClose=function(t){BX.bind(t,"click",BX.proxy(this.Close,this));this.ELEMENTS.close.push(t)};BX.CWindow.prototype.SetDraggable=function(t){BX.bind(t,"mousedown",BX.proxy(this.__startDrag,this));t.style.cursor="move";this.ELEMENTS.draggable.push(t);this.SETTINGS.draggable=true};BX.CWindow.prototype.Move=function(t,e){var i=1;var s=parseInt(this.DIV.style.left)+t;var o=parseInt(this.DIV.style.top)+e;if(this.SETTINGS.drag_restrict){if(s<0)s=0;var n=BX.GetWindowScrollSize();var r=this.DIV.offsetWidth;var h=this.DIV.offsetHeight;if(s>n.scrollWidth-r-i)s=n.scrollWidth-r-i;var a=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight,n.scrollHeight);if(o>a-h-i)o=a-h-i;if(o<0)o=0}this.DIV.style.left=s+"px";this.DIV.style.top=o+"px"};BX.CWindow.prototype.__startDrag=function(t){if(!this.SETTINGS.draggable)return false;if(!t)t=window.event;this.x=t.clientX+document.body.scrollLeft;this.y=t.clientY+document.body.scrollTop;this.__bWasDragged=false;BX.bind(document,"mousemove",BX.proxy(this.__moveDrag,this));BX.bind(document,"mouseup",BX.proxy(this.__stopDrag,this));if(document.body.setCapture)document.body.setCapture();document.onmousedown=BX.False;var e=document.body;e.ondrag=e.onselectstart=BX.False;e.style.MozUserSelect=this.DIV.style.MozUserSelect="none";e.style.cursor="move";return BX.PreventDefault(t)};BX.CWindow.prototype.__moveDrag=function(t){if(!t)t=window.event;var e=t.clientX+document.body.scrollLeft;var i=t.clientY+document.body.scrollTop;if(this.x==e&&this.y==i)return;this.Move(e-this.x,i-this.y);this.x=e;this.y=i;if(!this.__bWasDragged){BX.onCustomEvent(this,"onWindowDragStart");this.__bWasDragged=true;BX.bind(BX.proxy_context,"click",BX.PreventDefault)}BX.onCustomEvent(this,"onWindowDrag")};BX.CWindow.prototype.__stopDrag=function(t){if(document.body.releaseCapture)document.body.releaseCapture();BX.unbind(document,"mousemove",BX.proxy(this.__moveDrag,this));BX.unbind(document,"mouseup",BX.proxy(this.__stopDrag,this));document.onmousedown=null;var e=document.body;e.ondrag=e.onselectstart=null;e.style.MozUserSelect=this.DIV.style.MozUserSelect="";e.style.cursor="";if(this.__bWasDragged){BX.onCustomEvent(this,"onWindowDragFinished");var i=BX.proxy_context;setTimeout((function(){BX.unbind(i,"click",BX.PreventDefault)}),100);this.__bWasDragged=false}return BX.PreventDefault(t)};BX.CWindow.prototype.DenyClose=function(){this.denyClose=true};BX.CWindow.prototype.AllowClose=function(){this.denyClose=false};BX.CWindow.prototype.ShowError=function(t){BX.onCustomEvent(this,"onWindowError",[t]);if(this._wait)BX.closeWait(this._wait);window.alert(t)};BX.CWindow.prototype.__set_msover=function(){this.MOUSEOVER=true};BX.CWindow.prototype.__unset_msover=function(){this.MOUSEOVER=false};BX.CWindowDialog=function(){var t=arguments;t[1]="dialog";BX.CWindowDialog.superclass.constructor.apply(this,t);this.DIV.style.top="10px";this.OVERLAY=null};BX.extend(BX.CWindowDialog,BX.CWindow);BX.CWindowDialog.prototype.__resizeOverlay=function(){var t=BX.GetWindowScrollSize();this.OVERLAY.style.width=t.scrollWidth+"px"};BX.CWindowDialog.prototype.CreateOverlay=function(t){if(null==this.OVERLAY){var e=BX.GetWindowScrollSize();var i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight,e.scrollHeight);this.OVERLAY=document.body.appendChild(BX.create("DIV",{style:{position:"absolute",top:"0px",left:"0px",zIndex:t||parseInt(this.DIV.style.zIndex)-2,width:e.scrollWidth+"px",height:i+"px"}}));var s=BX.ZIndexManager.getComponent(this.DIV);if(s){s.setOverlay(this.OVERLAY)}}return this.OVERLAY};BX.CWindowDialog.prototype.Show=function(){BX.CWindowDialog.superclass.Show.apply(this,arguments);this.CreateOverlay();this.OVERLAY.style.display="block";BX.unbind(window,"resize",BX.proxy(this.__resizeOverlay,this));BX.bind(window,"resize",BX.proxy(this.__resizeOverlay,this))};BX.CWindowDialog.prototype.onUnRegister=function(t){BX.CWindowDialog.superclass.onUnRegister.apply(this,arguments);if(this.clean){if(this.OVERLAY.parentNode)this.OVERLAY.parentNode.removeChild(this.OVERLAY)}else{this.OVERLAY.style.display="none"}BX.unbind(window,"resize",BX.proxy(this.__resizeOverlay,this))};BX.CDialog=function(t){BX.CDialog.superclass.constructor.apply(this);this._sender="core_window_cdialog";this.PARAMS=t||{};for(var e in this.defaultParams){if(typeof this.PARAMS[e]=="undefined")this.PARAMS[e]=this.defaultParams[e]}this.PARAMS.width=!isNaN(parseInt(this.PARAMS.width))?this.PARAMS.width:this.defaultParams["width"];this.PARAMS.height=!isNaN(parseInt(this.PARAMS.height))?this.PARAMS.height:this.defaultParams["height"];if(this.PARAMS.resize_id||this.PARAMS.content_url){var i=BX.WindowManager.getRuntimeWindowSize(this.PARAMS.resize_id||this.PARAMS.content_url);if(i){this.PARAMS.width=i.width;this.PARAMS.height=i.height}}BX.addClass(this.DIV,"bx-core-adm-dialog");this.DIV.id="bx-admin-prefix";this.PARTS={};this.DIV.style.height=null;this.DIV.style.width=null;this.PARTS.TITLEBAR=this.DIV.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-head"}}));this.PARTS.TITLE_CONTAINER=this.PARTS.TITLEBAR.appendChild(BX.create("SPAN",{props:{className:"bx-core-adm-dialog-head-inner"},text:this.PARAMS.title}));this.PARTS.TITLEBAR_ICONS=this.PARTS.TITLEBAR.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-head-icons"},children:this.PARAMS.resizable?[BX.create("SPAN",{props:{className:"bx-core-adm-icon-expand",title:BX.message("JS_CORE_WINDOW_EXPAND")}}),BX.create("SPAN",{props:{className:"bx-core-adm-icon-close",title:BX.message("JS_CORE_WINDOW_CLOSE")}})]:[BX.create("SPAN",{props:{className:"bx-core-adm-icon-close",title:BX.message("JS_CORE_WINDOW_CLOSE")}})]}));this.PARTS.CONTENT=this.DIV.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-content-wrap adm-workarea"}}));this.PARTS.CONTENT_DATA=this.PARTS.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-content"},style:{height:this.PARAMS.height+"px",width:this.PARAMS.width+"px"}}));this.PARTS.HEAD=this.PARTS.CONTENT_DATA.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-head-block"+(this.PARAMS.icon?" "+this.PARAMS.icon:"")}}));this.SetHead(this.PARAMS.head);this.SetContent(this.PARAMS.content);this.SetTitle(this.PARAMS.title);this.SetClose(this.PARTS.TITLEBAR_ICONS.lastChild);if(this.PARAMS.resizable){this.SetExpand(this.PARTS.TITLEBAR_ICONS.firstChild);this.SetExpand(this.PARTS.TITLEBAR,"dblclick");BX.addCustomEvent(this,"onWindowExpand",BX.proxy(this.__onexpand,this));BX.addCustomEvent(this,"onWindowNarrow",BX.proxy(this.__onexpand,this))}this.PARTS.FOOT=this.PARTS.BUTTONS_CONTAINER=this.PARTS.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-buttons"},children:this.ShowButtons()}));if(this.PARAMS.draggable)this.SetDraggable(this.PARTS.TITLEBAR);if(this.PARAMS.resizable){this.PARTS.RESIZER=this.DIV.appendChild(BX.create("DIV",{props:{className:"bx-core-resizer"}}));this.SetResize(this.PARTS.RESIZER);this.SETTINGS.min_width=this.PARAMS.min_width;this.SETTINGS.min_height=this.PARAMS.min_height}this.auth_callback=BX.delegate((function(){this.PARAMS.content="";this.hideNotify();this.Show()}),this)};BX.extend(BX.CDialog,BX.CWindowDialog);BX.CDialog.prototype.defaultParams={width:700,height:400,min_width:500,min_height:300,resizable:true,draggable:true,title:"",icon:""};BX.CDialog.prototype.showWait=function(t){if(BX.type.isElementNode(t)&&(t.type=="button"||t.type=="submit")){BX.defer((function(){t.disabled=true}))();var e=BX.hasClass(t,"adm-btn-save")||BX.hasClass(t,"adm-btn-save"),i=BX.pos(t,true);t.bxwaiter=this.PARTS.FOOT.appendChild(BX.create("DIV",{props:{className:"adm-btn-load-img"+(e?"-green":"")},style:{top:parseInt((i.bottom+i.top)/2-10)+"px",left:parseInt((i.right+i.left)/2-10)+"px"}}));BX.addClass(t,"adm-btn-load");this.lastWaitElement=t;return t.bxwaiter}return null};BX.CDialog.prototype.closeWait=function(t){t=t||this.lastWaitElement;if(BX.type.isElementNode(t)){if(t.bxwaiter){if(t.bxwaiter.parentNode){t.bxwaiter.parentNode.removeChild(t.bxwaiter)}t.bxwaiter=null}t.disabled=false;BX.removeClass(t,"adm-btn-load");if(this.lastWaitElement==t)this.lastWaitElement=null}};BX.CDialog.prototype.Authorize=function(t){this.bSkipReplaceContent=true;this.ShowError(BX.message("JSADM_AUTH_REQ"));BX.onCustomEvent(this,"onWindowError",[]);BX.closeWait();new BX.CAuthDialog({content_url:this.PARAMS.content_url,auth_result:t,callback:BX.delegate((function(){if(this.auth_callback)this.auth_callback()}),this)}).Show()};BX.CDialog.prototype.ShowError=function(t){BX.onCustomEvent(this,"onWindowError",[t]);this.closeWait();if(this._wait)BX.closeWait(this._wait);this.Notify(t,true)};BX.CDialog.prototype.__expandGetSize=function(){var t=BX.GetDocElement();t.style.overflow="hidden";var e=BX.GetWindowInnerSize();t.scrollTop=0;this.DIV.style.top="-"+this.dxShadow+"px";this.DIV.style.left="-"+this.dxShadow+"px";return{width:e.innerWidth-parseInt(BX.style(this.PARTS.CONTENT,"padding-right"))-parseInt(BX.style(this.PARTS.CONTENT,"padding-left"))+this.dxShadow,height:e.innerHeight-this.PARTS.TITLEBAR.offsetHeight-this.PARTS.FOOT.offsetHeight-parseInt(BX.style(this.PARTS.CONTENT,"padding-top"))-parseInt(BX.style(this.PARTS.CONTENT,"padding-bottom"))+this.dxShadow}};BX.CDialog.prototype.__expand=function(){var t=BX.GetDocElement();this.dxShadow=2;if(!this.bExpanded){var e=BX.GetWindowScrollPos();this.__expand_settings={resizable:this.SETTINGS.resizable,draggable:this.SETTINGS.draggable,width:this.PARTS.CONTENT_DATA.style.width,height:this.PARTS.CONTENT_DATA.style.height,left:this.DIV.style.left,top:this.DIV.style.top,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,overflow:BX.style(t,"overflow")};this.SETTINGS.resizable=false;this.SETTINGS.draggable=false;var i=this.__expandGetSize();this.PARTS.CONTENT_DATA.style.width=i.width+"px";this.PARTS.CONTENT_DATA.style.height=i.height+"px";window.scrollTo(0,0);t.style.overflow="hidden";this.bExpanded=true;BX.onCustomEvent(this,"onWindowExpand");BX.onCustomEvent(this,"onWindowResize");BX.onCustomEvent(this,"onWindowResizeExt",[{width:i.width,height:i.height}]);BX.bind(window,"resize",BX.proxy(this.__expand_onresize,this))}else{BX.unbind(window,"resize",BX.proxy(this.__expand_onresize,this));this.SETTINGS.resizable=this.__expand_settings.resizable;this.SETTINGS.draggable=this.__expand_settings.draggable;t.style.overflow=this.__expand_settings.overflow;this.DIV.style.top=this.__expand_settings.top;this.DIV.style.left=this.__expand_settings.left;this.PARTS.CONTENT_DATA.style.width=this.__expand_settings.width;this.PARTS.CONTENT_DATA.style.height=this.__expand_settings.height;window.scrollTo(this.__expand_settings.scrollLeft,this.__expand_settings.scrollTop);this.bExpanded=false;BX.onCustomEvent(this,"onWindowNarrow");BX.onCustomEvent(this,"onWindowResize");BX.onCustomEvent(this,"onWindowResizeExt",[{width:parseInt(this.__expand_settings.width),height:parseInt(this.__expand_settings.height)}])}};BX.CDialog.prototype.__expand_onresize=function(){var t=this.__expandGetSize();this.PARTS.CONTENT_DATA.style.width=t.width+"px";this.PARTS.CONTENT_DATA.style.height=t.height+"px";BX.onCustomEvent(this,"onWindowResize");BX.onCustomEvent(this,"onWindowResizeExt",[t])};BX.CDialog.prototype.__onexpand=function(){var t=this.PARTS.TITLEBAR_ICONS.firstChild;t.className=BX.toggle(t.className,["bx-core-adm-icon-expand","bx-core-adm-icon-narrow"]);t.title=BX.toggle(t.title,[BX.message("JS_CORE_WINDOW_EXPAND"),BX.message("JS_CORE_WINDOW_NARROW")]);if(this.PARTS.RESIZER){this.PARTS.RESIZER.style.display=this.bExpanded?"none":"block"}};BX.CDialog.prototype.__startResize=function(t){if(!this.SETTINGS.resizable)return false;if(!t)t=window.event;this.wndSize=BX.GetWindowScrollPos();this.wndSize.innerWidth=BX.GetWindowInnerSize().innerWidth;this.pos=BX.pos(this.PARTS.CONTENT_DATA);this.x=t.clientX+this.wndSize.scrollLeft;this.y=t.clientY+this.wndSize.scrollTop;this.dx=this.pos.left+this.pos.width-this.x;this.dy=this.pos.top+this.pos.height-this.y;this.dw=this.pos.width-parseInt(this.PARTS.CONTENT_DATA.style.width)+parseInt(BX.style(this.PARTS.CONTENT,"padding-right"));BX.bind(document,"mousemove",BX.proxy(this.__moveResize,this));BX.bind(document,"mouseup",BX.proxy(this.__stopResize,this));if(document.body.setCapture)document.body.setCapture();document.onmousedown=BX.False;var e=document.body;e.ondrag=e.onselectstart=BX.False;e.style.MozUserSelect=this.DIV.style.MozUserSelect="none";e.style.cursor="se-resize";BX.onCustomEvent(this,"onWindowResizeStart");return true};BX.CDialog.prototype.Resize=function(t,e){var i=Math.max(t-this.pos.left+this.dx,this.SETTINGS.min_width);var s=Math.max(e-this.pos.top+this.dy,this.SETTINGS.min_height);if(this.SETTINGS.resize_restrict){var o=BX.GetWindowScrollSize();if(this.pos.left+i>o.scrollWidth-this.dw)i=o.scrollWidth-this.pos.left-this.dw}this.PARTS.CONTENT_DATA.style.width=i+"px";this.PARTS.CONTENT_DATA.style.height=s+"px";BX.onCustomEvent(this,"onWindowResize");BX.onCustomEvent(this,"onWindowResizeExt",[{height:s,width:i}])};BX.CDialog.prototype.SetSize=function(t){this.PARTS.CONTENT_DATA.style.width=t.width+"px";this.PARTS.CONTENT_DATA.style.height=t.height+"px";BX.onCustomEvent(this,"onWindowResize");BX.onCustomEvent(this,"onWindowResizeExt",[t])};BX.CDialog.prototype.GetParameters=function(t){var e=this.GetForm();if(!e)return"";var i,s="";var o=e.elements.length;var n="";for(i=0;i<o;i++){if(s!="")n="&";var r=e.elements[i];if(r.disabled)continue;switch(r.type.toLowerCase()){case"text":case"textarea":case"password":case"hidden":if(null==t&&r.name.substr(r.name.length-4)=="_alt"&&e.elements[r.name.substr(0,r.name.length-4)])break;s+=n+r.name+"="+BX.util.urlencode(r.value);break;case"radio":if(r.checked)s+=n+r.name+"="+BX.util.urlencode(r.value);break;case"checkbox":s+=n+r.name+"="+BX.util.urlencode(r.checked?"Y":"N");break;case"select-one":var h="";if(null==t&&e.elements[r.name+"_alt"]&&r.selectedIndex==0)h=e.elements[r.name+"_alt"].value;else h=r.value;s+=n+r.name+"="+BX.util.urlencode(h);break;case"select-multiple":var a,l=false;var d=r.options.length;for(a=0;a<d;a++){if(r.options[a].selected){s+=n+r.name+"="+BX.util.urlencode(r.options[a].value);l=true}}if(!l)s+=n+r.name+"=";break;default:break}}return s};BX.CDialog.prototype.PostParameters=function(t){var e=this.PARAMS.content_url;if(null==t)t="";t+=(t==""?"":"&")+"bxsender="+this._sender;var i=e.indexOf("?");if(i==-1)e+="?"+t;else e=e.substring(0,i)+"?"+t+"&"+e.substring(i+1);BX.showWait();this.auth_callback=BX.delegate((function(){this.hideNotify();this.PostParameters(t)}),this);BX.ajax.Setup({skipAuthCheck:true},true);BX.ajax.post(e,this.GetParameters(),BX.delegate((function(t){BX.closeWait();if(!this.bSkipReplaceContent){this.ClearButtons();this.SetContent(t);this.Show(true)}this.bSkipReplaceContent=false}),this))};BX.CDialog.prototype.Submit=function(t,e){var i=this.GetForm();if(i){i.onsubmit=null;i.method="POST";if(!i.action||e){e=e||this.PARAMS.content_url;if(null!=t){var s=e.indexOf("?");if(s==-1)e+="?"+t;else e=e.substring(0,s)+"?"+t+"&"+e.substring(s+1)}i.action=e}if(!i._bxsender){i._bxsender=i.appendChild(BX.create("INPUT",{attrs:{type:"hidden",name:"bxsender",value:this._sender}}))}this._wait=BX.showWait();this.auth_callback=BX.delegate((function(){this.hideNotify();this.Submit(t)}),this);BX.ajax.submit(i,BX.delegate((function(){this.closeWait()}),this))}else{window.alert("no form registered!")}};BX.CDialog.prototype.GetForm=function(){if(null==this.__form){var t=this.PARTS.CONTENT_DATA.getElementsByTagName("FORM");this.__form=t[0]?t[0]:null}return this.__form};BX.CDialog.prototype.GetRealForm=function(){if(null==this.__rform){var t=this.PARTS.CONTENT_DATA.getElementsByTagName("FORM");this.__rform=t[1]?t[1]:t[0]?t[0]:null}return this.__rform};BX.CDialog.prototype._checkButton=function(t){var e=["btnSave","btnCancel","btnClose"];for(var i=0;i<e.length;i++){if(this[e[i]]&&t==this[e[i]])return e[i]}return false};BX.CDialog.prototype.ShowButtons=function(){var t=[];if(this.PARAMS.buttons){if(this.PARAMS.buttons.title)this.PARAMS.buttons=[this.PARAMS.buttons];for(var e=0,i=this.PARAMS.buttons.length;e<i;e++){if(BX.type.isNotEmptyString(this.PARAMS.buttons[e])){t.push(this.PARAMS.buttons[e])}else if(BX.type.isElementNode(this.PARAMS.buttons[e])){t.push(this.PARAMS.buttons[e])}else if(this.PARAMS.buttons[e]){if(!BX.is_subclass_of(this.PARAMS.buttons[e],BX.CWindowButton)){var s=this._checkButton(this.PARAMS.buttons[e]);this.PARAMS.buttons[e]=new BX.CWindowButton(this.PARAMS.buttons[e]);if(s)this[s]=this.PARAMS.buttons[e]}t.push(this.PARAMS.buttons[e].Button(this))}}}return t};BX.CDialog.prototype.setAutosave=function(){if(!this.bSetAutosaveDelay){this.bSetAutosaveDelay=true;setTimeout(BX.proxy(this.setAutosave,this),10)}};BX.CDialog.prototype.SetTitle=function(t){this.PARAMS.title=t;BX.cleanNode(this.PARTS.TITLE_CONTAINER).appendChild(document.createTextNode(this.PARAMS.title))};BX.CDialog.prototype.SetHead=function(t){this.PARAMS.head=BX.util.trim(t);this.PARTS.HEAD.innerHTML=this.PARAMS.head||"&nbsp;";this.PARTS.HEAD.style.display=this.PARAMS.head?"block":"none";this.adjustSize()};BX.CDialog.prototype.Notify=function(t,e,i){if(!this.PARTS.NOTIFY){this.PARTS.NOTIFY=this.DIV.insertBefore(BX.create("DIV",{props:{className:"adm-warning-block"},children:[BX.create("SPAN",{props:{className:"adm-warning-text"}}),BX.create("SPAN",{props:{className:"adm-warning-icon"}}),BX.create("SPAN",{props:{className:"adm-warning-close"},events:{click:BX.proxy(this.hideNotify,this)}})]}),this.DIV.firstChild)}if(e)BX.addClass(this.PARTS.NOTIFY,"adm-warning-block-red");else BX.removeClass(this.PARTS.NOTIFY,"adm-warning-block-red");if(i!==true){t=BX.util.htmlspecialchars(t)}this.PARTS.NOTIFY.firstChild.innerHTML=t||"&nbsp;";this.PARTS.NOTIFY.firstChild.style.width=this.PARAMS.width-50+"px";BX.removeClass(this.PARTS.NOTIFY,"adm-warning-animate")};BX.CDialog.prototype.hideNotify=function(){BX.addClass(this.PARTS.NOTIFY,"adm-warning-animate")};BX.CDialog.prototype.__adjustHeadToIcon=function(){if(!this.PARTS.HEAD.offsetHeight){setTimeout(BX.delegate(this.__adjustHeadToIcon,this),50)}else{if(this.icon_image&&this.icon_image.height&&this.icon_image.height>this.PARTS.HEAD.offsetHeight-5){this.PARTS.HEAD.style.height=this.icon_image.height+5+"px";this.adjustSize()}this.icon_image.onload=null;this.icon_image=null}};BX.CDialog.prototype.SetIcon=function(t){if(this.PARAMS.icon!=t){if(this.PARAMS.icon)BX.removeClass(this.PARTS.HEAD,this.PARAMS.icon);this.PARAMS.icon=t;if(this.PARAMS.icon){BX.addClass(this.PARTS.HEAD,this.PARAMS.icon);var e=BX.style(this.PARTS.HEAD,"background-image")||BX.style(this.PARTS.HEAD,"backgroundImage");if(BX.type.isNotEmptyString(e)&&e!="none"){var i=e.match(new RegExp("url\\s*\\(\\s*('|\"|)(.+?)(\\1)\\s*\\)"));if(i){e=i[2];if(BX.type.isNotEmptyString(e)){this.icon_image=new Image;this.icon_image.onload=BX.delegate(this.__adjustHeadToIcon,this);this.icon_image.src=e}}}}}this.adjustSize()};BX.CDialog.prototype.SetIconFile=function(t){this.icon_image=new Image;this.icon_image.onload=BX.delegate(this.__adjustHeadToIcon,this);this.icon_image.src=t;BX.adjust(this.PARTS.HEAD,{style:{backgroundImage:"url("+t+")",backgroundPosition:"right 9px"}});this.adjustSize()};BX.CDialog.prototype.SetButtons=function(t){if(BX.type.isString(t)){if(t.length>0){this.PARTS.BUTTONS_CONTAINER.innerHTML+=t;var e=this.PARTS.BUTTONS_CONTAINER.getElementsByTagName("INPUT");if(e.length>0){this.PARAMS.buttons=[];for(var i=0;i<e.length;i++){this.PARAMS.buttons.push(new BX.CWindowButton({btn:e[i],parentWindow:this}))}}}}else{this.PARAMS.buttons=t;BX.adjust(this.PARTS.BUTTONS_CONTAINER,{children:this.ShowButtons()})}this.adjustSize()};BX.CDialog.prototype.ClearButtons=function(){BX.cleanNode(this.PARTS.BUTTONS_CONTAINER);this.adjustSize()};BX.CDialog.prototype.SetContent=function(t){this.__form=null;if(BX.type.isElementNode(t)){if(t.parentNode)t.parentNode.removeChild(t)}else if(BX.type.isString(t)){t=BX.create("DIV",{html:t})}this.PARAMS.content=t;BX.cleanNode(this.PARTS.CONTENT_DATA);BX.adjust(this.PARTS.CONTENT_DATA,{children:[this.PARTS.HEAD,BX.create("DIV",{props:{className:"bx-core-adm-dialog-content-wrap-inner"},children:[this.PARAMS.content]})]});if(this.PARAMS.content_url&&this.GetForm()){this.__form.submitbtn=this.__form.appendChild(BX.create("INPUT",{props:{type:"submit"},style:{display:"none"}}));this.__form.onsubmit=BX.delegate(this.__submit,this)}};BX.CDialog.prototype.__submit=function(t){for(var e=0,i=this.PARAMS.buttons.length;e<i;e++){if(this.PARAMS.buttons[e]&&(this.PARAMS.buttons[e].name&&/save|apply/i.test(this.PARAMS.buttons[e].name)||this.PARAMS.buttons[e].btn&&this.PARAMS.buttons[e].btn.name&&/save|apply/i.test(this.PARAMS.buttons[e].btn.name))){this.PARAMS.buttons[e].emulate();break}}return BX.PreventDefault(t)};BX.CDialog.prototype.SwapContent=function(t){t=BX(t);BX.cleanNode(this.PARTS.CONTENT_DATA);t.parentNode.removeChild(t);this.PARTS.CONTENT_DATA.appendChild(t);t.style.display="block";this.SetContent(t.innerHTML)};BX.CDialog.prototype.adjustSize=function(){};BX.CDialog.prototype.__adjustSize=function(){};BX.CDialog.prototype.adjustSizeEx=function(){BX.defer(this.__adjustSizeEx,this)()};BX.CDialog.prototype.__adjustSizeEx=function(){var t=this.PARTS.CONTENT_DATA.firstChild,e=0,i,s;while(t){if(BX.type.isElementNode(t)){i=parseInt(BX.style(t,"margin-top"),10);if(isNaN(i))i=0;s=parseInt(BX.style(t,"margin-bottom"),10);if(isNaN(s))s=0;e+=t.offsetHeight+i+s}t=BX.nextSibling(t)}if(e)this.PARTS.CONTENT_DATA.style.height=e+"px"};BX.CDialog.prototype.__onResizeFinished=function(){BX.WindowManager.saveWindowSize(this.PARAMS.resize_id||this.PARAMS.content_url,{height:parseInt(this.PARTS.CONTENT_DATA.style.height),width:parseInt(this.PARTS.CONTENT_DATA.style.width)})};BX.CDialog.prototype.Show=function(t){if(!this.PARAMS.content&&this.PARAMS.content_url&&BX.ajax&&!t){var e=BX.showWait();BX.WindowManager.currently_loaded=this;this.CreateOverlay();this.OVERLAY.style.display="block";this.OVERLAY.className="bx-core-dialog-overlay";var i="",s="GET";if(this.PARAMS.content_post){i=this.PARAMS.content_post;s="POST"}var o=this.PARAMS.content_url+(this.PARAMS.content_url.indexOf("?")<0?"?":"&")+"bxsender="+this._sender;this.auth_callback=BX.delegate((function(){this.PARAMS.content="";this.hideNotify();this.Show()}),this);BX.ajax({method:s,dataType:"html",url:o,data:i,skipAuthCheck:true,onsuccess:BX.delegate((function(t){BX.closeWait(null,e);this.SetContent(t||"&nbsp;");this.Show()}),this)})}else{BX.WindowManager.currently_loaded=null;BX.CDialog.superclass.Show.apply(this,arguments);this.adjustPos();this.OVERLAY.className="bx-core-dialog-overlay";this.__adjustSize();BX.removeCustomEvent(this,"onWindowResize",BX.proxy(this.__adjustSize,this));BX.addCustomEvent(this,"onWindowResize",BX.proxy(this.__adjustSize,this));if(this.PARAMS.resizable&&(this.PARAMS.content_url||this.PARAMS.resize_id)){BX.removeCustomEvent(this,"onWindowResizeFinished",BX.proxy(this.__onResizeFinished,this));BX.addCustomEvent(this,"onWindowResizeFinished",BX.proxy(this.__onResizeFinished,this))}}};BX.CDialog.prototype.GetInnerPos=function(){return{width:parseInt(this.PARTS.CONTENT_DATA.style.width),height:parseInt(this.PARTS.CONTENT_DATA.style.height)}};BX.CDialog.prototype.adjustPos=function(){if(!this.bExpanded){var t=window;var e=BX.PageObject.getRootWindow();if(e.BX.SidePanel&&e.BX.SidePanel.Instance&&e.BX.SidePanel.Instance.getTopSlider()){t=e.BX.SidePanel.Instance.getTopSlider().getWindow()}var i=t.BX.GetWindowInnerSize();var s=t.BX.GetWindowScrollPos();var o={left:parseInt(s.scrollLeft+i.innerWidth/2-parseInt(this.DIV.offsetWidth)/2)+"px",top:Math.max(parseInt(s.scrollTop+i.innerHeight/2-parseInt(this.DIV.offsetHeight)/2),0)+"px"};BX.adjust(this.DIV,{style:o})}};BX.CDialog.prototype.GetContent=function(){return this.PARTS.CONTENT_DATA};BX.CDialog.prototype.btnSave=BX.CDialog.btnSave={title:BX.message("JS_CORE_WINDOW_SAVE"),id:"savebtn",name:"savebtn",className:BX.browser.IsIE()&&BX.browser.IsDoctype()&&!BX.browser.IsIE10()?"":"adm-btn-save",action:function(){this.disableUntilError();this.parentWindow.PostParameters()}};BX.CDialog.prototype.btnCancel=BX.CDialog.btnCancel={title:BX.message("JS_CORE_WINDOW_CANCEL"),id:"cancel",name:"cancel",action:function(){this.parentWindow.Close()}};BX.CDialog.prototype.btnClose=BX.CDialog.btnClose={title:BX.message("JS_CORE_WINDOW_CLOSE"),id:"close",name:"close",action:function(){this.parentWindow.Close()}};BX.CAdminDialog=function(t){BX.CAdminDialog.superclass.constructor.apply(this,arguments);this._sender="core_window_cadmindialog";BX.addClass(this.DIV,"bx-core-adm-admin-dialog");this.PARTS.CONTENT.insertBefore(this.PARTS.HEAD,this.PARTS.CONTENT.firstChild);this.PARTS.HEAD.className="bx-core-adm-dialog-tabs"};BX.extend(BX.CAdminDialog,BX.CDialog);BX.CAdminDialog.prototype.SetHead=function(){BX.CAdminDialog.superclass.SetHead.apply(this,arguments);if(this.PARTS.HEAD.firstChild&&BX.type.isElementNode(this.PARTS.HEAD.firstChild)){var t=this.PARTS.HEAD.firstChild,e=0,i=0,s=0;while(t){if(BX.type.isElementNode(t)){i=parseInt(BX.style(t,"margin-left"),10);if(isNaN(i))i=0;s=parseInt(BX.style(t,"margin-right"),10);if(isNaN(s))s=0;e+=t.offsetWidth+i+s}t=BX.nextSibling(t)}this.SETTINGS.min_width=Math.max(e,this.SETTINGS.min_width)-2;if(this.PARAMS.width<this.SETTINGS.min_width){BX.adjust(this.PARTS.CONTENT_DATA,{style:{width:this.SETTINGS.min_width+"px"}})}}};BX.CAdminDialog.prototype.SetContent=function(t){this.__form=null;if(BX.type.isElementNode(t)){if(t.parentNode)t.parentNode.removeChild(t)}this.PARAMS.content=t;BX.cleanNode(this.PARTS.CONTENT_DATA);BX.adjust(this.PARTS.CONTENT_DATA,{children:[this.PARAMS.content||"&nbsp;"]});if(this.PARAMS.content_url&&this.GetForm()){this.__form.appendChild(BX.create("INPUT",{props:{type:"submit"},style:{display:"none"}}));this.__form.onsubmit=BX.delegate(this.__submit,this)}};BX.CAdminDialog.prototype.__expandGetSize=function(){var t=BX.CAdminDialog.superclass.__expandGetSize.apply(this,arguments);t.width-=parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-right"))+parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-left"));t.height-=parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-top"))+parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-bottom"));t.height-=this.PARTS.HEAD.offsetHeight;return t};BX.CAdminDialog.prototype.Submit=function(){var t=this.GetForm();if(t&&!t["bxpublic"]&&!/bxpublic=/.test(t.action)){t.appendChild(BX.create("INPUT",{props:{type:"hidden",name:"bxpublic",value:"Y"}}))}return BX.CAdminDialog.superclass.Submit.apply(this,arguments)};BX.CAdminDialog.prototype.btnSave=BX.CAdminDialog.btnSave={title:BX.message("JS_CORE_WINDOW_SAVE"),id:"savebtn",name:"savebtn",className:"adm-btn-save",action:function(){this.disableUntilError();this.parentWindow.Submit()}};BX.CAdminDialog.btnCancel=BX.CAdminDialog.superclass.btnCancel;BX.CAdminDialog.btnClose=BX.CAdminDialog.superclass.btnClose;BX.CDebugDialog=function(t){BX.CDebugDialog.superclass.constructor.apply(this,arguments)};BX.extend(BX.CDebugDialog,BX.CDialog);BX.CDebugDialog.prototype.ShowDetails=function(t){var e=BX(t);if(e){if(this.div_detail_current)this.div_detail_current.style.display="none";e.style.display="block";this.div_detail_current=e}};BX.CDebugDialog.prototype.SetContent=function(t){if(!t)return;var e=t.split("#DIVIDER#");if(e.length>1){this.PARAMS.content=e[1];this.PARTS.CONTENT_DATA.style.overflow="hidden";BX.CDebugDialog.superclass.SetContent.apply(this,[e[1]]);this.PARTS.CONTENT_INNER=this.PARTS.CONTENT_DATA.firstChild.nextSibling;this.PARTS.CONTENT_TOP=this.PARTS.CONTENT_DATA.insertBefore(BX.create("DIV",{props:{className:"bx-debug-content-top"},html:e[0]}),this.PARTS.CONTENT_INNER);this.PARTS.CONTENT_INNER.style.overflow="auto"}else{BX.CDebugDialog.superclass.SetContent.apply(this,arguments)}};BX.CDebugDialog.prototype.__adjustSize=function(){BX.CDebugDialog.superclass.__adjustSize.apply(this,arguments);if(this.PARTS.CONTENT_TOP){var t=this.PARTS.CONTENT_DATA.offsetHeight-this.PARTS.HEAD.offsetHeight-this.PARTS.CONTENT_TOP.offsetHeight-38;if(t>0){this.PARTS.CONTENT_INNER.style.height=t+"px"}}};BX.CEditorDialog=function(t){BX.CEditorDialog.superclass.constructor.apply(this,arguments);BX.removeClass(this.PARTS.CONTENT,"bx-core-adm-dialog-content-wrap");BX.removeClass(this.PARTS.CONTENT_DATA,"bx-core-adm-dialog-content");BX.removeClass(this.PARTS.CONTENT_DATA.lastChild,"bx-core-adm-dialog-content-wrap-inner");BX.removeClass(this.PARTS.BUTTONS_CONTAINER,"bx-core-adm-dialog-buttons");BX.addClass(this.PARTS.CONTENT,"bx-core-editor-dialog-content-wrap");BX.addClass(this.PARTS.CONTENT_DATA,"bx-core-editor-dialog-content");BX.addClass(this.PARTS.BUTTONS_CONTAINER,"bx-core-editor-dialog-buttons")};BX.extend(BX.CEditorDialog,BX.CDialog);BX.CEditorDialog.prototype.SetContent=function(){BX.CEditorDialog.superclass.SetContent.apply(this,arguments);BX.removeClass(this.PARTS.CONTENT_DATA.lastChild,"bx-core-adm-dialog-content-wrap-inner")};BX.CWizardDialog=function(t){BX.CWizardDialog.superclass.constructor.apply(this,arguments);BX.removeClass(this.PARTS.CONTENT,"bx-core-adm-dialog-content-wrap");BX.removeClass(this.PARTS.CONTENT_DATA,"bx-core-adm-dialog-content");BX.removeClass(this.PARTS.CONTENT_DATA.lastChild,"bx-core-adm-dialog-content-wrap-inner");BX.removeClass(this.PARTS.BUTTONS_CONTAINER,"bx-core-adm-dialog-buttons");BX.addClass(this.PARTS.CONTENT,"bx-core-wizard-dialog-content-wrap")};BX.extend(BX.CWizardDialog,BX.CDialog);BX.CAuthDialog=function(t){t.resizable=false;t.width=350;t.height=200;t.buttons=[this.btnSave];BX.CAuthDialog.superclass.constructor.apply(this,arguments);this._sender="core_window_cauthdialog";BX.addClass(this.DIV,"bx-core-auth-dialog");BX.AUTHAGENT=this};BX.extend(BX.CAuthDialog,BX.CDialog);BX.CAuthDialog.prototype.btnSave=BX.CAuthDialog.btnSave={title:BX.message("JS_CORE_WINDOW_AUTH"),id:"savebtn",name:"savebtn",className:"adm-btn-save",action:function(){this.disableUntilError();this.parentWindow.Submit("",this.parentWindow.PARAMS.content_url)}};BX.CAuthDialog.prototype.SetError=function(t){BX.closeWait();if(!!t)this.ShowError(t.MESSAGE||t)};BX.CAuthDialog.prototype.setAuthResult=function(t){BX.closeWait();if(t===false){this.Close();if(this.PARAMS.callback)this.PARAMS.callback()}else{this.SetError(t)}};BX.CWindowFloat=function(t){BX.CWindowFloat.superclass.constructor.apply(this,[t,"float"]);this.SETTINGS.resizable=false};BX.extend(BX.CWindowFloat,BX.CWindow);BX.CWindowFloat.prototype.adjustPos=function(){if(this.PARAMS.parent)this.adjustToNode();else if(this.PARAMS.x&&this.PARAMS.y)this.adjustToPos([this.PARAMS.x,this.PARAMS.y])};BX.CWindowFloat.prototype.adjustToPos=function(t){this.DIV.style.left=parseInt(t[0])+"px";this.DIV.style.top=parseInt(t[1])+"px"};BX.CWindowFloat.prototype.adjustToNodeGetPos=function(){return BX.pos(this.PARAMS.parent)};BX.CWindowFloat.prototype.adjustToNode=function(t){t=t||this.PARAMS.parent;this.PARAMS.parent=BX(t);if(this.PARAMS.parent){var e=this.adjustToNodeGetPos();this.DIV.style.top=e.top+"px";this.DIV.style.left=e.left+"px";this.PARAMS.parent.OPENER=this}};BX.CWindowFloat.prototype.Show=function(){this.adjustToPos([-1e3,-1e3]);BX.CWindowFloat.superclass.Show.apply(this,arguments);this.adjustPos()};BX.COpener=function(t){this.PARAMS=t||{};this.MENU=t.MENU||[];this.DIV=t.DIV;this.ATTACH=t.ATTACH||t.DIV;this.ATTACH_MODE=t.ATTACH_MODE||"bottom";this.ACTIVE_CLASS=t.ACTIVE_CLASS||"";this.PUBLIC_FRAME=t.PUBLIC_FRAME||0;this.LEVEL=t.LEVEL||0;this.CLOSE_ON_CLICK=typeof t.CLOSE_ON_CLICK!="undefined"?!!t.CLOSE_ON_CLICK:true;this.ADJUST_ON_CLICK=typeof t.ADJUST_ON_CLICK!="undefined"?!!t.ADJUST_ON_CLICK:true;this.TYPE=this.PARAMS.TYPE=="hover"?"hover":"click";this._openTimeout=null;if(this.PARAMS.TYPE=="hover"&&t.TIMEOUT!==0)this.TIMEOUT=t.TIMEOUT||1e3;else this.TIMEOUT=0;this.bMenuInit=false;if(!!this.PARAMS.MENU_URL){this.bMenuLoaded=false;this.bMenuLoading=false;this.MENU=[{TEXT:BX.message("JS_CORE_LOADING"),CLOSE_ON_CLICK:false}];if(this.PARAMS.MENU_PRELOAD){BX.defer(this.Load,this)()}}BX.ready(BX.defer(this.Init,this))};BX.COpener.prototype.Init=function(){this.DIV=BX(this.DIV);switch(this.TYPE){case"hover":BX.bind(this.DIV,"mouseover",BX.proxy(this.Open,this));BX.bind(this.DIV,"click",BX.proxy(this.Toggle,this));break;case"click":BX.bind(this.DIV,"click",BX.proxy(this.Toggle,this));break}};BX.COpener.prototype.Load=function(){if(this.PARAMS.MENU_URL&&!this.bMenuLoaded){if(!this.bMenuLoading){var t=this.PARAMS.MENU_URL;if(t.indexOf("sessid=")<=0)t+=(t.indexOf("?")>0?"&":"?")+"sessid="+BX.bitrix_sessid();this.bMenuLoading=true;BX.ajax.loadJSON(t,BX.proxy(this.SetMenu,this),BX.proxy(this.LoadFailed,this))}}};BX.COpener.prototype.SetMenu=function(t){this.bMenuLoaded=true;this.bMenuLoading=false;if(this.bMenuInit){this.MENU.setItems(t)}else{this.MENU=t}};BX.COpener.prototype.LoadFailed=function(t,e){this.bMenuLoading=false;this.SetMenu([{TEXT:BX.message("JS_CORE_NO_DATA"),CLOSE_ON_CLICK:true}]);BX.debug(arguments)};BX.COpener.prototype.checkAdminMenu=function(){if(document.documentElement.id=="bx-admin-prefix")return true;return!!BX.findParent(this.DIV,{property:{id:"bx-admin-prefix"}})};BX.COpener.prototype.Toggle=function(t){this.__clear_timeout();if(!this.bMenuInit||!this.MENU.visible()){var e=this.TIMEOUT;this.TIMEOUT=0;this.Open(t);this.TIMEOUT=e}else{this.MENU.Close()}return!!(t||window.event)&&BX.PreventDefault(t)};BX.COpener.prototype.GetMenu=function(){if(!this.bMenuInit){if(BX.type.isArray(this.MENU)){this.MENU=new BX.CMenu({ITEMS:this.MENU,ATTACH_MODE:this.ATTACH_MODE,SET_ID:this.checkAdminMenu()?"bx-admin-prefix":"",CLOSE_ON_CLICK:!!this.CLOSE_ON_CLICK,ADJUST_ON_CLICK:!!this.ADJUST_ON_CLICK,PUBLIC_FRAME:!!this.PUBLIC_FRAME,LEVEL:this.LEVEL,parent:BX(this.DIV),parent_attach:BX(this.ATTACH)});if(this.LEVEL>0){BX.bind(this.MENU.DIV,"mouseover",BX.proxy(this._on_menu_hover,this));BX.bind(this.MENU.DIV,"mouseout",BX.proxy(this._on_menu_hout,this))}}BX.addCustomEvent(this.MENU,"onMenuOpen",BX.proxy(this.handler_onopen,this));BX.addCustomEvent(this.MENU,"onMenuClose",BX.proxy(this.handler_onclose,this));BX.addCustomEvent("onMenuItemHover",BX.proxy(this.handler_onover,this));this.bMenuInit=true}return this.MENU};BX.COpener.prototype.Open=function(){this.GetMenu();this.bOpen=true;this.__clear_timeout();if(this.TIMEOUT>0){BX.bind(this.DIV,"mouseout",BX.proxy(this.__clear_timeout,this));this._openTimeout=setTimeout(BX.proxy(this.__open,this),this.TIMEOUT)}else{this.__open()}if(!!this.PARAMS.MENU_URL&&!this.bMenuLoaded){this._loadTimeout=setTimeout(BX.proxy(this.Load,this),parseInt(this.TIMEOUT/2))}return true};BX.COpener.prototype.__clear_timeout=function(){if(!!this._openTimeout)clearTimeout(this._openTimeout);if(!!this._loadTimeout)clearTimeout(this._loadTimeout);BX.unbind(this.DIV,"mouseout",BX.proxy(this.__clear_timeout,this))};BX.COpener.prototype._on_menu_hover=function(){this.bMenuHover=true;this.__clear_timeout();if(this.ACTIVE_CLASS)BX.addClass(this.DIV,this.ACTIVE_CLASS)};BX.COpener.prototype._on_menu_hout=function(){this.bMenuHover=false};BX.COpener.prototype.handler_onover=function(t,e){if(this.bMenuHover)return;if(e!=this&&t==this.LEVEL-1&&this.ACTIVE_CLASS){BX.removeClass(this.DIV,this.ACTIVE_CLASS)}if(this.bMenuInit&&t<=this.LEVEL-1&&this.MENU.visible()){if(e!=this){this.__clear_timeout();this._openTimeout=setTimeout(BX.proxy(this.Close,this),this.TIMEOUT)}}};BX.COpener.prototype.handler_onopen=function(){this.bOpen=true;if(this.ACTIVE_CLASS)BX.addClass(this.DIV,this.ACTIVE_CLASS);BX.defer((function(){BX.onCustomEvent(this,"onOpenerMenuOpen")}),this)()};BX.COpener.prototype.handler_onclose=function(){this.bOpen=false;BX.onCustomEvent(this,"onOpenerMenuClose");if(this.ACTIVE_CLASS)BX.removeClass(this.DIV,this.ACTIVE_CLASS)};BX.COpener.prototype.Close=function(){if(!this.bMenuInit)return;if(!!this._openTimeout)clearTimeout(this._openTimeout);this.bOpen=false;this.__close()};BX.COpener.prototype.__open=function(){this.__clear_timeout();if(this.bMenuInit&&this.bOpen&&!this.MENU.visible())this.MENU.Show()};BX.COpener.prototype.__close=function(){if(this.bMenuInit&&!this.bOpen&&this.MENU.visible())this.MENU.Hide()};BX.COpener.prototype.__close_immediately=function(){this.bOpen=false;this.__close()};BX.COpener.prototype.isMenuVisible=function(){return null!=this.MENU.visible&&this.MENU.visible()};BX.CMenu=function(t){BX.CMenu.superclass.constructor.apply(this);this.DIV.style.width="auto";this.DIV.style.height="auto";this.PARAMS=t||{};this.PARTS={};this.PARAMS.ATTACH_MODE=this.PARAMS.ATTACH_MODE||"bottom";this.PARAMS.CLOSE_ON_CLICK=typeof this.PARAMS.CLOSE_ON_CLICK=="undefined"?true:this.PARAMS.CLOSE_ON_CLICK;this.PARAMS.ADJUST_ON_CLICK=typeof this.PARAMS.ADJUST_ON_CLICK=="undefined"?true:this.PARAMS.ADJUST_ON_CLICK;this.PARAMS.PUBLIC_FRAME=typeof this.PARAMS.PUBLIC_FRAME=="undefined"?false:this.PARAMS.PUBLIC_FRAME;this.PARAMS.LEVEL=this.PARAMS.LEVEL||0;this.DIV.className="bx-core-popup-menu bx-core-popup-menu-"+this.PARAMS.ATTACH_MODE+" bx-core-popup-menu-level"+this.PARAMS.LEVEL+(typeof this.PARAMS.ADDITIONAL_CLASS!="undefined"?" "+this.PARAMS.ADDITIONAL_CLASS:"");if(!!this.PARAMS.SET_ID)this.DIV.id=this.PARAMS.SET_ID;if(this.PARAMS.LEVEL==0){this.ARROW=this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-core-popup-menu-angle"},style:{left:"15px"}}))}if(!!this.PARAMS.CLASS_NAME)this.DIV.className+=" "+this.PARAMS.CLASS_NAME;BX.bind(this.DIV,"click",BX.eventCancelBubble);this.ITEMS=[];this.setItems(this.PARAMS.ITEMS);BX.addCustomEvent("onMenuOpen",BX.proxy(this._onMenuOpen,this));BX.addCustomEvent("onMenuItemSelected",BX.proxy(this.Hide,this))};BX.extend(BX.CMenu,BX.CWindowFloat);BX.CMenu.broadcastCloseEvent=function(){BX.onCustomEvent("onMenuItemSelected")};BX.CMenu._toggleChecked=function(){BX.toggleClass(this,"bx-core-popup-menu-item-checked")};BX.CMenu._itemDblClick=function(){window.location.href=this.href};BX.CMenu.prototype.toggleArrow=function(t){if(!!this.ARROW){if(typeof t=="undefined"){t=this.ARROW.style.visibility=="hidden"}this.ARROW.style.visibility=!!t?"visible":"hidden"}};BX.CMenu.prototype.visible=function(){return this.DIV.style.display!=="none"};BX.CMenu.prototype._onMenuOpen=function(t,e){if(this.visible()){if(e==this.PARAMS.LEVEL&&t!=this){this.Hide()}}};BX.CMenu.prototype.onUnRegister=function(){if(!this.visible())return;this.Hide()};BX.CMenu.prototype.setItems=function(t){this.PARAMS.ITEMS=t;BX.cleanNode(this.DIV);if(!!this.ARROW)this.DIV.appendChild(this.ARROW);if(this.PARAMS.ITEMS){this.PARAMS.ITEMS=BX.util.array_values(this.PARAMS.ITEMS);var e=false;var i=0;for(var s=0,o=this.PARAMS.ITEMS.length;s<o;s++){if((s==0||s==o-1)&&this.PARAMS.ITEMS[s].SEPARATOR)continue;i++;if(!e)e=!!this.PARAMS.ITEMS[s].GLOBAL_ICON;this.addItem(this.PARAMS.ITEMS[s],s)}if(i===1)BX.addClass(this.DIV,"bx-core-popup-menu-single-item");else BX.removeClass(this.DIV,"bx-core-popup-menu-single-item");if(!e)BX.addClass(this.DIV,"bx-core-popup-menu-no-icons");else BX.removeClass(this.DIV,"bx-core-popup-menu-no-icons")}};BX.CMenu.prototype.addItem=function(t){this.ITEMS.push(t);if(t.SEPARATOR){t.NODE=BX.create("DIV",{props:{className:"bx-core-popup-menu-separator"}})}else{var e=!!t.MENU&&(BX.type.isArray(t.MENU)&&t.MENU.length>0||t.MENU instanceof BX.CMenu)||!!t.MENU_URL;if(t.DISABLED){t.CLOSE_ON_CLICK=false;t.LINK=null;t.ONCLICK=null;t.ACTION=null}var i={};if(!!t.LINK||BX.browser.IsIE()&&!BX.browser.IsDoctype()){i.href=t.LINK||"javascript:void(0)"}if(this.PARAMS.PUBLIC_FRAME){i.target="_top"}t.NODE=BX.create(!!t.LINK||BX.browser.IsIE()&&!BX.browser.IsDoctype()?"A":"SPAN",{props:{className:"bx-core-popup-menu-item"+(e?" bx-core-popup-menu-item-opener":"")+(!!t.DEFAULT?" bx-core-popup-menu-item-default":"")+(!!t.DISABLED?" bx-core-popup-menu-item-disabled":"")+(!!t.CHECKED?" bx-core-popup-menu-item-checked":""),title:!!BX.message["MENU_ENABLE_TOOLTIP"]||!!t.SHOW_TITLE?t.TITLE||"":"",BXMENULEVEL:this.PARAMS.LEVEL},attrs:i,events:{mouseover:function(){BX.onCustomEvent("onMenuItemHover",[this.BXMENULEVEL,this.OPENER])}},html:'<span class="bx-core-popup-menu-item-icon'+(t.GLOBAL_ICON?" "+t.GLOBAL_ICON:"")+'"></span><span class="bx-core-popup-menu-item-text">'+(t.HTML||(t.TEXT?BX.util.htmlspecialchars(t.TEXT):""))+"</span>"});if(e&&!t.DISABLED){t.NODE.OPENER=new BX.COpener({DIV:t.NODE,ACTIVE_CLASS:"bx-core-popup-menu-item-opened",TYPE:"hover",MENU:t.MENU,MENU_URL:t.MENU_URL,MENU_PRELOAD:!!t.MENU_PRELOAD,LEVEL:this.PARAMS.LEVEL+1,ATTACH_MODE:"right",TIMEOUT:500})}else if(this.PARAMS.CLOSE_ON_CLICK&&(typeof t.CLOSE_ON_CLICK=="undefined"||!!t.CLOSE_ON_CLICK)){BX.bind(t.NODE,"click",BX.CMenu.broadcastCloseEvent)}else if(this.PARAMS.ADJUST_ON_CLICK&&(typeof t.ADJUST_ON_CLICK=="undefined"||!!t.ADJUST_ON_CLICK)){BX.bind(t.NODE,"click",BX.defer(this.adjustPos,this))}if(e&&!!t.LINK){BX.bind(t.NODE,"dblclick",BX.CMenu._itemDblClick)}if(typeof t.CHECKED!="undefined"){BX.bind(t.NODE,"click",BX.CMenu._toggleChecked)}t.ONCLICK=t.ACTION||t.ONCLICK;if(!!t.ONCLICK){if(BX.type.isString(t.ONCLICK)){t.ONCLICK=new Function("event",t.ONCLICK)}BX.bind(t.NODE,"click",t.ONCLICK)}}this.DIV.appendChild(t.NODE)};BX.CMenu.prototype._documentClickBind=function(){this._documentClickUnBind();BX.bind(document,"click",BX.proxy(this._documentClick,this))};BX.CMenu.prototype._documentClickUnBind=function(){BX.unbind(document,"click",BX.proxy(this._documentClick,this))};BX.CMenu.prototype._documentClick=function(t){t=t||window.event;if(!!t&&!(BX.getEventButton(t)&BX.MSLEFT))return;this.Close()};BX.CMenu.prototype.Show=function(){BX.onCustomEvent(this,"onMenuOpen",[this,this.PARAMS.LEVEL]);BX.CMenu.superclass.Show.apply(this,[]);this.bCloseEventFired=false;BX.addCustomEvent(this.PARAMS.parent_attach,"onChangeNodePosition",BX.proxy(this.adjustToNode,this));BX.defer(this._documentClickBind,this)()};BX.CMenu.prototype.Close=BX.CMenu.prototype.Hide=function(){if(!this.visible())return;BX.removeCustomEvent(this.PARAMS.parent_attach,"onChangeNodePosition",BX.proxy(this.adjustToNode,this));this._documentClickUnBind();if(!this.bCloseEventFired){BX.onCustomEvent(this,"onMenuClose",[this,this.PARAMS.LEVEL]);this.bCloseEventFired=true}BX.CMenu.superclass.Hide.apply(this,arguments)};BX.CMenu.prototype.__adjustMenuToNode=function(){var t=BX.pos(this.PARAMS.parent_attach),e=!!BX.findParent(this.PARAMS.parent_attach,BX.is_fixed);if(e)this.DIV.style.position="fixed";else this.DIV.style.position="absolute";if(!t.top){this.DIV.style.top="-1000px";this.DIV.style.left="-1000px"}if(this.bTimeoutSet)return;var i=this.DIV.offsetWidth,s=this.DIV.offsetHeight;if(!i){setTimeout(BX.delegate((function(){this.bTimeoutSet=false;this.__adjustMenuToNode()}),this),100);this.bTimeoutSet=true;return}var o={},n=BX.GetWindowSize();switch(this.PARAMS.ATTACH_MODE){case"bottom":o.top=t.bottom+9;o.left=t.left;var r=0;if(!!this.ARROW){if(t.width>i)r=parseInt(i/2-7);else r=parseInt(Math.min(i,t.width)/2-7);if(r<7){o.left-=15;r+=15}}if(o.left>n.scrollWidth-i-10){var h=o.left;o.left=n.scrollWidth-i-10;if(!!this.ARROW)r+=h-o.left}if(e){o.left-=n.scrollLeft}if(!!this.ARROW)this.ARROW.style.left=r+"px";break;case"right":o.top=t.top-1;o.left=t.right;if(o.left>n.scrollWidth-i-10){o.left=t.left-i-1}break}if(e){o.top-=n.scrollTop}if(!!this.ARROW)this.ARROW.className="bx-core-popup-menu-angle";if(o.top+s>n.scrollTop+n.innerHeight||o.top+s>n.scrollHeight){var a=this.PARAMS.ATTACH_MODE=="bottom"?t.top-s-9:t.bottom-s+1;if(a>n.scrollTop||o.top+s>n.scrollHeight){if(o.top+s>n.scrollHeight){o.top=Math.max(0,n.scrollHeight-s);this.toggleArrow(false)}else{o.top=a;if(!!this.ARROW)this.ARROW.className="bx-core-popup-menu-angle-bottom"}}}if(o.top+o.left==0){this.Hide()}else{this.DIV.style.top=o.top+"px";this.DIV.style.left=o.left+"px"}};BX.CMenu.prototype.adjustToNode=function(t){this.PARAMS.parent_attach=BX(t)||this.PARAMS.parent_attach||this.PARAMS.parent;this.__adjustMenuToNode()};BX.CMenuOpener=function(t){BX.CMenuOpener.superclass.constructor.apply(this);this.PARAMS=t||{};this.setParent(this.PARAMS.parent);this.PARTS={};this.SETTINGS.drag_restrict=true;this.defaultAction=null;this.timeout=500;this.DIV.className="bx-component-opener";this.DIV.ondblclick=BX.PreventDefault;if(this.PARAMS.component_id){this.PARAMS.transform=!!this.PARAMS.transform}this.OPENERS=[];this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar"+(this.PARAMS.transform?" bx-context-toolbar-vertical-mode":"")}}));this.PARTS.INNER=this.DIV.firstChild.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-inner"},html:'<span class="bx-context-toolbar-drag-icon"></span><span class="bx-context-toolbar-vertical-line"></span><br>'}));this.EXTRA_BUTTONS={};var e=0;for(var i=0,s=this.PARAMS.menu.length;i<s;i++){var o=this.addItem(this.PARAMS.menu[i]);if(null!=o){e++;this.PARTS.INNER.appendChild(o);this.PARTS.INNER.appendChild(BX.create("BR"))}}var n=e>0;this.PARTS.ICONS=this.PARTS.INNER.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-icons"}}));if(this.PARAMS.component_id){this.PARAMS.pin=!!this.PARAMS.pin;if(n)this.PARTS.ICONS.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-separator"}}));this.PARTS.ICON_PIN=this.PARTS.ICONS.appendChild(BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:this.PARAMS.pin?"bx-context-toolbar-pin-fixed":"bx-context-toolbar-pin"},events:{click:BX.delegate(this.__pin_btn_clicked,this)}}))}if(this.EXTRA_BUTTONS["components2_props"]){var r=this.EXTRA_BUTTONS["components2_props"]||{URL:"javascript:void(0)"};if(null==this.defaultAction){this.defaultAction=r.ONCLICK;this.defaultActionTitle=r.TITLE||r.TEXT}r.URL="javascript:"+BX.util.urlencode(r.ONCLICK);this.ATTACH=this.PARTS.ICONS.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-button bx-context-toolbar-button-settings"},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button-inner"},children:[BX.create("A",{attrs:{href:r.URL},events:{mouseover:BX.proxy(this.__msover_text,this),mouseout:BX.proxy(this.__msout_text,this),mousedown:BX.proxy(this.__msdown_text,this)},html:'<span class="bx-context-toolbar-button-icon bx-context-toolbar-settings-icon"></span>'}),BX.create("A",{attrs:{href:"javascript: void(0)"},props:{className:"bx-context-toolbar-button-arrow"},events:{mouseover:BX.proxy(this.__msover_arrow,this),mouseout:BX.proxy(this.__msout_arrow,this),mousedown:BX.proxy(this.__msdown_arrow,this)},html:'<span class="bx-context-toolbar-button-arrow"></span>'})]})]}));this.OPENER=this.ATTACH.firstChild.lastChild;var h=this.attachMenu(this.EXTRA_BUTTONS["components2_submenu"]["MENU"]);BX.addCustomEvent(h,"onOpenerMenuOpen",BX.proxy(this.__menu_open,this));BX.addCustomEvent(h,"onOpenerMenuClose",BX.proxy(this.__menu_close,this))}if(e>1){this.PARTS.ICONS.appendChild(BX.create("span",{props:{className:"bx-context-toolbar-separator bx-context-toolbar-separator-switcher"}}));this.ICON_TRANSFORM=this.PARTS.ICONS.appendChild(BX.create("A",{attrs:{href:"javascript: void(0)"},props:{className:"bx-context-toolbar-switcher"},events:{click:BX.delegate(this.__trf_btn_clicked,this)}}))}if(this.PARAMS.HINT){this.DIV.BXHINT=this.HINT=new BX.CHint({parent:this.DIV,hint:this.PARAMS.HINT.TEXT||"",title:this.PARAMS.HINT.TITLE||"",hide_timeout:this.timeout/2,preventHide:false})}BX.addCustomEvent(this,"onWindowDragFinished",BX.delegate(this.__onMoveFinished,this));BX.addCustomEvent("onDynamicModeChange",BX.delegate(this.__onDynamicModeChange,this));BX.addCustomEvent("onTopPanelCollapse",BX.delegate(this.__onPanelCollapse,this));BX.addCustomEvent("onMenuOpenerMoved",BX.delegate(this.checkPosition,this));BX.addCustomEvent("onMenuOpenerUnhide",BX.delegate(this.checkPosition,this));BX.Event.EventEmitter.incrementMaxListeners("onDynamicModeChange");BX.Event.EventEmitter.incrementMaxListeners("onTopPanelCollapse");BX.Event.EventEmitter.incrementMaxListeners("onMenuOpenerMoved");BX.Event.EventEmitter.incrementMaxListeners("onMenuOpenerUnhide");if(this.OPENERS){for(i=0,s=this.OPENERS.length;i<s;i++){BX.addCustomEvent(this.OPENERS[i],"onOpenerMenuOpen",BX.proxy(this.__hide_hint,this))}}};BX.extend(BX.CMenuOpener,BX.CWindowFloat);BX.CMenuOpener.prototype.setParent=function(t){t=BX(t);if(!t){return}if(t.OPENER&&t.OPENER!=this){t.OPENER.Close();t.OPENER.clearHoverHoutEvents()}if(this.PARAMS.parent&&this.PARAMS.parent!=t){this.clearHoverHoutEvents();this.PARAMS.parent.OPENER=null}this.PARAMS.parent=t;this.PARAMS.parent.OPENER=this};BX.CMenuOpener.prototype.setHoverHoutEvents=function(t,e){if(!this.__opener_events_set){BX.bind(this.Get(),"mouseover",t);BX.bind(this.Get(),"mouseout",e);this.__opener_events_set=true}};BX.CMenuOpener.prototype.clearHoverHoutEvents=function(){if(this.Get()){BX.unbindAll(this.Get());this.__opener_events_set=false}};BX.CMenuOpener.prototype.unclosable=true;BX.CMenuOpener.prototype.__check_intersection=function(t,e){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)};BX.CMenuOpener.prototype.__msover_text=function(){this.bx_hover=true;if(!this._menu_open)BX.addClass(this.ATTACH,"bx-context-toolbar-button-text-hover")};BX.CMenuOpener.prototype.__msout_text=function(){this.bx_hover=false;if(!this._menu_open)BX.removeClass(this.ATTACH,"bx-context-toolbar-button-text-hover bx-context-toolbar-button-text-active")};BX.CMenuOpener.prototype.__msover_arrow=function(){this.bx_hover=true;if(!this._menu_open)BX.addClass(this.ATTACH,"bx-context-toolbar-button-arrow-hover")};BX.CMenuOpener.prototype.__msout_arrow=function(){this.bx_hover=false;if(!this._menu_open)BX.removeClass(this.ATTACH,"bx-context-toolbar-button-arrow-hover bx-context-toolbar-button-arrow-active")};BX.CMenuOpener.prototype.__msdown_text=function(){this.bx_active=true;if(!this._menu_open)BX.addClass(this.ATTACH,"bx-context-toolbar-button-text-active")};BX.CMenuOpener.prototype.__msdown_arrow=function(){this.bx_active=true;if(!this._menu_open)BX.addClass(this.ATTACH,"bx-context-toolbar-button-arrow-active")};BX.CMenuOpener.prototype.__menu_close=function(){this._menu_open=false;this.bx_active=false;BX.removeClass(this.ATTACH,"bx-context-toolbar-button-active bx-context-toolbar-button-text-active bx-context-toolbar-button-arrow-active");if(!this.bx_hover){BX.removeClass(this.ATTACH,"bx-context-toolbar-button-hover bx-context-toolbar-button-text-hover bx-context-toolbar-button-arrow-hover");this.bx_hover=false}};BX.CMenuOpener.prototype.__menu_open=function(){this._menu_open=true};BX.CMenuOpener.prototype.checkPosition=function(){if(this.isMenuVisible()||this.DIV.style.display=="none"||this==BX.proxy_context||BX.proxy_context.zIndex>this.zIndex)return;this.correctPosition(BX.proxy_context)};BX.CMenuOpener.prototype.correctPosition=function(t){var e=BX.pos(this.DIV),i=BX.pos(t.Get());if(this.__check_intersection(e,i)){var s=i.top-e.height;if(s<0)s=i.bottom;this.DIV.style.top=s+"px";BX.addCustomEvent(t,"onMenuOpenerHide",BX.proxy(this.restorePosition,this));BX.onCustomEvent(this,"onMenuOpenerMoved")}};BX.CMenuOpener.prototype.restorePosition=function(){if(!this.MOUSEOVER&&!this.isMenuVisible()){if(this.originalPos)this.DIV.style.top=this.originalPos.top+"px";BX.removeCustomEvent(BX.proxy_context,"onMenuOpenerHide",BX.proxy(this.restorePosition,this));if(this.restore_pos_timeout)clearTimeout(this.restore_pos_timeout)}else{this.restore_pos_timeout=setTimeout(BX.proxy(this.restorePosition,this),this.timeout)}};BX.CMenuOpener.prototype.Show=function(){BX.CMenuOpener.superclass.Show.apply(this,arguments);this.SetDraggable(this.PARTS.INNER.firstChild);this.DIV.style.width="auto";this.DIV.style.height="auto";if(!this.PARAMS.pin){this.DIV.style.left="-1000px";this.DIV.style.top="-1000px";this.Hide()}else{this.bPosAdjusted=true;this.bMoved=true;if(this.PARAMS.top)this.DIV.style.top=this.PARAMS.top+"px";if(this.PARAMS.left)this.DIV.style.left=this.PARAMS.left+"px";this.DIV.style.display=!BX.admin.dynamic_mode||BX.admin.dynamic_mode_show_borders?"block":"none";if(this.DIV.style.display=="block"){setTimeout(BX.delegate((function(){BX.onCustomEvent(this,"onMenuOpenerUnhide")}),this),50)}}};BX.CMenuOpener.prototype.executeDefaultAction=function(){if(this.defaultAction){if(BX.type.isFunction(this.defaultAction))this.defaultAction();else if(BX.type.isString(this.defaultAction))BX.evalGlobal(this.defaultAction)}};BX.CMenuOpener.prototype.__onDynamicModeChange=function(t){this.DIV.style.display=t?"block":"none"};BX.CMenuOpener.prototype.__onPanelCollapse=function(t,e){this.DIV.style.top=parseInt(this.DIV.style.top)+e+"px";if(this.PARAMS.pin){this.__savePosition()}};BX.CMenuOpener.prototype.__onMoveFinished=function(){BX.onCustomEvent(this,"onMenuOpenerMoved");this.bMoved=true;if(this.PARAMS.pin)this.__savePosition()};BX.CMenuOpener.prototype.__savePosition=function(){var t={};t.pin=this.PARAMS.pin;if(!this.PARAMS.pin){t.top=false;t.left=false;t.transform=false}else{t.transform=this.PARAMS.transform;if(this.bMoved){t.left=parseInt(this.DIV.style.left);t.top=parseInt(this.DIV.style.top)}}BX.WindowManager.saveWindowOptions(this.PARAMS.component_id,t)};BX.CMenuOpener.prototype.__pin_btn_clicked=function(){this.Pin()};BX.CMenuOpener.prototype.Pin=function(t){if(null==t)this.PARAMS.pin=!this.PARAMS.pin;else this.PARAMS.pin=!!t;this.PARTS.ICON_PIN.className=this.PARAMS.pin?"bx-context-toolbar-pin-fixed":"bx-context-toolbar-pin";this.__savePosition()};BX.CMenuOpener.prototype.__trf_btn_clicked=function(){this.Transform()};BX.CMenuOpener.prototype.Transform=function(t){var e={};if(null==t)this.PARAMS.transform=!this.PARAMS.transform;else this.PARAMS.transform=!!t;if(this.bMoved){e=BX.pos(this.DIV)}if(this.PARAMS.transform)BX.addClass(this.DIV.firstChild,"bx-context-toolbar-vertical-mode");else BX.removeClass(this.DIV.firstChild,"bx-context-toolbar-vertical-mode");if(!this.bMoved){this.adjustPos()}else{this.DIV.style.left=e.right-this.DIV.offsetWidth-(BX.browser.IsIE()&&!BX.browser.IsDoctype()?2:0)+"px"}this.__savePosition()};BX.CMenuOpener.prototype.adjustToNodeGetPos=function(){var t=BX.pos(this.PARAMS.parent);var e=BX.GetWindowScrollSize();var i=this.DIV.offsetWidth;t.left-=BX.admin.__border_dx;t.top-=BX.admin.__border_dx;if(true||!this.PARAMS.transform){t.top-=45}if(t.left>e.scrollWidth-i){t.left=e.scrollWidth-i}return t};BX.CMenuOpener.prototype.addItem=function(t){if(t.TYPE){this.EXTRA_BUTTONS[t.TYPE]=t;return null}else{var e=new BX.CMenuOpenerItem(t);if(null==this.defaultAction){if(e.item.ONCLICK){this.defaultAction=t.ONCLICK}else if(e.item.MENU){this.defaultAction=BX.delegate((function(){this.Open()}),e.item.OPENER)}this.defaultActionTitle=t.TITLE||t.TEXT;BX.addClass(e.Get(),"bx-content-toolbar-default")}if(e.item.OPENER)this.OPENERS[this.OPENERS.length]=e.item.OPENER;return e.Get()}};BX.CMenuOpener.prototype.attachMenu=function(t){var e=new BX.COpener({DIV:this.OPENER,ATTACH:this.ATTACH,MENU:t,TYPE:"click"});this.OPENERS[this.OPENERS.length]=e;return e};BX.CMenuOpener.prototype.__hide_hint=function(){if(this.HINT)this.HINT.__hide_immediately()};BX.CMenuOpener.prototype.isMenuVisible=function(){for(var t=0,e=this.OPENERS.length;t<e;t++){if(this.OPENERS[t].isMenuVisible())return true}return false};BX.CMenuOpener.prototype.Hide=function(){if(!this.PARAMS.pin){this.DIV.style.display="none";BX.onCustomEvent(this,"onMenuOpenerHide")}};BX.CMenuOpener.prototype.UnHide=function(){this.DIV.style.display="block";if(!this.bPosAdjusted&&!this.PARAMS.pin){this.adjustPos();this.bPosAdjusted=true}if(null==this.originalPos&&!this.bMoved){this.originalPos=BX.pos(this.DIV)}BX.onCustomEvent(this,"onMenuOpenerUnhide")};BX.CMenuOpenerItem=function(t){this.item=t;if(this.item.ACTION&&!this.item.ONCLICK){this.item.ONCLICK=this.item.ACTION}this.DIV=BX.create("SPAN");this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-button-underlay"}}));this.WRAPPER=this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-button-wrapper"},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button",title:t.TITLE},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button-inner"}})]})]}));var e=BX.create("SPAN",{props:{className:"bx-context-toolbar-button-icon"+(this.item.ICON||this.item.ICONCLASS?" "+(this.item.ICON||this.item.ICONCLASS):"")},attrs:!(this.item.ICON||this.item.ICONCLASS)&&(this.item.SRC||this.item.IMAGE)?{style:"background: scroll transparent url("+(this.item.SRC||this.item.IMAGE)+") no-repeat center center !important;"}:{}}),i=BX.create("SPAN",{props:{className:"bx-context-toolbar-button-text"},text:this.item.TEXT});if(this.item.ACTION&&!this.item.ONCLICK){this.item.ONCLICK=this.item.ACTION}this.bHasMenu=!!this.item.MENU;this.bHasAction=!!this.item.ONCLICK;if(this.bHasAction){this.LINK=this.WRAPPER.firstChild.firstChild.appendChild(BX.create("A",{attrs:{href:"javascript: void(0)"},events:{mouseover:this.bHasMenu?BX.proxy(this.__msover_text,this):BX.proxy(this.__msover,this),mouseout:this.bHasMenu?BX.proxy(this.__msout_text,this):BX.proxy(this.__msout,this),mousedown:this.bHasMenu?BX.proxy(this.__msdown_text,this):BX.proxy(this.__msdown,this)},children:[e,i]}));if(this.bHasMenu){this.LINK_MENU=this.WRAPPER.firstChild.firstChild.appendChild(BX.create("A",{props:{className:"bx-context-toolbar-button-arrow"},attrs:{href:"javascript: void(0)"},events:{mouseover:BX.proxy(this.__msover_arrow,this),mouseout:BX.proxy(this.__msout_arrow,this),mousedown:BX.proxy(this.__msdown_arrow,this)},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button-arrow"}})]}))}}else if(this.bHasMenu){this.item.ONCLICK=null;this.LINK=this.LINK_MENU=this.WRAPPER.firstChild.firstChild.appendChild(BX.create("A",{attrs:{href:"javascript: void(0)"},events:{mouseover:BX.proxy(this.__msover,this),mouseout:BX.proxy(this.__msout,this),mousedown:BX.proxy(this.__msdown,this)},children:[e,i]}));this.LINK.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-single-button-arrow"}}))}if(this.bHasMenu){this.item.SUBMENU=new BX.CMenu({ATTACH_MODE:"bottom",ITEMS:this.item["MENU"],parent:this.LINK_MENU,parent_attach:this.WRAPPER.firstChild});this.item.OPENER=new BX.COpener({DIV:this.LINK_MENU,TYPE:"click",MENU:this.item.SUBMENU});BX.addCustomEvent(this.item.OPENER,"onOpenerMenuOpen",BX.proxy(this.__menu_open,this));BX.addCustomEvent(this.item.OPENER,"onOpenerMenuClose",BX.proxy(this.__menu_close,this))}if(this.bHasAction){BX.bind(this.LINK,"click",BX.delegate(this.__click,this))}};BX.CMenuOpenerItem.prototype.Get=function(){return this.DIV};BX.CMenuOpenerItem.prototype.__msover=function(){this.bx_hover=true;if(!this._menu_open)BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-hover")};BX.CMenuOpenerItem.prototype.__msout=function(){this.bx_hover=false;if(!this._menu_open)BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-hover bx-context-toolbar-button-active")};BX.CMenuOpenerItem.prototype.__msover_text=function(){this.bx_hover=true;if(!this._menu_open)BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-text-hover")};BX.CMenuOpenerItem.prototype.__msout_text=function(){this.bx_hover=false;if(!this._menu_open)BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-text-hover bx-context-toolbar-button-text-active")};BX.CMenuOpenerItem.prototype.__msover_arrow=function(){this.bx_hover=true;if(!this._menu_open)BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-arrow-hover")};BX.CMenuOpenerItem.prototype.__msout_arrow=function(){this.bx_hover=false;if(!this._menu_open)BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-arrow-hover bx-context-toolbar-button-arrow-active")};BX.CMenuOpenerItem.prototype.__msdown=function(){this.bx_active=true;if(!this._menu_open)BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-active")};BX.CMenuOpenerItem.prototype.__msdown_text=function(){this.bx_active=true;if(!this._menu_open)BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-text-active")};BX.CMenuOpenerItem.prototype.__msdown_arrow=function(){this.bx_active=true;if(!this._menu_open)BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-arrow-active")};BX.CMenuOpenerItem.prototype.__menu_close=function(){this._menu_open=false;this.bx_active=false;BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-active bx-context-toolbar-button-text-active bx-context-toolbar-button-arrow-active");if(!this.bx_hover){BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-hover bx-context-toolbar-button-text-hover bx-context-toolbar-button-arrow-hover");this.bx_hover=false}};BX.CMenuOpenerItem.prototype.__menu_open=function(){this._menu_open=true};BX.CMenuOpenerItem.prototype.__click=function(){BX.evalGlobal(this.item.ONCLICK)};BX.CPageOpener=function(t){BX.CPageOpener.superclass.constructor.apply(this,arguments);this.timeout=505;window.PAGE_EDIT_CONTROL=this};BX.extend(BX.CPageOpener,BX.CMenuOpener);BX.CPageOpener.prototype.checkPosition=function(){if(this==BX.proxy_context)return;this.correctPosition(BX.proxy_context)};BX.CPageOpener.prototype.correctPosition=function(t){if(this.bPosCorrected)return;var e;if(this.DIV.style.display=="none"){e=this.adjustToNodeGetPos();e.bottom=e.top+30;e.right=e.left+300}else{e=BX.pos(this.DIV)}var i=BX.pos(t.Get());if(this.__check_intersection(e,i)){this.DIV.style.display="none";var s=BX.proxy(this.restorePosition,this);BX.removeCustomEvent(t,"onMenuOpenerHide",s);BX.addCustomEvent(t,"onMenuOpenerHide",s);this.bPosCorrected=true}};BX.CPageOpener.prototype.restorePosition=function(){if(BX.proxy_context&&BX.proxy_context.Get().style.display=="none"){this.bPosCorrected=false;if(this.PARAMS.parent.bx_over||this.PARAMS.pin)this.UnHide();BX.removeCustomEvent("onMenuOpenerHide",BX.proxy(this.restorePosition,this))}};BX.CPageOpener.prototype.UnHide=function(){if(!this.bPosCorrected)BX.CPageOpener.superclass.UnHide.apply(this,arguments)};BX.CPageOpener.prototype.Remove=function(){BX.admin.removeComponentBorder(this.PARAMS.parent);BX.userOptions.save("global","settings","page_edit_control_enable","N");this.DIV.style.display="none"};BX.CHintSimple=function(){BX.CHintSimple.superclass.constructor.apply(this,arguments)};BX.extend(BX.CHintSimple,BX.CHint);BX.CHintSimple.prototype.Init=function(){this.DIV=document.body.appendChild(BX.create("DIV",{props:{className:"bx-tooltip-simple"},style:{display:"none"},children:[this.CONTENT=BX.create("DIV")]}));BX.ZIndexManager.register(this.DIV);if(this.HINT_TITLE)this.CONTENT.appendChild(BX.create("B",{text:this.HINT_TITLE}));if(this.HINT)this.CONTENT_TEXT=this.CONTENT.appendChild(BX.create("DIV")).appendChild(BX.create("SPAN",{html:this.HINT}));if(this.PARAMS.preventHide){BX.bind(this.DIV,"mouseout",BX.proxy(this.Hide,this));BX.bind(this.DIV,"mouseover",BX.proxy(this.Show,this))}this.bInited=true};BX.adminInformer={itemsShow:3,Init:function(t){if(t)BX.adminInformer.itemsShow=t;var e=BX("admin-informer");if(e){document.body.appendChild(e);BX.ZIndexManager.register(e)}BX.addCustomEvent("onTopPanelCollapse",BX.proxy(BX.adminInformer.Close,BX.adminInformer))},Toggle:function(t){var e=BX("admin-informer");if(!e)return false;var i=BX.pos(t);e.style.top=parseInt(i.top)+parseInt(i.height)+7+"px";e.style.left=i.left+"px";if(!BX.hasClass(e,"adm-informer-active"))BX.adminInformer.Show(e);else BX.adminInformer.Hide(e);return false},Close:function(){BX.adminInformer.Hide(BX("admin-informer"))},OnInnerClick:function(t){var e=t.target||t.srcElement;if(e.nodeName.toLowerCase()!="a"||BX.hasClass(e,"adm-informer-footer")){return BX.PreventDefault(t)}return true},ToggleExtra:function(){var t=BX("adm-informer-footer");if(BX.hasClass(t,"adm-informer-footer-collapsed"))this.ShowAll();else this.HideExtra();return false},ShowAll:function(){var t=BX("admin-informer");for(var e=0;e<t.children.length;e++)if(BX.hasClass(t.children[e],"adm-informer-item")&&t.children[e].style.display=="none"){t.children[e].style.display="block"}var i=BX("adm-informer-footer");if(i.textContent!==undefined)i.textContent=BX.message("JSADM_AI_HIDE_EXTRA");else i.innerText=BX.message("JSADM_AI_HIDE_EXTRA");BX.removeClass(i,"adm-informer-footer-collapsed");return false},HideExtra:function(){var t=BX("admin-informer");var e=0;for(var i=BX.adminInformer.itemsShow+1;i<t.children.length;i++){if(BX.hasClass(t.children[i],"adm-informer-item")&&t.children[i].style.display=="block"){t.children[i].style.display="none";e++}}var s=BX("adm-informer-footer");var o=BX.message("JSADM_AI_ALL_NOTIF")+" ("+(BX.adminInformer.itemsShow+parseInt(e))+")";if(s.textContent!==undefined)s.textContent=o;else s.innerText=o;BX.addClass(s,"adm-informer-footer-collapsed");return false},Show:function(t){var e=BX("adm-header-notif-block");if(e)BX.addClass(e,"adm-header-notif-block-active");BX.onCustomEvent(t,"onBeforeAdminInformerShow");setTimeout(BX.proxy((function(){BX.bind(document,"click",BX.proxy(BX.adminInformer.Close,BX.adminInformer))}),BX.adminInformer),0);BX.addClass(t,"adm-informer-active");BX.ZIndexManager.bringToFront(t);setTimeout((function(){BX.addClass(t,"adm-informer-animate")}),0)},Hide:function(t){var e=BX("adm-header-notif-block");if(e)BX.removeClass(e,"adm-header-notif-block-active");BX.unbind(document,"click",BX.proxy(BX.adminInformer.Close,BX.adminInformer));BX.removeClass(t,"adm-informer-animate");if(this.IsAnimationSupported())setTimeout((function(){BX.removeClass(t,"adm-informer-active")}),300);else BX.removeClass(t,"adm-informer-active");BX.onCustomEvent(t,"onAdminInformerHide")},IsAnimationSupported:function(){var t=document.body||document.documentElement;if(typeof t.style.transition=="string")return true;else if(typeof t.style.MozTransition=="string")return true;else if(typeof t.style.OTransition=="string")return true;else if(typeof t.style.WebkitTransition=="string")return true;else if(typeof t.style.msTransition=="string")return true;return false},SetItemHtml:function(t,e){var i=BX("adm-informer-item-html-"+t);if(!i)return false;i.innerHTML=e;return true},SetItemFooter:function(t,e){var i=BX("adm-informer-item-footer-"+t);if(!i)return false;i.innerHTML=e;if(e)i.style.display="block";else i.style.display="none";return true}}})(window);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:53:"/bitrix/js/main/date/main.date.min.js?169091151117992";s:6:"source";s:33:"/bitrix/js/main/date/main.date.js";s:3:"min";s:37:"/bitrix/js/main/date/main.date.min.js";s:3:"map";s:37:"/bitrix/js/main/date/main.date.map.js";}"*/
this.BX=this.BX||{};(function(e,t){"use strict";function _(e){if(!t.Type.isStringFilled(e)){return""}return e.replace("YYYY","Y").replace("MMMM","F").replace("MM","m").replace("M","M").replace("DD","d").replace("G","g").replace(/GG/i,"G").replace("H","h").replace(/HH/i,"H").replace("MI","i").replace("SS","s").replace("TT","A").replace("T","a")}const r=new t.Cache.MemoryCache;function s(e){return r.remember(`main.date.format.${e}`,(()=>{let r=t.Extension.getSettings("main.date").get(`formats.${e}`);if(t.Type.isStringFilled(r)&&(e==="FORMAT_DATE"||e==="FORMAT_DATETIME")){r=_(r)}return r}))}let n=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isAmPmMode",value:function e(t){if(t===true){return this._getMessage("AMPM_MODE")}return this._getMessage("AMPM_MODE")!==false}},{key:"convertToUTC",value:function e(_){if(!t.Type.isDate(_)){return null}return new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes(),_.getSeconds(),_.getMilliseconds()))}},{key:"getNewDate",value:function e(t){return new Date(this.getBrowserTimestamp(t))}},{key:"getBrowserTimestamp",value:function e(t){t=parseInt(t,10);const _=new Date(t*1e3).getTimezoneOffset()*60;return(parseInt(t,10)+parseInt(this._getMessage("SERVER_TZ_OFFSET"))+_)*1e3}},{key:"getServerTimestamp",value:function e(t){t=parseInt(t,10);const _=new Date(t).getTimezoneOffset()*60;return Math.round(t/1e3-(parseInt(this._getMessage("SERVER_TZ_OFFSET"),10)+parseInt(_,10)))}},{key:"formatLastActivityDate",value:function e(t,_,r){const s=this.isAmPmMode(true);const n=s===this.AM_PM_MODE.LOWER?"g:i a":s===this.AM_PM_MODE.UPPER?"g:i A":"H:i";const a=[["tomorrow","#01#"+n],["now","#02#"],["todayFuture","#03#"+n],["yesterday","#04#"+n],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s60","sago"],["i60","iago"],["H5","Hago"],["H24","#03#"+n],["d31","dago"],["m12>1","mago"],["m12>0","dago"],["","#05#"]];let D=this.format(a,t,_,r);let i=null;if((i=/^#(\d+)#(.*)/.exec(D))!=null){switch(i[1]){case"01":D=this._getMessage("FD_LAST_SEEN_TOMORROW").replace("#TIME#",i[2]);break;case"02":D=this._getMessage("FD_LAST_SEEN_NOW");break;case"03":D=this._getMessage("FD_LAST_SEEN_TODAY").replace("#TIME#",i[2]);break;case"04":D=this._getMessage("FD_LAST_SEEN_YESTERDAY").replace("#TIME#",i[2]);break;case"05":D=this._getMessage("FD_LAST_SEEN_MORE_YEAR");break;default:D=i[2];break}}return D}},{key:"_getMessage",value:function e(_){return t.Loc.getMessage(_)}},{key:"parse",value:function e(_,r,s,n){if(t.Type.isStringFilled(_)){if(!s){s=this._getMessage("FORMAT_DATE")}if(!n){n=this._getMessage("FORMAT_DATETIME")}let e="";for(let t=1;t<=12;t++){e=e+"|"+this._getMessage("MON_"+t)}const t=new RegExp("([0-9]+|[a-z]+"+e+")","ig");const a=_.match(t);let D=s.match(/(DD|MI|MMMM|MM|M|YYYY)/gi);const i=[];const o=[];const M={};if(!a){return null}if(a.length>D.length){D=n.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/gi)}for(let e=0,t=a.length;e<t;e++){if(a[e].trim()!==""){i[i.length]=a[e]}}for(let e=0,t=D.length;e<t;e++){if(D[e].trim()!==""){o[o.length]=D[e]}}let O=o.findIndex((e=>e==="MMMM"));if(O>0){i[O]=this.getMonthIndex(i[O]);o[O]="MM"}else{O=o.findIndex((e=>e==="M"));if(O>0){i[O]=this.getMonthIndex(i[O]);o[O]="MM"}}for(let e=0,t=o.length;e<t;e++){const t=o[e].toUpperCase();M[t]=t==="T"||t==="TT"?i[e]:parseInt(i[e],10)}if(M["DD"]>0&&M["MM"]>0&&M["YYYY"]>0){const e=new Date;if(r){e.setUTCDate(1);e.setUTCFullYear(M["YYYY"]);e.setUTCMonth(M["MM"]-1);e.setUTCDate(M["DD"]);e.setUTCHours(0,0,0,0)}else{e.setDate(1);e.setFullYear(M["YYYY"]);e.setMonth(M["MM"]-1);e.setDate(M["DD"]);e.setHours(0,0,0,0)}if((!isNaN(M["HH"])||!isNaN(M["GG"])||!isNaN(M["H"])||!isNaN(M["G"]))&&!isNaN(M["MI"])){if(!isNaN(M["H"])||!isNaN(M["G"])){const e=(M["T"]||M["TT"]||"am").toUpperCase()==="PM",t=parseInt(M["H"]||M["G"]||0,10);if(e){M["HH"]=t+(t===12?0:12)}else{M["HH"]=t<12?t:0}}else{M["HH"]=parseInt(M["HH"]||M["GG"]||0,10)}if(isNaN(M["SS"])){M["SS"]=0}if(r){e.setUTCHours(M["HH"],M["MI"],M["SS"])}else{e.setHours(M["HH"],M["MI"],M["SS"])}}return e}}return null}},{key:"getMonthIndex",value:function e(t){const _=t.toUpperCase();const r=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];const s=["january","february","march","april","may","june","july","august","september","october","november","december"];for(let e=1;e<=12;e++){if(_===this._getMessage("MON_"+e).toUpperCase()||_===this._getMessage("MONTH_"+e).toUpperCase()||_===r[e-1].toUpperCase()||_===s[e-1].toUpperCase()){return e}}return t}},{key:"format",value:function e(_,r,s,n){const a=t.Type.isDate(r)?new Date(r.getTime()):t.Type.isNumber(r)?new Date(r*1e3):new Date;const D=t.Type.isDate(s)?new Date(s.getTime()):t.Type.isNumber(s)?new Date(s*1e3):new Date;const i=!!n;const o=this;if(t.Type.isArray(_)){return l(_,a,D,i)}else{if(!t.Type.isStringFilled(_)){return""}}const M=(_.match(/{{([^{}]*)}}/g)||[]).map((e=>(e.match(/[^{}]+/)||[""])[0]));if(M.length>0){M.forEach(((e,t)=>{_=_.replace("{{"+e+"}}","{{"+t+"}}")}))}const O=/\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;const T={d:()=>u(a).toString().padStart(2,"0"),D:()=>this._getMessage("DOW_"+S(a)),j:()=>u(a),l:()=>this._getMessage("DAY_OF_WEEK_"+S(a)),N:()=>S(a)||7,S:()=>{if(u(a)%10==1&&u(a)!=11){return"st"}else if(u(a)%10==2&&u(a)!=12){return"nd"}else if(u(a)%10==3&&u(a)!=13){return"rd"}else{return"th"}},w:()=>S(a),z:()=>{const e=new Date(c(a),0,1);const t=new Date(c(a),F(a),u(a));return Math.ceil((t-e)/(24*3600*1e3))},W:()=>{const e=new Date(a.getTime());const t=(S(a)+6)%7;A(e,u(e)-t+3);const _=e.getTime();H(e,0,1);if(S(e)!=4){H(e,0,1+(4-S(e)+7)%7)}const r=1+Math.ceil((_-e)/(7*24*3600*1e3));return r.toString().padStart(2,"0")},F:()=>this._getMessage("MONTH_"+(F(a)+1)+"_S"),f:()=>this._getMessage("MONTH_"+(F(a)+1)),m:()=>(F(a)+1).toString().padStart(2,"0"),M:()=>this._getMessage("MON_"+(F(a)+1)),n:()=>F(a)+1,t:()=>{const e=i?new Date(Date.UTC(c(a),F(a)+1,0)):new Date(c(a),F(a)+1,0);return u(e)},L:()=>{const e=c(a);return e%4==0&&e%100!=0||e%400==0?1:0},o:()=>{const e=new Date(a.getTime());A(e,u(e)-(S(a)+6)%7+3);return c(e)},Y:()=>c(a),y:()=>c(a).toString().slice(2),a:()=>E(a)>11?"pm":"am",A:()=>E(a)>11?"PM":"AM",B:()=>{const e=(a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600;return Math.floor(e*1e3/24).toString().padStart(3,"0")},g:()=>E(a)%12||12,G:()=>E(a),h:()=>(E(a)%12||12).toString().padStart(2,"0"),H:()=>E(a).toString().padStart(2,"0"),i:()=>m(a).toString().padStart(2,"0"),s:()=>R(a).toString().padStart(2,"0"),u:()=>(h(a)*1e3).toString().padStart(6,"0"),e:()=>{if(i){return"UTC"}return""},I:()=>{if(i){return 0}const e=new Date(c(a),0,1);const t=Date.UTC(c(a),0,1);const _=new Date(c(a),6,0);const r=Date.UTC(c(a),6,0);return 0+(e-t!==_-r)},O:()=>{if(i){return"+0000"}const e=a.getTimezoneOffset();const t=Math.abs(e);return(e>0?"-":"+")+(Math.floor(t/60)*100+t%60).toString().padStart(4,"0")},P:function(){if(i){return"+00:00"}const e=this.O();return e.substr(0,3)+":"+e.substr(3)},Z:()=>{if(i){return 0}return-a.getTimezoneOffset()*60},c:()=>"Y-m-d\\TH:i:sP".replace(O,d),r:()=>"D, d M Y H:i:s O".replace(O,d),U:()=>Math.floor(a.getTime()/1e3),sago:()=>p(U((D-a)/1e3),{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"}),sdiff:()=>p(U((D-a)/1e3),{0:"FD_SECOND_DIFF_0",1:"FD_SECOND_DIFF_1","10_20":"FD_SECOND_DIFF_10_20",MOD_1:"FD_SECOND_DIFF_MOD_1",MOD_2_4:"FD_SECOND_DIFF_MOD_2_4",MOD_OTHER:"FD_SECOND_DIFF_MOD_OTHER"}),sshort:()=>this._getMessage("FD_SECOND_SHORT").replace(/#VALUE#/g,U((D-a)/1e3)),iago:()=>p(U((D-a)/60/1e3),{0:"FD_MINUTE_AGO_0",1:"FD_MINUTE_AGO_1","10_20":"FD_MINUTE_AGO_10_20",MOD_1:"FD_MINUTE_AGO_MOD_1",MOD_2_4:"FD_MINUTE_AGO_MOD_2_4",MOD_OTHER:"FD_MINUTE_AGO_MOD_OTHER"}),idiff:()=>p(U((D-a)/60/1e3),{0:"FD_MINUTE_DIFF_0",1:"FD_MINUTE_DIFF_1","10_20":"FD_MINUTE_DIFF_10_20",MOD_1:"FD_MINUTE_DIFF_MOD_1",MOD_2_4:"FD_MINUTE_DIFF_MOD_2_4",MOD_OTHER:"FD_MINUTE_DIFF_MOD_OTHER"}),isago:()=>{const e=U((D-a)/60/1e3);let t=p(e,{0:"FD_MINUTE_0",1:"FD_MINUTE_1","10_20":"FD_MINUTE_10_20",MOD_1:"FD_MINUTE_MOD_1",MOD_2_4:"FD_MINUTE_MOD_2_4",MOD_OTHER:"FD_MINUTE_MOD_OTHER"});t+=" ";const _=U((D-a)/1e3)-e*60;t+=p(_,{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"});return t},ishort:()=>this._getMessage("FD_MINUTE_SHORT").replace(/#VALUE#/g,U((D-a)/60/1e3)),Hago:()=>p(U((D-a)/60/60/1e3),{0:"FD_HOUR_AGO_0",1:"FD_HOUR_AGO_1","10_20":"FD_HOUR_AGO_10_20",MOD_1:"FD_HOUR_AGO_MOD_1",MOD_2_4:"FD_HOUR_AGO_MOD_2_4",MOD_OTHER:"FD_HOUR_AGO_MOD_OTHER"}),Hdiff:()=>p(U((D-a)/60/60/1e3),{0:"FD_HOUR_DIFF_0",1:"FD_HOUR_DIFF_1","10_20":"FD_HOUR_DIFF_10_20",MOD_1:"FD_HOUR_DIFF_MOD_1",MOD_2_4:"FD_HOUR_DIFF_MOD_2_4",MOD_OTHER:"FD_HOUR_DIFF_MOD_OTHER"}),Hshort:()=>this._getMessage("FD_HOUR_SHORT").replace(/#VALUE#/g,U((D-a)/60/60/1e3)),yesterday:()=>this._getMessage("FD_YESTERDAY"),today:()=>this._getMessage("FD_TODAY"),tommorow:()=>this._getMessage("FD_TOMORROW"),tomorrow:()=>this._getMessage("FD_TOMORROW"),dago:()=>p(U((D-a)/60/60/24/1e3),{0:"FD_DAY_AGO_0",1:"FD_DAY_AGO_1","10_20":"FD_DAY_AGO_10_20",MOD_1:"FD_DAY_AGO_MOD_1",MOD_2_4:"FD_DAY_AGO_MOD_2_4",MOD_OTHER:"FD_DAY_AGO_MOD_OTHER"}),ddiff:()=>p(U((D-a)/60/60/24/1e3),{0:"FD_DAY_DIFF_0",1:"FD_DAY_DIFF_1","10_20":"FD_DAY_DIFF_10_20",MOD_1:"FD_DAY_DIFF_MOD_1",MOD_2_4:"FD_DAY_DIFF_MOD_2_4",MOD_OTHER:"FD_DAY_DIFF_MOD_OTHER"}),dshort:()=>this._getMessage("FD_DAY_SHORT").replace(/#VALUE#/g,U((D-a)/60/60/24/1e3)),mago:()=>p(U((D-a)/60/60/24/31/1e3),{0:"FD_MONTH_AGO_0",1:"FD_MONTH_AGO_1","10_20":"FD_MONTH_AGO_10_20",MOD_1:"FD_MONTH_AGO_MOD_1",MOD_2_4:"FD_MONTH_AGO_MOD_2_4",MOD_OTHER:"FD_MONTH_AGO_MOD_OTHER"}),mdiff:()=>p(U((D-a)/60/60/24/31/1e3),{0:"FD_MONTH_DIFF_0",1:"FD_MONTH_DIFF_1","10_20":"FD_MONTH_DIFF_10_20",MOD_1:"FD_MONTH_DIFF_MOD_1",MOD_2_4:"FD_MONTH_DIFF_MOD_2_4",MOD_OTHER:"FD_MONTH_DIFF_MOD_OTHER"}),mshort:()=>this._getMessage("FD_MONTH_SHORT").replace(/#VALUE#/g,U((D-a)/60/60/24/31/1e3)),Yago:()=>p(U((D-a)/60/60/24/365/1e3),{0:"FD_YEARS_AGO_0",1:"FD_YEARS_AGO_1","10_20":"FD_YEARS_AGO_10_20",MOD_1:"FD_YEARS_AGO_MOD_1",MOD_2_4:"FD_YEARS_AGO_MOD_2_4",MOD_OTHER:"FD_YEARS_AGO_MOD_OTHER"}),Ydiff:()=>p(U((D-a)/60/60/24/365/1e3),{0:"FD_YEARS_DIFF_0",1:"FD_YEARS_DIFF_1","10_20":"FD_YEARS_DIFF_10_20",MOD_1:"FD_YEARS_DIFF_MOD_1",MOD_2_4:"FD_YEARS_DIFF_MOD_2_4",MOD_OTHER:"FD_YEARS_DIFF_MOD_OTHER"}),Yshort:()=>p(U((D-a)/60/60/24/365/1e3),{0:"FD_YEARS_SHORT_0",1:"FD_YEARS_SHORT_1","10_20":"FD_YEARS_SHORT_10_20",MOD_1:"FD_YEARS_SHORT_MOD_1",MOD_2_4:"FD_YEARS_SHORT_MOD_2_4",MOD_OTHER:"FD_YEARS_SHORT_MOD_OTHER"}),x:()=>{const e=this.isAmPmMode(true);const t=e===this.AM_PM_MODE.LOWER?"g:i a":e===this.AM_PM_MODE.UPPER?"g:i A":"H:i";return this.format([["tomorrow","tomorrow, "+t],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s","sago"],["i","iago"],["today","today, "+t],["yesterday","yesterday, "+t],["",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")]],a,D,i)},X:()=>{const e=this.isAmPmMode(true);const t=e===this.AM_PM_MODE.LOWER?"g:i a":e===this.AM_PM_MODE.UPPER?"g:i A":"H:i";const _=this.format([["tomorrow","tomorrow"],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATE"))],["today","today"],["yesterday","yesterday"],["",this.convertBitrixFormat(this._getMessage("FORMAT_DATE"))]],a,D,i);const r=this.format([["tomorrow",t],["today",t],["yesterday",t],["",""]],a,D,i);if(r.length>0){return this._getMessage("FD_DAY_AT_TIME").replace(/#DAY#/g,_).replace(/#TIME#/g,r)}else{return _}},Q:()=>{const e=U((D-a)/60/60/24/1e3);if(e==0){return this._getMessage("FD_DAY_DIFF_1").replace(/#VALUE#/g,1)}else{return this.format([["d","ddiff"],["m","mdiff"],["","Ydiff"]],a,D)}}};let g=false;if(_[0]&&_[0]=="^"){g=true;_=_.substr(1)}let f=_.replace(O,d);if(g){f=f.replace(/\s*00:00:00\s*/g,"").replace(/(\d\d:\d\d)(:00)/g,"$1").replace(/(\s*00:00\s*)(?!:)/g,"")}if(M.length>0){M.forEach((function(e,t){f=f.replace("{{"+t+"}}",e)}))}return f;function l(e,t,_,r){const s=U((_-t)/1e3);for(let n=0;n<e.length;n++){const a=e[n][0];const D=e[n][1];let i=null;if(a=="s"){if(s<60){return o.format(D,t,_,r)}}else if((i=/^s(\d+)\>?(\d+)?/.exec(a))!=null){if(i[1]&&i[2]){if(s<i[1]&&s>i[2]){return o.format(D,t,_,r)}}else if(s<i[1]){return o.format(D,t,_,r)}}else if(a=="i"){if(s<60*60){return o.format(D,t,_,r)}}else if((i=/^i(\d+)\>?(\d+)?/.exec(a))!=null){if(i[1]&&i[2]){if(s<i[1]*60&&s>i[2]*60){return o.format(D,t,_,r)}}else if(s<i[1]*60){return o.format(D,t,_,r)}}else if(a=="H"){if(s<24*60*60){return o.format(D,t,_,r)}}else if((i=/^H(\d+)\>?(\d+)?/.exec(a))!=null){if(i[1]&&i[2]){if(s<i[1]*60*60&&s>i[2]*60*60){return o.format(D,t,_,r)}}else if(s<i[1]*60*60){return o.format(D,t,_,r)}}else if(a=="d"){if(s<31*24*60*60){return o.format(D,t,_,r)}}else if((i=/^d(\d+)\>?(\d+)?/.exec(a))!=null){if(i[1]&&i[2]){if(s<i[1]*24*60*60&&s>i[2]*24*60*60){return o.format(D,t,_,r)}}else if(s<i[1]*24*60*60){return o.format(D,t,_,r)}}else if(a=="m"){if(s<365*24*60*60){return o.format(D,t,_,r)}}else if((i=/^m(\d+)\>?(\d+)?/.exec(a))!=null){if(i[1]&&i[2]){if(s<i[1]*31*24*60*60&&s>i[2]*31*24*60*60){return o.format(D,t,_,r)}}else if(s<i[1]*31*24*60*60){return o.format(D,t,_,r)}}else if(a=="now"){if(t.getTime()==_.getTime()){return o.format(D,t,_,r)}}else if(a=="today"){const e=c(_);const s=F(_);const n=u(_);const a=r?new Date(Date.UTC(e,s,n,0,0,0,0)):new Date(e,s,n,0,0,0,0);const i=r?new Date(Date.UTC(e,s,n+1,0,0,0,0)):new Date(e,s,n+1,0,0,0,0);if(t>=a&&t<i){return o.format(D,t,_,r)}}else if(a=="todayFuture"){const e=c(_);const s=F(_);const n=u(_);const a=_.getTime();const i=r?new Date(Date.UTC(e,s,n+1,0,0,0,0)):new Date(e,s,n+1,0,0,0,0);if(t>=a&&t<i){return o.format(D,t,_,r)}}else if(a=="yesterday"){const e=c(_);const s=F(_);const n=u(_);const a=r?new Date(Date.UTC(e,s,n-1,0,0,0,0)):new Date(e,s,n-1,0,0,0,0);const i=r?new Date(Date.UTC(e,s,n,0,0,0,0)):new Date(e,s,n,0,0,0,0);if(t>=a&&t<i){return o.format(D,t,_,r)}}else if(a=="tommorow"||a=="tomorrow"){const e=c(_);const s=F(_);const n=u(_);const a=r?new Date(Date.UTC(e,s,n+1,0,0,0,0)):new Date(e,s,n+1,0,0,0,0);const i=r?new Date(Date.UTC(e,s,n+2,0,0,0,0)):new Date(e,s,n+2,0,0,0,0);if(t>=a&&t<i){return o.format(D,t,_,r)}}else if(a=="-"){if(s<0){return o.format(D,t,_,r)}}}return e.length>0?o.format(e[e.length-1][1],t,_,r):""}function c(e){return i?e.getUTCFullYear():e.getFullYear()}function u(e){return i?e.getUTCDate():e.getDate()}function F(e){return i?e.getUTCMonth():e.getMonth()}function E(e){return i?e.getUTCHours():e.getHours()}function m(e){return i?e.getUTCMinutes():e.getMinutes()}function R(e){return i?e.getUTCSeconds():e.getSeconds()}function h(e){return i?e.getUTCMilliseconds():e.getMilliseconds()}function S(e){return i?e.getUTCDay():e.getDay()}function A(e,t){return i?e.setUTCDate(t):e.setDate(t)}function H(e,t,_){return i?e.setUTCMonth(t,_):e.setMonth(t,_)}function p(e,t){const _=e<100?Math.abs(e):Math.abs(e%100);const r=_%10;let s="";if(_==0){s=o._getMessage(t["0"])}else if(_==1){s=o._getMessage(t["1"])}else if(_>=10&&_<=20){s=o._getMessage(t["10_20"])}else if(r==1){s=o._getMessage(t["MOD_1"])}else if(2<=r&&r<=4){s=o._getMessage(t["MOD_2_4"])}else{s=o._getMessage(t["MOD_OTHER"])}return s.replace(/#VALUE#/g,e)}function d(e,t){if(T[e]){return T[e]()}else{return t}}function U(e){return e>=0?Math.floor(e):Math.ceil(e)}}}]);return e}();babelHelpers.defineProperty(n,"AM_PM_MODE",{UPPER:1,LOWER:2,NONE:false});babelHelpers.defineProperty(n,"convertBitrixFormat",_);babelHelpers.defineProperty(n,"getFormat",s);const a=new t.Cache.MemoryCache;const D={get SERVER_TO_UTC(){return a.remember("SERVER_TO_UTC",(()=>t.Text.toInteger(t.Loc.getMessage("SERVER_TZ_OFFSET"))))},get USER_TO_SERVER(){return a.remember("USER_TO_SERVER",(()=>t.Text.toInteger(t.Loc.getMessage("USER_TZ_OFFSET"))))},get BROWSER_TO_UTC(){return a.remember("BROWSER_TO_UTC",(()=>t.Text.toInteger((new Date).getTimezoneOffset()*60)))}};Object.freeze(D);function i(e,t,_){o(e,t);return _}function o(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}let M=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getTimestamp",value:function e(){return Math.round(Date.now()/1e3)}},{key:"getDate",value:function e(){return new Date(this.getTimestamp()*1e3)}},{key:"toUser",value:function e(_){return t.Text.toInteger(_)+D.USER_TO_SERVER}},{key:"toServer",value:function t(_){return i(this,e,O).call(this,_)+D.SERVER_TO_UTC}}]);return e}();function O(e){return t.Text.toInteger(e)-D.BROWSER_TO_UTC}let T=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getTimestamp",value:function e(){return M.toUser(M.getTimestamp())}},{key:"getDate",value:function e(){return new Date(this.getTimestamp()*1e3)}},{key:"toBrowser",value:function e(_){return t.Text.toInteger(_)+D.BROWSER_TO_UTC-D.SERVER_TO_UTC-D.USER_TO_SERVER}},{key:"toServer",value:function e(_){return t.Text.toInteger(_)-D.USER_TO_SERVER}}]);return e}();let g=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getTimestamp",value:function e(){return M.toServer(M.getTimestamp())}},{key:"getDate",value:function e(){return new Date(this.getTimestamp()*1e3)}},{key:"toUser",value:function e(_){return t.Text.toInteger(_)+D.USER_TO_SERVER}},{key:"toBrowser",value:function e(_){return t.Text.toInteger(_)+D.BROWSER_TO_UTC-D.SERVER_TO_UTC}}]);return e}();const f=n;const l=Object.freeze({Offset:D,BrowserTime:M,UserTime:T,ServerTime:g});e.DateTimeFormat=n;e.Date=f;e.Timezone=l})(this.BX.Main=this.BX.Main||{},BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:49:"/bitrix/js/main/core/core_date.js?164661037836080";s:6:"source";s:33:"/bitrix/js/main/core/core_date.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function(){

if (BX.date)
	return;

BX.date = BX.Main.Date;

/************************************** calendar class **********************************/

var obCalendarSingleton = null;

/*
params: {
	node: bind element || document.body

	value - start value in site format (using 'field' param if 'value' does not exist)
	callback - date check handler. can return false to prevent calendar closing.
	callback_after - another handler, called after date picking

	field - field to read/write data

	bTime = true - whether to enable time control
	bHideTime = false - whether to hide time control by default

	currentTime - current UTC time()

}
*/


BX.calendar = function(params)
{
	return BX.calendar.get().Show(params);
};

BX.calendar.get = function()
{
	if (!obCalendarSingleton)
		obCalendarSingleton = new BX.JCCalendar();

	return obCalendarSingleton;
};

// simple func for compatibility with the oldies
BX.calendar.InsertDaysBack = function(input, days)
{
	if (days != '')
	{
		var d = new Date();
		if(days > 0)
		{
			d.setTime(d.valueOf() - days*86400000);
		}

		input.value = BX.date.format(BX.date.convertBitrixFormat(BX.message('FORMAT_DATE')), d, null);
	}
	else
	{
		input.value = '';
	}
};

BX.calendar.ValueToString = function(value, bTime, bUTC)
{
	return BX.date.format(
		BX.date.convertBitrixFormat(BX.message(bTime ? 'FORMAT_DATETIME' : 'FORMAT_DATE')),
		value,
		null,
		!!bUTC
	);
};

BX.calendar.ValueToStringFormat = function(value, bitrixFormat, bUTC)
{
	return BX.date.format(
		BX.date.convertBitrixFormat(bitrixFormat),
		value,
		null,
		!!bUTC
	);
};


BX.CalendarPeriod =
{
	Init: function(inputFrom, inputTo, selPeriod)
	{
		if((inputFrom.value != "" || inputTo.value != "") && selPeriod.value == "")
			selPeriod.value = "interval";

		selPeriod.onchange();
	},

	ChangeDirectOpts: function(peroidValue, selPParent) // "week" || "others"
	{
		var selDirect = BX.findChild(selPParent, {'className':'adm-select adm-calendar-direction'}, true);

		if(peroidValue == "week")
		{
			selDirect.options[0].text = BX.message('JSADM_CALEND_PREV_WEEK');
			selDirect.options[1].text = BX.message('JSADM_CALEND_CURR_WEEK');
			selDirect.options[2].text = BX.message('JSADM_CALEND_NEXT_WEEK');
		}
		else
		{
			selDirect.options[0].text = BX.message('JSADM_CALEND_PREV');
			selDirect.options[1].text = BX.message('JSADM_CALEND_CURR');
			selDirect.options[2].text = BX.message('JSADM_CALEND_NEXT');
		}
	},

	SaveAndClearInput: function(oInput)
	{
		if(!window.SavedPeriodValues)
			window.SavedPeriodValues = {};

		window.SavedPeriodValues[oInput.id] = oInput.value;
		oInput.value="";
	},

	RestoreInput: function(oInput)
	{
		if(!window.SavedPeriodValues || !window.SavedPeriodValues[oInput.id])
			return;

		oInput.value = window.SavedPeriodValues[oInput.id];
		delete(window.SavedPeriodValues[oInput.id]);
	},

	OnChangeP: function(sel)
	{
		var selPParent = sel.parentNode.parentNode;
		var bShowFrom, bShowTo, bShowDirect, bShowSeparate;
		bShowFrom = bShowTo = bShowDirect = bShowSeparate = false;

		var inputFromWrap = BX.findChild(selPParent, {'className':'adm-input-wrap adm-calendar-inp adm-calendar-first'});
		var inputToWrap = BX.findChild(selPParent, {'className':'adm-input-wrap adm-calendar-second'});
		var selDirectWrap = BX.findChild(selPParent, {'className':'adm-select-wrap adm-calendar-direction'});
		var separator = BX.findChild(selPParent, {'className':'adm-calendar-separate'});
		var inputFrom = BX.findChild(selPParent, {'className':'adm-input adm-calendar-from'},true);
		var inputTo = BX.findChild(selPParent, {'className':'adm-input adm-calendar-to'},true);

		// define who must be shown
		switch (sel.value)
		{
			case "day":
			case "week":
			case "month":
			case "quarter":
			case "year":
				bShowDirect=true;
				BX.CalendarPeriod.OnChangeD(selDirectWrap.children[0]);
				break;

			case "before":
				bShowTo = true;
				break;

			case "after":
				bShowFrom = true;
				break;

			case "exact":
				bShowFrom= true;
				break;

			case "interval":
				bShowFrom = bShowTo = bShowSeparate = true;
				BX.CalendarPeriod.RestoreInput(inputFrom);
				BX.CalendarPeriod.RestoreInput(inputTo);

				break;

			case "":
				BX.CalendarPeriod.SaveAndClearInput(inputFrom);
				BX.CalendarPeriod.SaveAndClearInput(inputTo);
				break;

			default:
				break;

		}

		BX.CalendarPeriod.ChangeDirectOpts(sel.value, selPParent);

		inputFromWrap.style.display = (bShowFrom? 'inline-block':'none');
		inputToWrap.style.display = (bShowTo? 'inline-block':'none');
		selDirectWrap.style.display = (bShowDirect? 'inline-block':'none');
		separator.style.display = (bShowSeparate? 'inline-block':'none');
	},


	OnChangeD: function(sel)
	{
		var selPParent = sel.parentNode.parentNode;
		var inputFrom = BX.findChild(selPParent, {'className':'adm-input adm-calendar-from'},true);
		var inputTo = BX.findChild(selPParent, {'className':'adm-input adm-calendar-to'},true);
		var selPeriod = BX.findChild(selPParent, {'className':'adm-select adm-calendar-period'},true);

		var offset=0;

		switch (sel.value)
		{
			case "previous":
				offset = -1;
				break;

			case "next":
				offset = 1;
				break;

			case "current":
			default:
				break;

		}

		var from = false;
		var to = false;

		var today = new Date();
		var year = today.getFullYear();
		var month = today.getMonth();
		var day = today.getDate();
		var dayW = today.getDay();

		if (dayW == 0)
				dayW = 7;

		switch (selPeriod.value)
		{
			case "day":
				from = new Date(year, month, day+offset, 0, 0, 0);
				to = new Date(year, month, day+offset, 23, 59, 59);
				break;

			case "week":
				from = new Date(year, month, day-dayW+1+offset*7, 0, 0, 0);
				to = new Date(year, month, day+(7-dayW)+offset*7, 23, 59, 59);
				break;

			case "month":
				from = new Date(year, month+offset, 1, 0, 0, 0);
				to = new Date(year, month+1+offset, 0, 23, 59, 59);
				break;

			case "quarter":
				var quarterNum = Math.floor((month/3))+offset;
				from = new Date(year, 3*(quarterNum), 1, 0, 0, 0);
				to = new Date(year, 3*(quarterNum+1), 0, 23, 59, 59);
				break;

			case "year":
				from = new Date(year+offset, 0, 1, 0, 0, 0);
				to = new Date(year+1+offset, 0, 0, 23, 59, 59);
				break;

			default:
				break;
		}

		var format = window[inputFrom.name+"_bTime"] ? BX.message('FORMAT_DATETIME') : BX.message('FORMAT_DATE');

		if(from)
		{
			inputFrom.value = BX.formatDate(from, format);
			BX.addClass(inputFrom,"adm-calendar-inp-setted");
		}

		if(to)
		{
			inputTo.value = BX.formatDate(to, format);
			BX.addClass(inputTo,"adm-calendar-inp-setted");
		}
	}
};


BX.JCCalendar = function()
{
	this.params = {};

	this.bAmPm = BX.isAmPmMode();

	this.popup = null;
	this.popup_month = null;
	this.popup_year = null;
	this.month_popup_classname = '';
	this.year_popup_classname = '';
	this.value = null;
	this._layers = {};
	this._current_layer = null;

	this.DIV = null;
	this.PARTS = {};

	this.weekStart = 0;
	this.numRows = 6;

	this._create = function(params)
	{
		this.popup = new BX.PopupWindow('calendar_popup_' + Math.random(), params.node, {
			closeByEsc: true,
			autoHide: false,
			content: this._get_content(),
			bindOptions: {forceBindPosition: true}
		});

		BX.bind(this.popup.popupContainer, 'click', function(event) {
			event.stopPropagation();
		});
	};

	this._auto_hide_disable = function()
	{
		BX.unbind(document, 'click', BX.proxy(this._auto_hide, this));
	};

	this._auto_hide_enable = function()
	{
		BX.bind(document, 'click', BX.proxy(this._auto_hide, this));
	};

	this._auto_hide = function(e)
	{
		this._auto_hide_disable();
		this.popup.close();
	};

	this._get_content = function()
	{
		var _layer_onclick = BX.delegate(function(e) {
			e = e||window.event;
			this.SetDate(
				new Date(parseInt(BX.proxy_context.getAttribute('data-date'))),
				(e.type === 'dblclick' || (this.params.bCompatibility && !this.params.bTimeVisibility))
			)
		}, this);

		this.DIV = BX.create('DIV', {
			props: {className: 'bx-calendar'},
			children: [
				BX.create('DIV', {
					props: {
						className: 'bx-calendar-header'
					},
					children: [
						BX.create('A', {
							attrs: {href: 'javascript:void(0)'},
							props: {className: 'bx-calendar-left-arrow'},
							events: {click: BX.proxy(this._prev, this)}
						}),

						BX.create('SPAN', {
							props: {className: 'bx-calendar-header-content'},
							children: [
								(this.PARTS.MONTH = BX.create('A', {
									attrs: {href: 'javascript:void(0)'},
									props: {className: 'bx-calendar-top-month'},
									events: {click: BX.proxy(this._menu_month, this)}
								})),

								(this.PARTS.YEAR = BX.create('A', {
									attrs: {href: 'javascript:void(0)'},
									props: {className: 'bx-calendar-top-year'},
									events: {click: BX.proxy(this._menu_year, this)}
								}))
							]
						}),

						BX.create('A', {
							attrs: {href: 'javascript:void(0)'},
							props: {className: 'bx-calendar-right-arrow'},
							events: {click: BX.proxy(this._next, this)}
						})
					]
				}),

				(this.PARTS.WEEK = BX.create('DIV', {
					props: {
						className: 'bx-calendar-name-day-wrap'
					}
				})),

				(this.PARTS.LAYERS = BX.create('DIV', {
					props: {
						className: 'bx-calendar-cell-block'
					},
					events: {
						click: BX.delegateEvent({className: 'bx-calendar-cell'}, _layer_onclick),
						dblclick: BX.delegateEvent({className: 'bx-calendar-cell'}, _layer_onclick)
					}
				})),

				(this.PARTS.TIME = BX.create('DIV', {
					props: {
						className: 'bx-calendar-set-time-wrap'
					},
					events: {
						click: BX.delegateEvent(
							{attr: 'data-action'},
							BX.delegate(this._time_actions, this)
						)
					},
					html: '<a href="javascript:void(0)" data-action="time_show" class="bx-calendar-set-time"><i></i>'+BX.message('CAL_TIME_SET')+'</a><div class="bx-calendar-form-block"><span class="bx-calendar-form-text">'+BX.message('CAL_TIME')+'</span><span class="bx-calendar-form"><input type="text" class="bx-calendar-form-input" maxwidth="2" onkeyup="BX.calendar.get()._check_time()" /><span class="bx-calendar-form-separator"></span><input type="text" class="bx-calendar-form-input" maxwidth="2" onkeyup="BX.calendar.get()._check_time()" />'+(this.bAmPm?'<span class="bx-calendar-AM-PM-block"><span class="bx-calendar-AM-PM-text" data-action="time_ampm"></span><span class="bx-calendar-form-arrow-r"><a href="javascript:void(0)" class="bx-calendar-form-arrow-top" data-action="time_ampm_up"><i></i></a><a href="javascript:void(0)" class="bx-calendar-form-arrow-bottom" data-action="time_ampm_down"><i></i></a></span></span>':'')+'</span><a href="javascript:void(0)" data-action="time_hide" class="bx-calendar-form-close"><i></i></a></div>'
				})),

				(this.PARTS.BUTTONS = BX.create('DIV', {
					props: {className: 'bx-calendar-button-block'},
					events: {
						click: BX.delegateEvent(
							{attr: 'data-action'},
							BX.delegate(this._button_actions, this)
						)
					},
					html: '<a href="javascript:void(0)" class="bx-calendar-button bx-calendar-button-select" data-action="submit"><span class="bx-calendar-button-left"></span><span class="bx-calendar-button-text">'+BX.message('CAL_BUTTON')+'</span><span class="bx-calendar-button-right"></span></a><a href="javascript:void(0)" class="bx-calendar-button bx-calendar-button-cancel" data-action="cancel"><span class="bx-calendar-button-left"></span><span class="bx-calendar-button-text">'+BX.message('JS_CORE_WINDOW_CLOSE')+'</span><span class="bx-calendar-button-right"></span></a>'
				}))
			]
		});

		this.PARTS.TIME_INPUT_H = BX.findChild(this.PARTS.TIME, {tag: 'INPUT'}, true);
		this.PARTS.TIME_INPUT_M = this.PARTS.TIME_INPUT_H.nextSibling.nextSibling;

		if (this.bAmPm)
			this.PARTS.TIME_AMPM = this.PARTS.TIME_INPUT_M.nextSibling.firstChild;

		var spinner = (new BX.JCSpinner({
			input: this.PARTS.TIME_INPUT_H,
			callback_change: BX.proxy(this._check_time, this),
			bSaveValue: false
		})).Show();
		spinner.className = 'bx-calendar-form-arrow-l';
		this.PARTS.TIME_INPUT_H.parentNode.insertBefore(spinner, this.PARTS.TIME_INPUT_H);

		spinner = (new BX.JCSpinner({
			input: this.PARTS.TIME_INPUT_M,
			callback_change: BX.proxy(this._check_time, this),
			bSaveValue: true
		})).Show();
		spinner.className = 'bx-calendar-form-arrow-r';
		if (!this.PARTS.TIME_INPUT_M.nextSibling)
			this.PARTS.TIME_INPUT_M.parentNode.appendChild(spinner);
		else
			this.PARTS.TIME_INPUT_M.parentNode.insertBefore(spinner, this.PARTS.TIME_INPUT_M.nextSibling);

		for (var i = 0; i < 7; i++)
		{
			this.PARTS.WEEK.appendChild(BX.create('SPAN', {
				props: {
					className: 'bx-calendar-name-day'
				},
				text: BX.message('DOW_' + ((i + this.weekStart) % 7))
			}));
		}

		return this.DIV;
	};

	this._time_actions = function()
	{
		switch (BX.proxy_context.getAttribute('data-action'))
		{
			case 'time_show':
				BX.addClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
				if (this.params.bCompatibility)
				{
					BX.removeClass(this.PARTS.BUTTONS, 'bx-calendar-buttons-disabled');
				}
				this.popup.adjustPosition();
			break;
			case 'time_hide':
				BX.removeClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
				if (this.params.bCompatibility)
				{
					this._saveChoice('hide');
					BX.addClass(this.PARTS.BUTTONS, 'bx-calendar-buttons-disabled');
				}
				this.popup.adjustPosition();
			break;
			case 'time_ampm':
				this.PARTS.TIME_AMPM.innerHTML = this.PARTS.TIME_AMPM.innerHTML == 'AM' ? 'PM' : 'AM';
			break;
			case 'time_ampm_up':
				this._check_time({bSaveValue: false}, null, 12);
				return;
			break;
			case 'time_ampm_down':
				this._check_time({bSaveValue: false}, null, -12);
				return;
			break;
		}

		this._check_time();
	};

	this._button_actions = function()
	{
		switch (BX.proxy_context.getAttribute('data-action'))
		{
			case 'submit':
				if (this.params.bCompatibility)
				{
					this._saveChoice('show');
				}
				this.SaveValue();
			break;
			case 'cancel':
				this.Close();
			break;
		}
	};

	this._saveChoice = function(state)
	{
		if (this.params.bCategoryTimeVisibilityOption)
		{
			BX.userOptions.save(
				this.params.bCategoryTimeVisibilityOption,
				this.params.bNameTimeVisibilityOption,
				'visibility',
				(state === 'show' ? 'Y' : 'N')
			);
		}

		this._bTimeVisibility = (state === 'show');
		this.params.bTimeVisibility = this._bTimeVisibility;
	};

	this._check_time = function(params, value, direction)
	{
		var h = parseInt(this.PARTS.TIME_INPUT_H.value.substring(0,5),10)||0,
			m = parseInt(this.PARTS.TIME_INPUT_M.value.substring(0,5),10)||0,
			bChanged = false;

		if (!!params && !params.bSaveValue)
		{
			this.value.setUTCHours(this.value.getUTCHours() + direction);
		}
		else if (!isNaN(h))
		{
			if (this.bAmPm)
			{
				if (h != 12 && this.PARTS.TIME_AMPM.innerHTML == 'PM')
				{
					h += 12;
				}
			}

			bChanged = true;
			this.value.setUTCHours(h % 24);
		}

		if (!isNaN(m))
		{
			bChanged = true;
			this.value.setUTCMinutes(m % 60);
		}

		if (bChanged)
		{
			this.SetValue(this.value);
		}
	};

	this._set_layer = function()
	{
		var layerId = parseInt(this.value.getUTCFullYear() + '' + BX.util.str_pad_left(this.value.getUTCMonth()+'', 2, "0"));

		if (!this._layers[layerId])
		{
			this._layers[layerId] = this._create_layer();
			this._layers[layerId].BXLAYERID = layerId;
		}

		if (this._current_layer)
		{
			var v = new Date(this.value.valueOf());
			v.setUTCHours(0); v.setUTCMinutes(0);

			var cur_value = BX.findChild(this._layers[layerId], {
					tag: 'A',
					className: 'bx-calendar-active'
				}, true),
				new_value = BX.findChild(this._layers[layerId], {
					tag: 'A',
					attr: {
						'data-date' : v.valueOf() + ''
					}
				}, true);

			if (cur_value)
			{
				BX.removeClass(cur_value, 'bx-calendar-active');
			}

			if (new_value)
			{
				BX.addClass(new_value, 'bx-calendar-active');
			}

			this._replace_layer(this._current_layer, this._layers[layerId]);
		}
		else
		{
			this.PARTS.LAYERS.appendChild(this._layers[layerId]);
		}

		this._current_layer = this._layers[layerId];
	};

	this._replace_layer = function(old_layer, new_layer)
	{
		if (old_layer != new_layer)
		{
			if (!BX.browser.IsIE() || BX.browser.IsDoctype())
			{
				var dir = old_layer.BXLAYERID > new_layer.BXLAYERID ? 1 : -1;

				var old_top = 0;
				var new_top = -dir * old_layer.offsetHeight;

				old_layer.style.position = 'relative';
				old_layer.style.top = "0px";
				old_layer.style.zIndex = 5;

				new_layer.style.position = 'absolute';
				new_layer.style.top = new_top + 'px';
				new_layer.style.zIndex = 6;

				this.PARTS.LAYERS.appendChild(new_layer);

				var delta = 15;

				var f;
				(f = function() {
					new_top += dir * delta;
					old_top += dir * delta;

					if (dir * new_top < 0)
					{
						old_layer.style.top = old_top + 'px';
						new_layer.style.top = new_top + 'px';
						setTimeout(f, 10);
					}
					else
					{
						old_layer.parentNode.removeChild(old_layer);

						new_layer.style.top = "0px";
						new_layer.style.position = 'static';
						new_layer.style.zIndex = 0;
					}
				})();
			}
			else
			{
				this.PARTS.LAYERS.replaceChild(new_layer, old_layer);
			}
		}
	};

	this._create_layer = function()
	{
		var l = BX.create('DIV', {
			props: {
				className: 'bx-calendar-layer'
			}
		});

		var month_start = new Date(this.value);
		month_start.setUTCHours(0);
		month_start.setUTCMinutes(0);

		month_start.setUTCDate(1);

		if (month_start.getUTCDay() != this.weekStart)
		{
			var d = month_start.getUTCDay() - this.weekStart;
			d += d < 0 ? 7 : 0;
			month_start.setUTCDate(month_start.getUTCDate()-d);
		}

		var cur_month = this.value.getUTCMonth(),
			cur_day = this.value.getUTCDate(),
			s = '';
		for (var i = 0; i < this.numRows; i++)
		{
			s += '<div class="bx-calendar-range'
				+(i == this.numRows-1 ? ' bx-calendar-range-noline' : '')
				+'">';

			for (var j = 0; j < 7; j++)
			{
				d = month_start.getUTCDate();
				var wd = month_start.getUTCDay();
				var className = 'bx-calendar-cell';

				if (cur_month != month_start.getUTCMonth())
					className += ' bx-calendar-date-hidden';
				else if (cur_day == d)
					className += ' bx-calendar-active';


				if (wd == 0 || wd == 6)
					className += ' bx-calendar-weekend';

				s += '<a href="javascript:void(0)" class="'+className+'" data-date="' + month_start.valueOf() + '">' + d + '</a>';

				month_start.setUTCDate(month_start.getUTCDate()+1);
			}
			s += '</div>';
		}

		l.innerHTML = s;

		return l;
	};

	this._prev = function()
	{
		this.SetMonth(this.value.getUTCMonth()-1);
	};

	this._next = function()
	{
		this.SetMonth(this.value.getUTCMonth()+1);
	};

	this._menu_month_content = function()
	{
		var months = '', cur_month = this.value.getMonth(), i;
		for (i = 0; i < 12; i++)
		{
			months += '<span class="bx-calendar-month'+(i == cur_month ? ' bx-calendar-month-active' : '')+'" data-bx-month="' + i + '">' + BX.message('MONTH_' + (i + 1)) + '</span>';
		}

		return '<div class="bx-calendar-month-popup"><div class="bx-calendar-month-title" data-bx-month="' + this.value.getUTCMonth() + '">' + BX.message('MONTH_' + (this.value.getUTCMonth() + 1)) + '</div><div class="bx-calendar-month-content">' + months + '</div></div>';
	};

	this._menu_month = function()
	{
		if (!this.popup_month)
		{
			this.popup_month = new BX.PopupWindow(
				'calendar_popup_month_' + Math.random(), this.PARTS.MONTH,
				{
					content: this._menu_month_content(),
					closeByEsc: true,
					autoHide: true,
					offsetTop: -29,
					offsetLeft: -1,
					className: this.month_popup_classname,
					events: {
						onPopupShow: BX.delegate(function() {
							if (this.popup_year)
							{
								this.popup_year.close();
							}
						}, this)
					}
				}
			);

			BX.bind(this.popup_month.popupContainer, 'click', BX.proxy(this.month_popup_click, this));
			this.popup_month.BXMONTH = this.value.getUTCMonth();
		}
		else if (this.popup_month.BXMONTH != this.value.getUTCMonth())
		{
			this.popup_month.setContent(this._menu_month_content());
			this.popup_month.BXMONTH = this.value.getUTCMonth();
		}

		this.popup_month.show();
	};

	this.month_popup_click = function(e)
	{
		var target = e.target || e.srcElement;
		if (target && target.getAttribute && target.getAttribute('data-bx-month'))
		{
			this.SetMonth(parseInt(target.getAttribute('data-bx-month')));
			this.popup_month.close();
		}
	};

	this._menu_year_content = function()
	{
		var s = '<div class="bx-calendar-year-popup"><div class="bx-calendar-year-title" data-bx-year="' + this.value.getUTCFullYear() + '">' + this.value.getUTCFullYear() + '</div><div class="bx-calendar-year-content" id="bx-calendar-year-content">';

		for (var i=-3; i <= 3; i++)
		{
			s += '<span class="bx-calendar-year-number' + (i == 0?' bx-calendar-year-active' : '') + '" data-bx-year="' + (this.value.getUTCFullYear() - i) + '">' + (this.value.getUTCFullYear() - i)+'</span>';
		}

		s += '</div><input data-bx-year-input="Y" type="text" class="bx-calendar-year-input" maxlength="4" /></div>';

		return s;
	};

	this._menu_year = function()
	{
		if (!this.popup_year)
		{
			this.popup_year = new BX.PopupWindow(
				'calendar_popup_year_' + Math.random(), this.PARTS.YEAR,
				{
					content: this._menu_year_content(),
					closeByEsc: true,
					autoHide: true,
					offsetTop: -29,
					offsetLeft: -1,
					className: this.year_popup_classname,
					events: {
						onPopupShow: BX.delegate(function() {
							if (this.popup_month)
							{
								this.popup_month.close();
							}
						}, this)
					}
				}
			);

			BX.bind(this.popup_year.popupContainer, 'click', BX.proxy(this.year_popup_click, this));
			BX.bind(this.popup_year.popupContainer, 'keyup', BX.proxy(this.year_popup_keyup, this));
			this.popup_year.BXYEAR = this.value.getUTCFullYear();
		}
		else if (this.popup_year.BXYEAR != this.value.getUTCFullYear())
		{
			this.popup_year.setContent(this._menu_year_content());
			this.popup_year.BXYEAR = this.value.getUTCFullYear();
		}

		this.popup_year.show();
	};

	this.year_popup_click = function(e)
	{
		var target = e.target || e.srcElement;
		if (target && target.getAttribute && target.getAttribute('data-bx-year'))
		{
			this.SetYear(parseInt(target.getAttribute('data-bx-year')));
			this.popup_year.close();
		}
	};
	this.year_popup_keyup = function(e)
	{
		var target = e.target || e.srcElement;
		if (target && target.getAttribute && target.getAttribute('data-bx-year-input') == 'Y')
		{
			var value = parseInt(target.value);
			if(value >= 1900 && value <= 2100)
			{
				this.SetYear(value);
				this.popup_year.close();
			}
		}
	};

	this._check_date = function(v)
	{
		var res = v;

		if (BX.type.isString(v))
		{
			res = BX.parseDate(v, true);
		}

		if (!BX.type.isDate(res) || isNaN(res.valueOf()))
		{
			res = BX.date.convertToUTC(new Date());
			if (this.params.bHideTime)
			{
				res.setUTCHours(0);
				res.setUTCMinutes(0);
			}
		}

		res.setUTCMilliseconds(0);
		res.setUTCSeconds(0);

		res.BXCHECKED = true;

		return res;
	};
};

BX.JCCalendar.prototype.Show = function(params)
{
	if (!BX.isReady)
	{
		BX.ready(BX.delegate(function() {this.Show(params)}, this));
		return;
	}

	params.node = params.node||document.body;

	if (BX.type.isNotEmptyString(params.node))
	{
		var n = BX(params.node);
		if (!n)
		{
			n = document.getElementsByName(params.node);
			if (n && n.length > 0)
			{
				n = n[0]
			}
		}
		params.node = n;
	}

	if (!params.node)
		return;

	if (!!params.field)
	{
		if (BX.type.isString(params.field))
		{
			n = BX(params.field);
			if (!!n)
			{
				params.field = n;
			}
			else
			{
				if (params.form)
				{
					if (BX.type.isString(params.form))
					{
						params.form = document.forms[params.form];
					}
				}

				if (BX.type.isDomNode(params.form) && !!params.form[params.field])
				{
					params.field = params.form[params.field];
				}
				else
				{
					n = document.getElementsByName(params.field);
					if (n && n.length > 0)
					{
						n = n[0];
						params.field = n;
					}
				}
			}

			if (BX.type.isString(params.field))
			{
				params.field = BX(params.field);
			}
		}
	}

	var bShow = !this.popup || !this.popup.isShown() || this.params.node != params.node;

	this.params = params;

	this.params.bCompatibility = (typeof this.params.bCompatibility == 'undefined' ? false : this.params.bCompatibility);
	this.params.bTimeVisibility = (typeof this.params.bTimeVisibility == 'undefined' ? !this.params.bCompatibility : this.params.bTimeVisibility);
	if (this.params.bCompatibility)
	{
		this.params.bCategoryTimeVisibilityOption = (
			this.params.bCategoryTimeVisibilityOption ? this.params.bCategoryTimeVisibilityOption : ''
		);
		this.params.bNameTimeVisibilityOption = (
			this.params.bNameTimeVisibilityOption ? this.params.bNameTimeVisibilityOption : 'time_visibility'
		);

		if (typeof this._bTimeVisibility !== 'undefined')
		{
			this.params.bTimeVisibility = this._bTimeVisibility;
		}
	}

	this.params.bTime = typeof this.params.bTime == 'undefined' ? true : !!this.params.bTime;
	this.params.bHideTime = typeof this.params.bHideTime == 'undefined' ? true : !!this.params.bHideTime;
	this.params.bUseSecond = typeof this.params.bUseSecond == 'undefined' ? true : !!this.params.bUseSecond;

	this.weekStart = parseInt(this.params.weekStart || this.params.weekStart || BX.message('WEEK_START'));
	if (isNaN(this.weekStart))
		this.weekStart = 1;

	if (!this.popup)
	{
		this._create(this.params);
	}
	else
	{
		this.popup.setBindElement(this.params.node);
	}

	var bHideTime = !!this.params.bHideTime;
	if (this.params.value)
	{
		this.SetValue(this.params.value);
		bHideTime = this.value.getUTCHours() <= 0 && this.value.getUTCMinutes() <= 0;
	}
	else if (this.params.field)
	{
		this.SetValue(this.params.field.value);
		bHideTime = this.value.getUTCHours() <= 0 && this.value.getUTCMinutes() <= 0;
	}
	else if (!!this.params.currentTime)
	{
		this.SetValue(this.params.currentTime);
	}
	else
	{
		this.SetValue();
	}

	if (!!this.params.bTime)
	{
		this.activateTimeStyle(bHideTime);
	}
	else
	{
		this.activateDateStyle(bHideTime);
	}

	if (bShow)
	{
		this._auto_hide_disable();
		this.popup.show();
		setTimeout(BX.proxy(this._auto_hide_enable, this), 0);
	}

	this.params.bSetFocus = typeof this.params.bSetFocus == 'undefined' ? true : !!this.params.bSetFocus;
	if(this.params.bSetFocus)
	{
		params.node.blur();
	}
	else
	{
		BX.bind(params.node, 'keyup', BX.defer(function(){
			this.SetValue(params.node.value);
			if(!!this.params.bTime)
			{
				if(this.value.getUTCHours() <= 0 && this.value.getUTCMinutes() <= 0)
					BX.removeClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
				else
					BX.addClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
			}
		}, this));
	}

	return this;
};

BX.JCCalendar.prototype.activateDateStyle = function(bHideTime)
{
	BX.addClass(this.DIV, 'bx-calendar-time-disabled');

	if (!!bHideTime)
		BX.removeClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
	else
		BX.addClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
};

BX.JCCalendar.prototype.activateTimeStyle = function(bHideTime)
{
	if (this.params.bCompatibility && !this.params.bTimeVisibility)
	{
		BX.addClass(this.PARTS.BUTTONS, 'bx-calendar-buttons-disabled');
		BX.addClass(this.PARTS.TIME, 'bx-calendar-set-time-wrap-simple');
		BX.removeClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
	}
	else
	{
		BX.removeClass(this.DIV, 'bx-calendar-time-disabled');

		if (!!bHideTime)
			BX.removeClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
		else
			BX.addClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');
	}
};

BX.JCCalendar.prototype.SetDay = function(d)
{
	this.value.setUTCDate(d);
	return this.SetValue(this.value);
};

BX.JCCalendar.prototype.SetMonth = function(m)
{
	if (this.popup_month)
		this.popup_month.close();

	this.value.setUTCMonth(m);

	if(m < 0)
		m += 12;
	else if (m >= 12)
		m -= 12;

	while(this.value.getUTCMonth() > m)
	{
		this.value.setUTCDate(this.value.getUTCDate()-1);
	}

	return this.SetValue(this.value);
};

BX.JCCalendar.prototype.SetYear = function(y)
{
	if (this.popup_year)
		this.popup_year.close();
	this.value.setUTCFullYear(y);
	return this.SetValue(this.value);
};

BX.JCCalendar.prototype.SetDate = function(v, bSet)
{
	v = this._check_date(v);
	v.setUTCHours(this.value.getUTCHours());
	v.setUTCMinutes(this.value.getUTCMinutes());
	v.setUTCSeconds(this.value.getUTCSeconds());

	if (this.params.bTime && !bSet)
	{
		return this.SetValue(v);
	}
	else
	{
		this.SetValue(v);
		this.SaveValue();
	}
};

BX.JCCalendar.prototype.SetValue = function(v)
{
	this.value = (v && v.BXCHECKED) ? v : this._check_date(v);

	this.PARTS.MONTH.innerHTML = BX.message('MONTH_' + (this.value.getUTCMonth()+1));
	this.PARTS.YEAR.innerHTML = this.value.getUTCFullYear();

	if (!!this.params.bTime)
	{
		var h = this.value.getUTCHours();
		if (this.bAmPm)
		{
			if (h >= 12)
			{
				this.PARTS.TIME_AMPM.innerHTML = 'PM';

				if (h != 12)
					h -= 12;
			}
			else
			{
				this.PARTS.TIME_AMPM.innerHTML = 'AM';

				if (h == 0)
					h = 12;
			}
		}

		this.PARTS.TIME_INPUT_H.value = BX.util.str_pad_left(h.toString(), 2, "0");
		this.PARTS.TIME_INPUT_M.value = BX.util.str_pad_left(this.value.getUTCMinutes().toString(), 2, "0");
	}

	this._set_layer();

	return this;
};

BX.JCCalendar.prototype.SaveValue = function()
{
	if (this.popup_month)
		this.popup_month.close();
	if (this.popup_year)
		this.popup_year.close();

	var bSetValue = true;
	if (!!this.params.callback)
	{
		var res = this.params.callback.apply(this, [new Date(this.value.valueOf()+this.value.getTimezoneOffset()*60000)]);
		if (res === false)
			bSetValue = false;
	}

	if (bSetValue)
	{
		var bTime = !!this.params.bTime && BX.hasClass(this.PARTS.TIME, 'bx-calendar-set-time-opened');

		if (this.params.field)
		{
			var format = BX.message(bTime ? 'FORMAT_DATETIME' : 'FORMAT_DATE');

			if(bTime && !this.params.bUseSecond)
			{
				format = format.replace(':SS', '');
			}

			this.params.field.value = BX.calendar.ValueToStringFormat(this.value, format, true);
			BX.fireEvent(this.params.field, 'change');
		}

		this.popup.close();

		if (!!this.params.callback_after)
		{
			this.params.callback_after.apply(this, [new Date(this.value.valueOf()+this.value.getTimezoneOffset()*60000), bTime]);
		}
	}

	return this;
};

BX.JCCalendar.prototype.Close = function()
{
	if (!!this.popup)
		this.popup.close();

	return this;
};

BX.JCSpinner = function(params)
{
	params = params || {};
	this.params = {
		input: params.input || null,

		delta: params.delta || 1,

		timeout_start: params.timeout_start || 1000,
		timeout_cont: params.timeout_cont || 150,

		callback_start: params.callback_start || null,
		callback_change: params.callback_change || null,
		callback_finish: params.callback_finish || null,

		bSaveValue: typeof params.bSaveValue == 'undefined' ? !!params.input : !!params.bSaveValue
	};

	this.mousedown = false;
	this.direction = 1;
};

BX.JCSpinner.prototype.Show = function()
{
	this.node = BX.create('span', {
		events: {
			mousedown: BX.delegateEvent(
				{attr: 'data-dir'},
				BX.delegate(this.Start, this)
			)
		},
		html: '<a href="javascript:void(0)" class="bx-calendar-form-arrow bx-calendar-form-arrow-top" data-dir="1"><i></i></a><a href="javascript:void(0)" class="bx-calendar-form-arrow bx-calendar-form-arrow-bottom" data-dir="-1"><i></i></a>'
	});
	return this.node;
};

BX.JCSpinner.prototype.Start = function()
{
	this.mousedown = true;
	this.direction = BX.proxy_context.getAttribute('data-dir') > 0 ? 1 : -1;
	BX.bind(document, "mouseup", BX.proxy(this.MouseUp, this));
	this.ChangeValue(true);
};

BX.JCSpinner.prototype.ChangeValue = function(bFirst)
{
	if(!this.mousedown)
		return;

	if (this.params.input)
	{
		var v = parseInt(this.params.input.value, 10) + this.params.delta * this.direction;

		if (this.params.bSaveValue)
			this.params.input.value = v;

		if (!!bFirst && this.params.callback_start)
			this.params.callback_start(this.params, v, this.direction);

		if (this.params.callback_change)
			this.params.callback_change(this.params, v, this.direction);

		setTimeout(
			BX.proxy(this.ChangeValue, this),
			!!bFirst ? this.params.timeout_start : this.params.timeout_cont
		);
	}
};

BX.JCSpinner.prototype.MouseUp = function()
{
	this.mousedown = false;
	BX.unbind(document, "mouseup", BX.proxy(this.MouseUp, this));

	if (this.params.callback_finish)
		this.params.callback_finish(this.params, this.params.input.value);
};

/**************** compatibility hacks ***************************/

window.jsCalendar = {
	Show: function(obj, field, fieldFrom, fieldTo, bTime, serverTime, form_name, bHideTimebar)
	{
		return BX.calendar({
			node: obj, field: field, form: form_name, bTime: !!bTime, currentTime: serverTime, bHideTimebar: !!bHideTimebar
		});
	},

	ValueToString: BX.calendar.ValueToString
};


/************ clock popup transferred from timeman **************/

BX.CClockSelector = function(params)
{
	this.params = params;

	this.params.popup_buttons = this.params.popup_buttons || [
		new BX.PopupWindowButton({
			text : BX.message('CAL_BUTTON'),
			className : "popup-window-button-create",
			events : {click : BX.proxy(this.setValue, this)}
		})
	];

	this.isReady = false;

	this.WND = new BX.PopupWindow(
		this.params.popup_id || 'clock_selector_popup',
		this.params.node,
		this.params.popup_config || {
			titleBar: BX.message('CAL_TIME'),
			offsetLeft: -45,
			offsetTop: -135,
			autoHide: true,
			closeIcon: true,
			closeByEsc: true
		}
	);

	this.SHOW = false;
	BX.addCustomEvent(this.WND, "onPopupClose", BX.delegate(this.onPopupClose, this));

	this.obClocks = {};
	this.CLOCK_ID = this.params.clock_id || 'clock_selector';
};

BX.CClockSelector.prototype.Show = function()
{
	if (!this.isReady)
	{
		//BX.timeman.showWait(this.parent.DIV);

		BX.addCustomEvent('onClockRegister', BX.proxy(this.onClockRegister, this));
		return BX.ajax.get('/bitrix/tools/clock_selector.php', {start_time: this.params.start_time, clock_id: this.CLOCK_ID, sessid: BX.bitrix_sessid()}, BX.delegate(this.Ready, this));
	}

	this.WND.setButtons(this.params.popup_buttons);
	this.WND.show();

	this.SHOW = true;

	if (window['bxClock_' + this.obClocks[this.CLOCK_ID]])
	{
		setTimeout("window['bxClock_" + this.obClocks[this.CLOCK_ID] + "'].CalculateCoordinates()", 40);
	}

	return true;
};

BX.CClockSelector.prototype.onClockRegister = function(obClocks)
{
	if (obClocks[this.CLOCK_ID])
	{
		this.obClocks[this.CLOCK_ID] = obClocks[this.CLOCK_ID];
		BX.removeCustomEvent('onClockRegister', BX.proxy(this.onClockRegister, this));
	}
};

BX.CClockSelector.prototype.Ready = function(data)
{
	this.content = this.CreateContent(data);
	this.WND.setContent(this.content);

	this.isReady = true;
	//BX.timeman.closeWait();

	setTimeout(BX.proxy(this.Show, this), 30);
};

BX.CClockSelector.prototype.CreateContent = function(data)
{
	return BX.create('DIV', {
		events: {click: BX.PreventDefault},
		html:
			'<div class="bx-tm-popup-clock">' + data + '</div>'
	});
};

BX.CClockSelector.prototype.setValue = function(e)
{
	if (this.params.callback)
	{
		var input = BX.findChild(this.content, {tagName: 'INPUT'}, true);
		this.params.callback.apply(this.params.node, [input.value]);
	}

	return BX.PreventDefault(e);
};

BX.CClockSelector.prototype.closeWnd = function(e)
{
	this.WND.close();
	return (e || window.event) ? BX.PreventDefault(e) : true;
};

BX.CClockSelector.prototype.setNode = function(node)
{
	this.WND.setBindElement(node);
};

BX.CClockSelector.prototype.setTime = function(timestamp)
{
	this.params.start_time = timestamp;
	if (window['bxClock_' + this.obClocks[this.CLOCK_ID]])
	{
		window['bxClock_' +  this.obClocks[this.CLOCK_ID]].SetTime(parseInt(timestamp/3600), parseInt((timestamp%3600)/60));
	}
};

BX.CClockSelector.prototype.setCallback = function(cb)
{
	this.params.callback = cb;
};

BX.CClockSelector.prototype.onPopupClose = function()
{
	this.SHOW = false;
};

})();

/* End */
;
; /* Start:"a:4:{s:4:"full";s:49:"/bitrix/js/main/core/core.min.js?1721672318223197";s:6:"source";s:28:"/bitrix/js/main/core/core.js";s:3:"min";s:32:"/bitrix/js/main/core/core.min.js";s:3:"map";s:32:"/bitrix/js/main/core/core.map.js";}"*/
(function(){if(typeof window.BX==="function"){return}
/**
 * Babel external helpers
 * (c) 2018 Babel
 * @license MIT
 */(function(e){var t=e.babelHelpers={};function r(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){t.typeof=r=function(e){return typeof e}}else{t.typeof=r=function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return r(e)}t.typeof=r;var n;function i(e,t,r,i){if(!n){n=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103}var a=e&&e.defaultProps;var s=arguments.length-3;if(!t&&s!==0){t={children:void 0}}if(t&&a){for(var o in a){if(t[o]===void 0){t[o]=a[o]}}}else if(!t){t=a||{}}if(s===1){t.children=i}else if(s>1){var u=new Array(s);for(var l=0;l<s;l++){u[l]=arguments[l+3]}t.children=u}return{$$typeof:n,type:e,key:r===undefined?null:""+r,ref:null,props:t,_owner:null}}t.jsx=i;function a(e){var t;if(typeof Symbol==="function"){if(Symbol.asyncIterator){t=e[Symbol.asyncIterator];if(t!=null)return t.call(e)}if(Symbol.iterator){t=e[Symbol.iterator];if(t!=null)return t.call(e)}}throw new TypeError("Object is not async iterable")}t.asyncIterator=a;function s(e){this.wrapped=e}t.AwaitValue=s;function o(e){var r,n;function i(e,t){return new Promise((function(i,s){var o={key:e,arg:t,resolve:i,reject:s,next:null};if(n){n=n.next=o}else{r=n=o;a(e,t)}}))}function a(r,n){try{var i=e[r](n);var o=i.value;var u=o instanceof t.AwaitValue;Promise.resolve(u?o.wrapped:o).then((function(e){if(u){a("next",e);return}s(i.done?"return":"normal",e)}),(function(e){a("throw",e)}))}catch(e){s("throw",e)}}function s(e,t){switch(e){case"return":r.resolve({value:t,done:true});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:false});break}r=r.next;if(r){a(r.key,r.arg)}else{n=null}}this._invoke=i;if(typeof e.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){o.prototype[Symbol.asyncIterator]=function(){return this}}o.prototype.next=function(e){return this._invoke("next",e)};o.prototype.throw=function(e){return this._invoke("throw",e)};o.prototype.return=function(e){return this._invoke("return",e)};t.AsyncGenerator=o;function u(e){return function(){return new t.AsyncGenerator(e.apply(this,arguments))}}t.wrapAsyncGenerator=u;function l(e){return new t.AwaitValue(e)}t.awaitAsyncGenerator=l;function c(e,t){var r={},n=false;function i(r,i){n=true;i=new Promise((function(t){t(e[r](i))}));return{done:false,value:t(i)}}if(typeof Symbol==="function"&&Symbol.iterator){r[Symbol.iterator]=function(){return this}}r.next=function(e){if(n){n=false;return e}return i("next",e)};if(typeof e.throw==="function"){r.throw=function(e){if(n){n=false;throw e}return i("throw",e)}}if(typeof e.return==="function"){r.return=function(e){return i("return",e)}}return r}t.asyncGeneratorDelegate=c;function f(e,t,r,n,i,a,s){try{var o=e[a](s);var u=o.value}catch(e){r(e);return}if(o.done){t(u)}else{Promise.resolve(u).then(n,i)}}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){f(a,n,i,s,o,"next",e)}function o(e){f(a,n,i,s,o,"throw",e)}s(undefined)}))}}t.asyncToGenerator=d;function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}t.classCallCheck=p;function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function v(e,t,r){if(t)h(e.prototype,t);if(r)h(e,r);return e}t.createClass=v;function y(e,t){for(var r in t){var n=t[r];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(e,r,n)}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(var a=0;a<i.length;a++){var s=i[a];var n=t[s];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(e,s,n)}}return e}t.defineEnumerableProperties=y;function m(e,t){var r=Object.getOwnPropertyNames(t);for(var n=0;n<r.length;n++){var i=r[n];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}t.defaults=m;function g(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}t.defineProperty=g;function b(){t.extends=b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return b.apply(this,arguments)}t.extends=b;function w(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))}i.forEach((function(r){t.defineProperty(e,r,n[r])}))}return e}t.objectSpread=w;function x(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)t.setPrototypeOf(e,r)}t.inherits=x;function S(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}t.inheritsLoose=S;function E(e){t.getPrototypeOf=E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return E(e)}t.getPrototypeOf=E;function T(e,r){t.setPrototypeOf=T=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return T(e,r)}t.setPrototypeOf=T;function B(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function j(e,r,n){if(B()){t.construct=j=Reflect.construct}else{t.construct=j=function e(r,n,i){var a=[null];a.push.apply(a,n);var s=Function.bind.apply(r,a);var o=new s;if(i)t.setPrototypeOf(o,i.prototype);return o}}return j.apply(null,arguments)}t.construct=j;function O(e){return Function.toString.call(e).indexOf("[native code]")!==-1}t.isNativeFunction=O;function A(e){var r=typeof Map==="function"?new Map:undefined;t.wrapNativeSuper=A=function e(n){if(n===null||!t.isNativeFunction(n))return n;if(typeof n!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof r!=="undefined"){if(r.has(n))return r.get(n);r.set(n,i)}function i(){return t.construct(n,arguments,t.getPrototypeOf(this).constructor)}i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:false,writable:true,configurable:true}});return t.setPrototypeOf(i,n)};return A(e)}t.wrapNativeSuper=A;function X(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return t[Symbol.hasInstance](e)}else{return e instanceof t}}t.instanceof=X;function k(e){return e&&e.__esModule?e:{default:e}}t.interopRequireDefault=k;function N(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}t.interopRequireWildcard=N;function C(e,t){if(e!==t){throw new TypeError("Cannot instantiate an arrow function")}}t.newArrowCheck=C;function P(e){if(e==null)throw new TypeError("Cannot destructure undefined")}t.objectDestructuringEmpty=P;function _(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,a;for(a=0;a<n.length;a++){i=n[a];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}t.objectWithoutPropertiesLoose=_;function I(e,r){if(e==null)return{};var n=t.objectWithoutPropertiesLoose(e,r);var i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++){i=s[a];if(r.indexOf(i)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,i))continue;n[i]=e[i]}}return n}t.objectWithoutProperties=I;function L(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}t.assertThisInitialized=L;function M(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return t.assertThisInitialized(e)}t.possibleConstructorReturn=M;function D(e,r){while(!Object.prototype.hasOwnProperty.call(e,r)){e=t.getPrototypeOf(e);if(e===null)break}return e}t.superPropBase=D;function F(e,r,n){if(typeof Reflect!=="undefined"&&Reflect.get){t.get=F=Reflect.get}else{t.get=F=function e(r,n,i){var a=t.superPropBase(r,n);if(!a)return;var s=Object.getOwnPropertyDescriptor(a,n);if(s.get){return s.get.call(i)}return s.value}}return F(e,r,n||e)}t.get=F;function R(e,r,n,i){if(typeof Reflect!=="undefined"&&Reflect.set){R=Reflect.set}else{R=function e(r,n,i,a){var s=t.superPropBase(r,n);var o;if(s){o=Object.getOwnPropertyDescriptor(s,n);if(o.set){o.set.call(a,i);return true}else if(!o.writable){return false}}o=Object.getOwnPropertyDescriptor(a,n);if(o){if(!o.writable){return false}o.value=i;Object.defineProperty(a,n,o)}else{t.defineProperty(a,n,i)}return true}}return R(e,r,n,i)}function H(e,t,r,n,i){var a=R(e,t,r,n||e);if(!a&&i){throw new Error("failed to set property")}return r}t.set=H;function W(e,t){if(!t){t=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.taggedTemplateLiteral=W;function G(e,t){if(!t){t=e.slice(0)}e.raw=t;return e}t.taggedTemplateLiteralLoose=G;function z(e,r){if(e===t.temporalUndefined){throw new ReferenceError(r+" is not defined - temporal dead zone")}else{return e}}t.temporalRef=z;function U(e){throw new Error('"'+e+'" is read-only')}t.readOnlyError=U;function $(e){throw new Error('Class "'+e+'" cannot be referenced in computed property keys.')}t.classNameTDZError=$;t.temporalUndefined={};function V(e,r){return t.arrayWithHoles(e)||t.iterableToArrayLimit(e,r)||t.nonIterableRest()}t.slicedToArray=V;function Y(e,r){return t.arrayWithHoles(e)||t.iterableToArrayLimitLoose(e,r)||t.nonIterableRest()}t.slicedToArrayLoose=Y;function q(e){return t.arrayWithHoles(e)||t.iterableToArray(e)||t.nonIterableRest()}t.toArray=q;function J(e){return t.arrayWithoutHoles(e)||t.iterableToArray(e)||t.nonIterableSpread()}t.toConsumableArray=J;function Z(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}t.arrayWithoutHoles=Z;function K(e){if(Array.isArray(e))return e}t.arrayWithHoles=K;function Q(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}t.iterableToArray=Q;function ee(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done);n=true){r.push(o.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&s["return"]!=null)s["return"]()}finally{if(i)throw a}}return r}t.iterableToArrayLimit=ee;function te(e,t){var r=[];for(var n=e[Symbol.iterator](),i;!(i=n.next()).done;){r.push(i.value);if(t&&r.length===t)break}return r}t.iterableToArrayLimitLoose=te;function re(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.nonIterableSpread=re;function ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.nonIterableRest=ne;function ie(e){return function(){var t=e.apply(this,arguments);t.next();return t}}t.skipFirstGeneratorNext=ie;function ae(e){if(typeof e==="symbol"){return e}else{return String(e)}}t.toPropertyKey=ae;function se(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and set to use loose mode. "+"To use proposal-class-properties in spec mode with decorators, wait for "+"the next major version of decorators in stage 2.")}t.initializerWarningHelper=se;function oe(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}t.initializerDefineProperty=oe;function ue(e,t,r,n,i){var a={};Object["ke"+"ys"](n).forEach((function(e){a[e]=n[e]}));a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a);if(i&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(i):void 0;a.initializer=undefined}if(a.initializer===void 0){Object["define"+"Property"](e,t,a);a=null}return a}t.applyDecoratedDescriptor=ue;var le=0;function ce(e){return"__private_"+le+++"_"+e}t.classPrivateFieldLooseKey=ce;function fe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t)){throw new TypeError("attempted to use private field on non-instance")}return e}t.classPrivateFieldLooseBase=fe;function de(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e).value}t.classPrivateFieldGet=de;function pe(e,t,r){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}var n=t.get(e);if(!n.writable){throw new TypeError("attempted to set read only private field")}n.value=r;return r}t.classPrivateFieldSet=pe})(typeof global==="undefined"?window:global);!function(e){"use strict";var t=Object.prototype;var r=t.hasOwnProperty;var n;var i=typeof Symbol==="function"?Symbol:{};var a=i.iterator||"@@iterator";var s=i.asyncIterator||"@@asyncIterator";var o=i.toStringTag||"@@toStringTag";var u=e.regeneratorRuntime={};function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y;var a=Object.create(i.prototype);var s=new X(n||[]);a._invoke=B(e,r,s);return a}u.wrap=l;function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var f="suspendedStart";var d="suspendedYield";var p="executing";var h="completed";var v={};function y(){}function m(){}function g(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf;var x=w&&w(w(k([])));if(x&&x!==t&&r.call(x,a)){b=x}var S=g.prototype=y.prototype=Object.create(b);m.prototype=S.constructor=g;g.constructor=m;g[o]=m.displayName="GeneratorFunction";function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}u.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===m||(t.displayName||t.name)==="GeneratorFunction":false};u.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,g)}else{e.__proto__=g;if(!(o in e)){e[o]="GeneratorFunction"}}e.prototype=Object.create(S);return e};u.awrap=function(e){return{__await:e}};function T(e){function t(n,i,a,s){var o=c(e[n],e,i);if(o.type==="throw"){s(o.arg)}else{var u=o.arg;var l=u.value;if(l&&typeof l==="object"&&r.call(l,"__await")){return Promise.resolve(l.__await).then((function(e){t("next",e,a,s)}),(function(e){t("throw",e,a,s)}))}return Promise.resolve(l).then((function(e){u.value=e;a(u)}),s)}}var n;function i(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=i}E(T.prototype);T.prototype[s]=function(){return this};u.AsyncIterator=T;u.async=function(e,t,r,n){var i=new T(l(e,t,r,n));return u.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))};function B(e,t,r){var n=f;return function i(a,s){if(n===p){throw new Error("Generator is already running")}if(n===h){if(a==="throw"){throw s}return N()}r.method=a;r.arg=s;while(true){var o=r.delegate;if(o){var u=j(o,r);if(u){if(u===v)continue;return u}}if(r.method==="next"){r.sent=r._sent=r.arg}else if(r.method==="throw"){if(n===f){n=h;throw r.arg}r.dispatchException(r.arg)}else if(r.method==="return"){r.abrupt("return",r.arg)}n=p;var l=c(e,t,r);if(l.type==="normal"){n=r.done?h:d;if(l.arg===v){continue}return{value:l.arg,done:r.done}}else if(l.type==="throw"){n=h;r.method="throw";r.arg=l.arg}}}}function j(e,t){var r=e.iterator[t.method];if(r===n){t.delegate=null;if(t.method==="throw"){if(e.iterator.return){t.method="return";t.arg=n;j(e,t);if(t.method==="throw"){return v}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,e.iterator,t.arg);if(i.type==="throw"){t.method="throw";t.arg=i.arg;t.delegate=null;return v}var a=i.arg;if(!a){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return v}if(a.done){t[e.resultName]=a.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=n}}else{return a}t.delegate=null;return v}E(S);S[o]="Generator";S[a]=function(){return this};S.toString=function(){return"[object Generator]"};function O(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function X(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(O,this);this.reset(true)}u.keys=function(e){var t=[];for(var r in e){t.push(r)}t.reverse();return function r(){while(t.length){var n=t.pop();if(n in e){r.value=n;r.done=false;return r}}r.done=true;return r}};function k(e){if(e){var t=e[a];if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var i=-1,s=function t(){while(++i<e.length){if(r.call(e,i)){t.value=e[i];t.done=false;return t}}t.value=n;t.done=true;return t};return s.next=s}}return{next:N}}u.values=k;function N(){return{value:n,done:true}}X.prototype={constructor:X,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=n;this.done=false;this.delegate=null;this.method="next";this.arg=n;this.tryEntries.forEach(A);if(!e){for(var t in this){if(t.charAt(0)==="t"&&r.call(this,t)&&!isNaN(+t.slice(1))){this[t]=n}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){if(this.done){throw e}var t=this;function i(r,i){o.type="throw";o.arg=e;t.next=r;if(i){t.method="next";t.arg=n}return!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a];var o=s.completion;if(s.tryLoc==="root"){return i("end")}if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc");var l=r.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc){return i(s.catchLoc,true)}else if(this.prev<s.finallyLoc){return i(s.finallyLoc)}}else if(u){if(this.prev<s.catchLoc){return i(s.catchLoc,true)}}else if(l){if(this.prev<s.finallyLoc){return i(s.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}if(a&&(e==="break"||e==="continue")&&a.tryLoc<=t&&t<=a.finallyLoc){a=null}var s=a?a.completion:{};s.type=e;s.arg=t;if(a){this.method="next";this.next=a.finallyLoc;return v}return this.complete(s)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);A(r);return v}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:k(e),resultName:t,nextLoc:r};if(this.method==="next"){this.arg=n}return v}}}(function(){return this}()||Function("return this")());(function(e){"use strict";var t=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e};var i=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof t=="object"&&t)||function(){return this}()||Function("return this")();var a=function(e){try{return!!e()}catch(e){return true}};var s=!a((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}));var o=Function.prototype.call;var u=o.bind?o.bind(o):function(){return o.apply(o,arguments)};var l={}.propertyIsEnumerable;var c=Object.getOwnPropertyDescriptor;var f=c&&!l.call({1:2},1);var d=f?function e(t){var r=c(this,t);return!!r&&r.enumerable}:l;var p={f:d};var h=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}};var v=Function.prototype;var y=v.bind;var m=v.call;var g=y&&y.bind(m);var b=y?function(e){return e&&g(m,e)}:function(e){return e&&function(){return m.apply(e,arguments)}};var w=b({}.toString);var x=b("".slice);var S=function(e){return x(w(e),8,-1)};var E=i.Object;var T=b("".split);var B=a((function(){return!E("z").propertyIsEnumerable(0)}))?function(e){return S(e)=="String"?T(e,""):E(e)}:E;var j=i.TypeError;var O=function(e){if(e==undefined)throw j("Can't call method on "+e);return e};var A=function(e){return B(O(e))};var X=function(e){return typeof e=="function"};var k=function(e){return typeof e=="object"?e!==null:X(e)};var N=function(e){return X(e)?e:undefined};var C=function(e,t){return arguments.length<2?N(i[e]):i[e]&&i[e][t]};var P=b({}.isPrototypeOf);var _=C("navigator","userAgent")||"";var I=i.process;var L=i.Deno;var M=I&&I.versions||L&&L.version;var D=M&&M.v8;var F,R;if(D){F=D.split(".");R=F[0]>0&&F[0]<4?1:+(F[0]+F[1])}if(!R&&_){F=_.match(/Edge\/(\d+)/);if(!F||F[1]>=74){F=_.match(/Chrome\/(\d+)/);if(F)R=+F[1]}}var H=R;var W=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&H&&H<41}));var G=W&&!Symbol.sham&&typeof Symbol.iterator=="symbol";var z=i.Object;var U=G?function(e){return typeof e=="symbol"}:function(e){var t=C("Symbol");return X(t)&&P(t.prototype,z(e))};var $=i.String;var V=function(e){try{return $(e)}catch(e){return"Object"}};var Y=i.TypeError;var q=function(e){if(X(e))return e;throw Y(V(e)+" is not a function")};var J=function(e,t){var r=e[t];return r==null?undefined:q(r)};var Z=i.TypeError;var K=function(e,t){var r,n;if(t==="string"&&X(r=e.toString)&&!k(n=u(r,e)))return n;if(X(r=e.valueOf)&&!k(n=u(r,e)))return n;if(t!=="string"&&X(r=e.toString)&&!k(n=u(r,e)))return n;throw Z("Can't convert object to primitive value")};var Q=false;var ee=Object.defineProperty;var te=function(e,t){try{ee(i,e,{value:t,configurable:true,writable:true})}catch(r){i[e]=t}return t};var re="__core-js_shared__";var ne=i[re]||te(re,{});var ie=ne;var ae=r((function(e){(e.exports=function(e,t){return ie[e]||(ie[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.19.2",mode:"global",copyright:"(c) 2021 Denis Pushkarev (zloirock.ru)"})}));var se=i.Object;var oe=function(e){return se(O(e))};var ue=b({}.hasOwnProperty);var le=Object.hasOwn||function e(t,r){return ue(oe(t),r)};var ce=0;var fe=Math.random();var de=b(1..toString);var pe=function(e){return"Symbol("+(e===undefined?"":e)+")_"+de(++ce+fe,36)};var he=ae("wks");var ve=i.Symbol;var ye=ve&&ve["for"];var me=G?ve:ve&&ve.withoutSetter||pe;var ge=function(e){if(!le(he,e)||!(W||typeof he[e]=="string")){var t="Symbol."+e;if(W&&le(ve,e)){he[e]=ve[e]}else if(G&&ye){he[e]=ye(t)}else{he[e]=me(t)}}return he[e]};var be=i.TypeError;var we=ge("toPrimitive");var xe=function(e,t){if(!k(e)||U(e))return e;var r=J(e,we);var n;if(r){if(t===undefined)t="default";n=u(r,e,t);if(!k(n)||U(n))return n;throw be("Can't convert object to primitive value")}if(t===undefined)t="number";return K(e,t)};var Se=function(e){var t=xe(e,"string");return U(t)?t:t+""};var Ee=i.document;var Te=k(Ee)&&k(Ee.createElement);var Be=function(e){return Te?Ee.createElement(e):{}};var je=!s&&!a((function(){return Object.defineProperty(Be("div"),"a",{get:function(){return 7}}).a!=7}));var Oe=Object.getOwnPropertyDescriptor;var Ae=s?Oe:function e(t,r){t=A(t);r=Se(r);if(je)try{return Oe(t,r)}catch(e){}if(le(t,r))return h(!u(p.f,t,r),t[r])};var Xe={f:Ae};var ke=i.String;var Ne=i.TypeError;var Ce=function(e){if(k(e))return e;throw Ne(ke(e)+" is not an object")};var Pe=i.TypeError;var _e=Object.defineProperty;var Ie=s?_e:function e(t,r,n){Ce(t);r=Se(r);Ce(n);if(je)try{return _e(t,r,n)}catch(e){}if("get"in n||"set"in n)throw Pe("Accessors not supported");if("value"in n)t[r]=n.value;return t};var Le={f:Ie};var Me=s?function(e,t,r){return Le.f(e,t,h(1,r))}:function(e,t,r){e[t]=r;return e};var De=b(Function.toString);if(!X(ie.inspectSource)){ie.inspectSource=function(e){return De(e)}}var Fe=ie.inspectSource;var Re=i.WeakMap;var He=X(Re)&&/native code/.test(Fe(Re));var We=ae("keys");var Ge=function(e){return We[e]||(We[e]=pe(e))};var ze={};var Ue="Object already initialized";var $e=i.TypeError;var Ve=i.WeakMap;var Ye,qe,Je;var Ze=function(e){return Je(e)?qe(e):Ye(e,{})};var Ke=function(e){return function(t){var r;if(!k(t)||(r=qe(t)).type!==e){throw $e("Incompatible receiver, "+e+" required")}return r}};if(He||ie.state){var Qe=ie.state||(ie.state=new Ve);var et=b(Qe.get);var tt=b(Qe.has);var rt=b(Qe.set);Ye=function(e,t){if(tt(Qe,e))throw new $e(Ue);t.facade=e;rt(Qe,e,t);return t};qe=function(e){return et(Qe,e)||{}};Je=function(e){return tt(Qe,e)}}else{var nt=Ge("state");ze[nt]=true;Ye=function(e,t){if(le(e,nt))throw new $e(Ue);t.facade=e;Me(e,nt,t);return t};qe=function(e){return le(e,nt)?e[nt]:{}};Je=function(e){return le(e,nt)}}var it={set:Ye,get:qe,has:Je,enforce:Ze,getterFor:Ke};var at=Function.prototype;var st=s&&Object.getOwnPropertyDescriptor;var ot=le(at,"name");var ut=ot&&function e(){}.name==="something";var lt=ot&&(!s||s&&st(at,"name").configurable);var ct={EXISTS:ot,PROPER:ut,CONFIGURABLE:lt};var ft=r((function(e){var t=ct.CONFIGURABLE;var r=it.get;var n=it.enforce;var a=String(String).split("String");(e.exports=function(e,r,s,o){var u=o?!!o.unsafe:false;var l=o?!!o.enumerable:false;var c=o?!!o.noTargetGet:false;var f=o&&o.name!==undefined?o.name:r;var d;if(X(s)){if(String(f).slice(0,7)==="Symbol("){f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"}if(!le(s,"name")||t&&s.name!==f){Me(s,"name",f)}d=n(s);if(!d.source){d.source=a.join(typeof f=="string"?f:"")}}if(e===i){if(l)e[r]=s;else te(r,s);return}else if(!u){delete e[r]}else if(!c&&e[r]){l=true}if(l)e[r]=s;else Me(e,r,s)})(Function.prototype,"toString",(function e(){return X(this)&&r(this).source||Fe(this)}))}));var dt=Math.ceil;var pt=Math.floor;var ht=function(e){var t=+e;return t!==t||t===0?0:(t>0?pt:dt)(t)};var vt=Math.max;var yt=Math.min;var mt=function(e,t){var r=ht(e);return r<0?vt(r+t,0):yt(r,t)};var gt=Math.min;var bt=function(e){return e>0?gt(ht(e),9007199254740991):0};var wt=function(e){return bt(e.length)};var xt=function(e){return function(t,r,n){var i=A(t);var a=wt(i);var s=mt(n,a);var o;if(e&&r!=r)while(a>s){o=i[s++];if(o!=o)return true}else for(;a>s;s++){if((e||s in i)&&i[s]===r)return e||s||0}return!e&&-1}};var St={includes:xt(true),indexOf:xt(false)};var Et=St.indexOf;var Tt=b([].push);var Bt=function(e,t){var r=A(e);var n=0;var i=[];var a;for(a in r)!le(ze,a)&&le(r,a)&&Tt(i,a);while(t.length>n)if(le(r,a=t[n++])){~Et(i,a)||Tt(i,a)}return i};var jt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var Ot=jt.concat("length","prototype");var At=Object.getOwnPropertyNames||function e(t){return Bt(t,Ot)};var Xt={f:At};var kt=Object.getOwnPropertySymbols;var Nt={f:kt};var Ct=b([].concat);var Pt=C("Reflect","ownKeys")||function e(t){var r=Xt.f(Ce(t));var n=Nt.f;return n?Ct(r,n(t)):r};var _t=function(e,t){var r=Pt(t);var n=Le.f;var i=Xe.f;for(var a=0;a<r.length;a++){var s=r[a];if(!le(e,s))n(e,s,i(t,s))}};var It=/#|\.prototype\./;var Lt=function(e,t){var r=Dt[Mt(e)];return r==Rt?true:r==Ft?false:X(t)?a(t):!!t};var Mt=Lt.normalize=function(e){return String(e).replace(It,".").toLowerCase()};var Dt=Lt.data={};var Ft=Lt.NATIVE="N";var Rt=Lt.POLYFILL="P";var Ht=Lt;var Wt=Xe.f;var Gt=function(e,t){var r=e.target;var n=e.global;var a=e.stat;var s,o,u,l,c,f;if(n){o=i}else if(a){o=i[r]||te(r,{})}else{o=(i[r]||{}).prototype}if(o)for(u in t){c=t[u];if(e.noTargetGet){f=Wt(o,u);l=f&&f.value}else l=o[u];s=Ht(n?u:r+(a?".":"#")+u,e.forced);if(!s&&l!==undefined){if(typeof c==typeof l)continue;_t(c,l)}if(e.sham||l&&l.sham){Me(c,"sham",true)}ft(o,u,c,e)}};var zt=!a((function(){function e(){}e.prototype.constructor=null;return Object.getPrototypeOf(new e)!==e.prototype}));var Ut=Ge("IE_PROTO");var $t=i.Object;var Vt=$t.prototype;var Yt=zt?$t.getPrototypeOf:function(e){var t=oe(e);if(le(t,Ut))return t[Ut];var r=t.constructor;if(X(r)&&t instanceof r){return r.prototype}return t instanceof $t?Vt:null};var qt=i.String;var Jt=i.TypeError;var Zt=function(e){if(typeof e=="object"||X(e))return e;throw Jt("Can't set "+qt(e)+" as a prototype")};var Kt=Object.setPrototypeOf||("__proto__"in{}?function(){var e=false;var t={};var r;try{r=b(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set);r(t,[]);e=t instanceof Array}catch(e){}return function t(n,i){Ce(n);Zt(i);if(e)r(n,i);else n.__proto__=i;return n}}():undefined);var Qt=Object.keys||function e(t){return Bt(t,jt)};var er=s?Object.defineProperties:function e(t,r){Ce(t);var n=A(r);var i=Qt(r);var a=i.length;var s=0;var o;while(a>s)Le.f(t,o=i[s++],n[o]);return t};var tr=C("document","documentElement");var rr=">";var nr="<";var ir="prototype";var ar="script";var sr=Ge("IE_PROTO");var or=function(){};var ur=function(e){return nr+ar+rr+e+nr+"/"+ar+rr};var lr=function(e){e.write(ur(""));e.close();var t=e.parentWindow.Object;e=null;return t};var cr=function(){var e=Be("iframe");var t="java"+ar+":";var r;e.style.display="none";tr.appendChild(e);e.src=String(t);r=e.contentWindow.document;r.open();r.write(ur("document.F=Object"));r.close();return r.F};var fr;var dr=function(){try{fr=new ActiveXObject("htmlfile")}catch(e){}dr=typeof document!="undefined"?document.domain&&fr?lr(fr):cr():lr(fr);var e=jt.length;while(e--)delete dr[ir][jt[e]];return dr()};ze[sr]=true;var pr=Object.create||function e(t,r){var n;if(t!==null){or[ir]=Ce(t);n=new or;or[ir]=null;n[sr]=t}else n=dr();return r===undefined?n:er(n,r)};var hr=function(e,t,r){var n=Se(t);if(n in e)Le.f(e,n,h(0,r));else e[n]=r};var vr=i.Array;var yr=Math.max;var mr=function(e,t,r){var n=wt(e);var i=mt(t,n);var a=mt(r===undefined?n:r,n);var s=vr(yr(a-i,0));for(var o=0;i<a;i++,o++)hr(s,o,e[i]);s.length=o;return s};var gr=b("".replace);var br=b("".split);var wr=b([].join);var xr=function(e){return String(Error(e).stack)}("zxcasd");var Sr=/\n\s*at [^:]*:[^\n]*/;var Er=Sr.test(xr);var Tr=/@[^\n]*\n/.test(xr)&&!/zxcasd/.test(xr);var Br=function(e,t){if(typeof e!="string")return e;if(Er){while(t--)e=gr(e,Sr,"")}else if(Tr){return wr(mr(br(e,"\n"),t),"\n")}return e};var jr=function(e,t){if(k(t)&&"cause"in t){Me(e,"cause",t.cause)}};var Or=b(b.bind);var Ar=function(e,t){q(e);return t===undefined?e:Or?Or(e,t):function(){return e.apply(t,arguments)}};var Xr={};var kr=ge("iterator");var Nr=Array.prototype;var Cr=function(e){return e!==undefined&&(Xr.Array===e||Nr[kr]===e)};var Pr=ge("toStringTag");var _r={};_r[Pr]="z";var Ir=String(_r)==="[object z]";var Lr=ge("toStringTag");var Mr=i.Object;var Dr=S(function(){return arguments}())=="Arguments";var Fr=function(e,t){try{return e[t]}catch(e){}};var Rr=Ir?S:function(e){var t,r,n;return e===undefined?"Undefined":e===null?"Null":typeof(r=Fr(t=Mr(e),Lr))=="string"?r:Dr?S(t):(n=S(t))=="Object"&&X(t.callee)?"Arguments":n};var Hr=ge("iterator");var Wr=function(e){if(e!=undefined)return J(e,Hr)||J(e,"@@iterator")||Xr[Rr(e)]};var Gr=i.TypeError;var zr=function(e,t){var r=arguments.length<2?Wr(e):t;if(q(r))return Ce(u(r,e));throw Gr(V(e)+" is not iterable")};var Ur=function(e,t,r){var n,i;Ce(e);try{n=J(e,"return");if(!n){if(t==="throw")throw r;return r}n=u(n,e)}catch(e){i=true;n=e}if(t==="throw")throw r;if(i)throw n;Ce(n);return r};var $r=i.TypeError;var Vr=function(e,t){this.stopped=e;this.result=t};var Yr=Vr.prototype;var qr=function(e,t,r){var n=r&&r.that;var i=!!(r&&r.AS_ENTRIES);var a=!!(r&&r.IS_ITERATOR);var s=!!(r&&r.INTERRUPTED);var o=Ar(t,n);var l,c,f,d,p,h,v;var y=function(e){if(l)Ur(l,"normal",e);return new Vr(true,e)};var m=function(e){if(i){Ce(e);return s?o(e[0],e[1],y):o(e[0],e[1])}return s?o(e,y):o(e)};if(a){l=e}else{c=Wr(e);if(!c)throw $r(V(e)+" is not iterable");if(Cr(c)){for(f=0,d=wt(e);d>f;f++){p=m(e[f]);if(p&&P(Yr,p))return p}return new Vr(false)}l=zr(e,c)}h=l.next;while(!(v=u(h,l)).done){try{p=m(v.value)}catch(e){Ur(l,"throw",e)}if(typeof p=="object"&&p&&P(Yr,p))return p}return new Vr(false)};var Jr=i.String;var Zr=function(e){if(Rr(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Jr(e)};var Kr=function(e,t){return e===undefined?arguments.length<2?"":t:Zr(e)};var Qr=!a((function(){var e=Error("a");if(!("stack"in e))return true;Object.defineProperty(e,"stack",h(1,7));return e.stack!==7}));var en=ge("toStringTag");var tn=i.Error;var rn=[].push;var nn=function e(t,r){var n=arguments.length>2?arguments[2]:undefined;var i=P(an,this);var a;if(Kt){a=Kt(new tn(undefined),i?Yt(this):an)}else{a=i?this:pr(an);Me(a,en,"Error")}Me(a,"message",Kr(r,""));if(Qr)Me(a,"stack",Br(a.stack,1));jr(a,n);var s=[];qr(t,rn,{that:s});Me(a,"errors",s);return a};if(Kt)Kt(nn,tn);else _t(nn,tn);var an=nn.prototype=pr(tn.prototype,{constructor:h(1,nn),message:h(1,""),name:h(1,"AggregateError")});Gt({global:true},{AggregateError:nn});var sn=ge("unscopables");var on=Array.prototype;if(on[sn]==undefined){Le.f(on,sn,{configurable:true,value:pr(null)})}var un=function(e){on[sn][e]=true};Gt({target:"Array",proto:true},{at:function e(t){var r=oe(this);var n=wt(r);var i=ht(t);var a=i>=0?i:n+i;return a<0||a>=n?undefined:r[a]}});un("at");var ln=Array.isArray||function e(t){return S(t)=="Array"};var cn=b([].reverse);var fn=[1,2];Gt({target:"Array",proto:true,forced:String(fn)===String(fn.reverse())},{reverse:function e(){if(ln(this))this.length=this.length;return cn(this)}});var dn=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined";var pn=function(e,t,r){for(var n in t)ft(e,n,t[n],r);return e};var hn=i.TypeError;var vn=function(e,t){if(P(t,e))return e;throw hn("Incorrect invocation")};var yn=i.RangeError;var mn=function(e){if(e===undefined)return 0;var t=ht(e);var r=bt(t);if(t!==r)throw yn("Wrong length or index");return r};var gn=i.Array;var bn=Math.abs;var wn=Math.pow;var xn=Math.floor;var Sn=Math.log;var En=Math.LN2;var Tn=function(e,t,r){var n=gn(r);var i=r*8-t-1;var a=(1<<i)-1;var s=a>>1;var o=t===23?wn(2,-24)-wn(2,-77):0;var u=e<0||e===0&&1/e<0?1:0;var l=0;var c,f,d;e=bn(e);if(e!=e||e===Infinity){f=e!=e?1:0;c=a}else{c=xn(Sn(e)/En);d=wn(2,-c);if(e*d<1){c--;d*=2}if(c+s>=1){e+=o/d}else{e+=o*wn(2,1-s)}if(e*d>=2){c++;d/=2}if(c+s>=a){f=0;c=a}else if(c+s>=1){f=(e*d-1)*wn(2,t);c=c+s}else{f=e*wn(2,s-1)*wn(2,t);c=0}}while(t>=8){n[l++]=f&255;f/=256;t-=8}c=c<<t|f;i+=t;while(i>0){n[l++]=c&255;c/=256;i-=8}n[--l]|=u*128;return n};var Bn=function(e,t){var r=e.length;var n=r*8-t-1;var i=(1<<n)-1;var a=i>>1;var s=n-7;var o=r-1;var u=e[o--];var l=u&127;var c;u>>=7;while(s>0){l=l*256+e[o--];s-=8}c=l&(1<<-s)-1;l>>=-s;s+=t;while(s>0){c=c*256+e[o--];s-=8}if(l===0){l=1-a}else if(l===i){return c?NaN:u?-Infinity:Infinity}else{c=c+wn(2,t);l=l-a}return(u?-1:1)*c*wn(2,l-t)};var jn={pack:Tn,unpack:Bn};var On=function e(t){var r=oe(this);var n=wt(r);var i=arguments.length;var a=mt(i>1?arguments[1]:undefined,n);var s=i>2?arguments[2]:undefined;var o=s===undefined?n:mt(s,n);while(o>a)r[a++]=t;return r};var An=Le.f;var Xn=ge("toStringTag");var kn=function(e,t,r){if(e&&!le(e=r?e:e.prototype,Xn)){An(e,Xn,{configurable:true,value:t})}};var Nn=Xt.f;var Cn=Le.f;var Pn=ct.PROPER;var _n=ct.CONFIGURABLE;var In=it.get;var Ln=it.set;var Mn="ArrayBuffer";var Dn="DataView";var Fn="prototype";var Rn="Wrong length";var Hn="Wrong index";var Wn=i[Mn];var Gn=Wn;var zn=Gn&&Gn[Fn];var Un=i[Dn];var $n=Un&&Un[Fn];var Vn=Object.prototype;var Yn=i.Array;var qn=i.RangeError;var Jn=b(On);var Zn=b([].reverse);var Kn=jn.pack;var Qn=jn.unpack;var ei=function(e){return[e&255]};var ti=function(e){return[e&255,e>>8&255]};var ri=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]};var ni=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]};var ii=function(e){return Kn(e,23,4)};var ai=function(e){return Kn(e,52,8)};var si=function(e,t){Cn(e[Fn],t,{get:function(){return In(this)[t]}})};var oi=function(e,t,r,n){var i=mn(r);var a=In(e);if(i+t>a.byteLength)throw qn(Hn);var s=In(a.buffer).bytes;var o=i+a.byteOffset;var u=mr(s,o,o+t);return n?u:Zn(u)};var ui=function(e,t,r,n,i,a){var s=mn(r);var o=In(e);if(s+t>o.byteLength)throw qn(Hn);var u=In(o.buffer).bytes;var l=s+o.byteOffset;var c=n(+i);for(var f=0;f<t;f++)u[l+f]=c[a?f:t-f-1]};if(!dn){Gn=function e(t){vn(this,zn);var r=mn(t);Ln(this,{bytes:Jn(Yn(r),0),byteLength:r});if(!s)this.byteLength=r};zn=Gn[Fn];Un=function e(t,r,n){vn(this,$n);vn(t,zn);var i=In(t).byteLength;var a=ht(r);if(a<0||a>i)throw qn("Wrong offset");n=n===undefined?i-a:bt(n);if(a+n>i)throw qn(Rn);Ln(this,{buffer:t,byteLength:n,byteOffset:a});if(!s){this.buffer=t;this.byteLength=n;this.byteOffset=a}};$n=Un[Fn];if(s){si(Gn,"byteLength");si(Un,"buffer");si(Un,"byteLength");si(Un,"byteOffset")}pn($n,{getInt8:function e(t){return oi(this,1,t)[0]<<24>>24},getUint8:function e(t){return oi(this,1,t)[0]},getInt16:function e(t){var r=oi(this,2,t,arguments.length>1?arguments[1]:undefined);return(r[1]<<8|r[0])<<16>>16},getUint16:function e(t){var r=oi(this,2,t,arguments.length>1?arguments[1]:undefined);return r[1]<<8|r[0]},getInt32:function e(t){return ni(oi(this,4,t,arguments.length>1?arguments[1]:undefined))},getUint32:function e(t){return ni(oi(this,4,t,arguments.length>1?arguments[1]:undefined))>>>0},getFloat32:function e(t){return Qn(oi(this,4,t,arguments.length>1?arguments[1]:undefined),23)},getFloat64:function e(t){return Qn(oi(this,8,t,arguments.length>1?arguments[1]:undefined),52)},setInt8:function e(t,r){ui(this,1,t,ei,r)},setUint8:function e(t,r){ui(this,1,t,ei,r)},setInt16:function e(t,r){ui(this,2,t,ti,r,arguments.length>2?arguments[2]:undefined)},setUint16:function e(t,r){ui(this,2,t,ti,r,arguments.length>2?arguments[2]:undefined)},setInt32:function e(t,r){ui(this,4,t,ri,r,arguments.length>2?arguments[2]:undefined)},setUint32:function e(t,r){ui(this,4,t,ri,r,arguments.length>2?arguments[2]:undefined)},setFloat32:function e(t,r){ui(this,4,t,ii,r,arguments.length>2?arguments[2]:undefined)},setFloat64:function e(t,r){ui(this,8,t,ai,r,arguments.length>2?arguments[2]:undefined)}})}else{var li=Pn&&Wn.name!==Mn;if(!a((function(){Wn(1)}))||!a((function(){new Wn(-1)}))||a((function(){new Wn;new Wn(1.5);new Wn(NaN);return li&&!_n}))){Gn=function e(t){vn(this,zn);return new Wn(mn(t))};Gn[Fn]=zn;for(var ci=Nn(Wn),fi=0,di;ci.length>fi;){if(!((di=ci[fi++])in Gn)){Me(Gn,di,Wn[di])}}zn.constructor=Gn}else if(li&&_n){Me(Wn,"name",Mn)}if(Kt&&Yt($n)!==Vn){Kt($n,Vn)}var pi=new Un(new Gn(2));var hi=b($n.setInt8);pi.setInt8(0,2147483648);pi.setInt8(1,2147483649);if(pi.getInt8(0)||!pi.getInt8(1))pn($n,{setInt8:function e(t,r){hi(this,t,r<<24>>24)},setUint8:function e(t,r){hi(this,t,r<<24>>24)}},{unsafe:true})}kn(Gn,Mn);kn(Un,Dn);var vi={ArrayBuffer:Gn,DataView:Un};var yi=function(){};var mi=[];var gi=C("Reflect","construct");var bi=/^\s*(?:class|function)\b/;var wi=b(bi.exec);var xi=!bi.exec(yi);var Si=function(e){if(!X(e))return false;try{gi(yi,mi,e);return true}catch(e){return false}};var Ei=function(e){if(!X(e))return false;switch(Rr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return false}return xi||!!wi(bi,Fe(e))};var Ti=!gi||a((function(){var e;return Si(Si.call)||!Si(Object)||!Si((function(){e=true}))||e}))?Ei:Si;var Bi=i.TypeError;var ji=function(e){if(Ti(e))return e;throw Bi(V(e)+" is not a constructor")};var Oi=ge("species");var Ai=function(e,t){var r=Ce(e).constructor;var n;return r===undefined||(n=Ce(r)[Oi])==undefined?t:ji(n)};var Xi=vi.ArrayBuffer;var ki=vi.DataView;var Ni=ki.prototype;var Ci=b(Xi.prototype.slice);var Pi=b(Ni.getUint8);var _i=b(Ni.setUint8);var Ii=a((function(){return!new Xi(2).slice(1,undefined).byteLength}));Gt({target:"ArrayBuffer",proto:true,unsafe:true,forced:Ii},{slice:function e(t,r){if(Ci&&r===undefined){return Ci(Ce(this),t)}var n=Ce(this).byteLength;var i=mt(t,n);var a=mt(r===undefined?n:r,n);var s=new(Ai(this,Xi))(bt(a-i));var o=new ki(this);var u=new ki(s);var l=0;while(i<a){_i(u,l++,Pi(o,i++))}return s}});Gt({target:"Object",stat:true},{fromEntries:function e(t){var r={};qr(t,(function(e,t){hr(r,e,t)}),{AS_ENTRIES:true});return r}});Gt({target:"Object",stat:true},{hasOwn:le});var Li=function(e){var t,r;this.promise=new e((function(e,n){if(t!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");t=e;r=n}));this.resolve=q(t);this.reject=q(r)};var Mi=function(e){return new Li(e)};var Di={f:Mi};var Fi=function(e){try{return{error:false,value:e()}}catch(e){return{error:true,value:e}}};Gt({target:"Promise",stat:true},{allSettled:function e(t){var r=this;var n=Di.f(r);var i=n.resolve;var a=n.reject;var s=Fi((function(){var e=q(r.resolve);var n=[];var a=0;var s=1;qr(t,(function(t){var o=a++;var l=false;s++;u(e,r,t).then((function(e){if(l)return;l=true;n[o]={status:"fulfilled",value:e};--s||i(n)}),(function(e){if(l)return;l=true;n[o]={status:"rejected",reason:e};--s||i(n)}))}));--s||i(n)}));if(s.error)a(s.value);return n.promise}});var Ri="No one promise resolved";Gt({target:"Promise",stat:true},{any:function e(t){var r=this;var n=C("AggregateError");var i=Di.f(r);var a=i.resolve;var s=i.reject;var o=Fi((function(){var e=q(r.resolve);var i=[];var o=0;var l=1;var c=false;qr(t,(function(t){var f=o++;var d=false;l++;u(e,r,t).then((function(e){if(d||c)return;c=true;a(e)}),(function(e){if(d||c)return;d=true;i[f]=e;--l||s(new n(i,Ri))}))}));--l||s(new n(i,Ri))}));if(o.error)s(o.value);return i.promise}});var Hi=i.Promise;var Wi=function(e,t){Ce(e);if(k(t)&&t.constructor===e)return t;var r=Di.f(e);var n=r.resolve;n(t);return r.promise};var Gi=!!Hi&&a((function(){Hi.prototype["finally"].call({then:function(){}},(function(){}))}));Gt({target:"Promise",proto:true,real:true,forced:Gi},{finally:function(e){var t=Ai(this,C("Promise"));var r=X(e);return this.then(r?function(r){return Wi(t,e()).then((function(){return r}))}:e,r?function(r){return Wi(t,e()).then((function(){throw r}))}:e)}});if(!Q&&X(Hi)){var zi=C("Promise").prototype["finally"];if(Hi.prototype["finally"]!==zi){ft(Hi.prototype,"finally",zi,{unsafe:true})}}var Ui=ge("iterator");var $i=false;var Vi,Yi,qi;if([].keys){qi=[].keys();if(!("next"in qi))$i=true;else{Yi=Yt(Yt(qi));if(Yi!==Object.prototype)Vi=Yi}}var Ji=Vi==undefined||a((function(){var e={};return Vi[Ui].call(e)!==e}));if(Ji)Vi={};if(!X(Vi[Ui])){ft(Vi,Ui,(function(){return this}))}var Zi={IteratorPrototype:Vi,BUGGY_SAFARI_ITERATORS:$i};var Ki=Zi.IteratorPrototype;var Qi=function(){return this};var ea=function(e,t,r){var n=t+" Iterator";e.prototype=pr(Ki,{next:h(1,r)});kn(e,n,false,true);Xr[n]=Qi;return e};var ta=ge("match");var ra=function(e){var t;return k(e)&&((t=e[ta])!==undefined?!!t:S(e)=="RegExp")};var na=function(){var e=Ce(this);var t="";if(e.global)t+="g";if(e.ignoreCase)t+="i";if(e.multiline)t+="m";if(e.dotAll)t+="s";if(e.unicode)t+="u";if(e.sticky)t+="y";return t};var ia=b("".charAt);var aa=b("".charCodeAt);var sa=b("".slice);var oa=function(e){return function(t,r){var n=Zr(O(t));var i=ht(r);var a=n.length;var s,o;if(i<0||i>=a)return e?"":undefined;s=aa(n,i);return s<55296||s>56319||i+1===a||(o=aa(n,i+1))<56320||o>57343?e?ia(n,i):s:e?sa(n,i,i+2):(s-55296<<10)+(o-56320)+65536}};var ua={codeAt:oa(false),charAt:oa(true)};var la=ua.charAt;var ca=function(e,t,r){return t+(r?la(e,t).length:1)};var fa=i.RegExp;var da=a((function(){var e=fa("a","y");e.lastIndex=2;return e.exec("abcd")!=null}));var pa=da||a((function(){return!fa("a","y").sticky}));var ha=da||a((function(){var e=fa("^r","gy");e.lastIndex=2;return e.exec("str")!=null}));var va={BROKEN_CARET:ha,MISSED_STICKY:pa,UNSUPPORTED_Y:da};var ya=i.RegExp;var ma=a((function(){var e=ya(".","s");return!(e.dotAll&&e.exec("\n")&&e.flags==="s")}));var ga=i.RegExp;var ba=a((function(){var e=ga("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}));var wa=it.get;var xa=ae("native-string-replace",String.prototype.replace);var Sa=RegExp.prototype.exec;var Ea=Sa;var Ta=b("".charAt);var Ba=b("".indexOf);var ja=b("".replace);var Oa=b("".slice);var Aa=function(){var e=/a/;var t=/b*/g;u(Sa,e,"a");u(Sa,t,"a");return e.lastIndex!==0||t.lastIndex!==0}();var Xa=va.BROKEN_CARET;var ka=/()??/.exec("")[1]!==undefined;var Na=Aa||ka||Xa||ma||ba;if(Na){Ea=function e(t){var r=this;var n=wa(r);var i=Zr(t);var a=n.raw;var s,o,l,c,f,d,p;if(a){a.lastIndex=r.lastIndex;s=u(Ea,a,i);r.lastIndex=a.lastIndex;return s}var h=n.groups;var v=Xa&&r.sticky;var y=u(na,r);var m=r.source;var g=0;var b=i;if(v){y=ja(y,"y","");if(Ba(y,"g")===-1){y+="g"}b=Oa(i,r.lastIndex);if(r.lastIndex>0&&(!r.multiline||r.multiline&&Ta(i,r.lastIndex-1)!=="\n")){m="(?: "+m+")";b=" "+b;g++}o=new RegExp("^(?:"+m+")",y)}if(ka){o=new RegExp("^"+m+"$(?!\\s)",y)}if(Aa)l=r.lastIndex;c=u(Sa,v?o:r,b);if(v){if(c){c.input=Oa(c.input,g);c[0]=Oa(c[0],g);c.index=r.lastIndex;r.lastIndex+=c[0].length}else r.lastIndex=0}else if(Aa&&c){r.lastIndex=r.global?c.index+c[0].length:l}if(ka&&c&&c.length>1){u(xa,c[0],o,(function(){for(f=1;f<arguments.length-2;f++){if(arguments[f]===undefined)c[f]=undefined}}))}if(c&&h){c.groups=d=pr(null);for(f=0;f<h.length;f++){p=h[f];d[p[0]]=c[p[1]]}}return c}}var Ca=Ea;var Pa=i.TypeError;var _a=function(e,t){var r=e.exec;if(X(r)){var n=u(r,e,t);if(n!==null)Ce(n);return n}if(S(e)==="RegExp")return u(Ca,e,t);throw Pa("RegExp#exec called on incompatible receiver")};var Ia=ge("matchAll");var La="RegExp String";var Ma=La+" Iterator";var Da=it.set;var Fa=it.getterFor(Ma);var Ra=RegExp.prototype;var Ha=i.TypeError;var Wa=b(na);var Ga=b("".indexOf);var za=b("".matchAll);var Ua=!!za&&!a((function(){za("a",/./)}));var $a=ea((function e(t,r,n,i){Da(this,{type:Ma,regexp:t,string:r,global:n,unicode:i,done:false})}),La,(function e(){var t=Fa(this);if(t.done)return{value:undefined,done:true};var r=t.regexp;var n=t.string;var i=_a(r,n);if(i===null)return{value:undefined,done:t.done=true};if(t.global){if(Zr(i[0])==="")r.lastIndex=ca(n,bt(r.lastIndex),t.unicode);return{value:i,done:false}}t.done=true;return{value:i,done:false}}));var Va=function(e){var t=Ce(this);var r=Zr(e);var n,i,a,s,o,u;n=Ai(t,RegExp);i=t.flags;if(i===undefined&&P(Ra,t)&&!("flags"in Ra)){i=Wa(t)}a=i===undefined?"":Zr(i);s=new n(n===RegExp?t.source:t,a);o=!!~Ga(a,"g");u=!!~Ga(a,"u");s.lastIndex=bt(t.lastIndex);return new $a(s,r,o,u)};Gt({target:"String",proto:true,forced:Ua},{matchAll:function e(t){var r=O(this);var n,i,a,s;if(t!=null){if(ra(t)){n=Zr(O("flags"in Ra?t.flags:Wa(t)));if(!~Ga(n,"g"))throw Ha("`.matchAll` does not allow non-global regexes")}if(Ua)return za(r,t);a=J(t,Ia);if(a===undefined&&Q&&S(t)=="RegExp")a=Va;if(a)return u(a,t,r)}else if(Ua)return za(r,t);i=Zr(r);s=new RegExp(t,"g");return Q?u(Va,s,i):s[Ia](i)}});Q||Ia in Ra||ft(Ra,Ia,Va);var Ya=Math.floor;var qa=b("".charAt);var Ja=b("".replace);var Za=b("".slice);var Ka=/\$([$&'`]|\d{1,2}|<[^>]*>)/g;var Qa=/\$([$&'`]|\d{1,2})/g;var es=function(e,t,r,n,i,a){var s=r+e.length;var o=n.length;var u=Qa;if(i!==undefined){i=oe(i);u=Ka}return Ja(a,u,(function(a,u){var l;switch(qa(u,0)){case"$":return"$";case"&":return e;case"`":return Za(t,0,r);case"'":return Za(t,s);case"<":l=i[Za(u,1,-1)];break;default:var c=+u;if(c===0)return a;if(c>o){var f=Ya(c/10);if(f===0)return a;if(f<=o)return n[f-1]===undefined?qa(u,1):n[f-1]+qa(u,1);return a}l=n[c-1]}return l===undefined?"":l}))};var ts=ge("replace");var rs=RegExp.prototype;var ns=i.TypeError;var is=b(na);var as=b("".indexOf);var ss=b("".replace);var os=b("".slice);var us=Math.max;var ls=function(e,t,r){if(r>e.length)return-1;if(t==="")return r;return as(e,t,r)};Gt({target:"String",proto:true},{replaceAll:function e(t,r){var n=O(this);var i,a,s,o,l,c,f,d,p;var h=0;var v=0;var y="";if(t!=null){i=ra(t);if(i){a=Zr(O("flags"in rs?t.flags:is(t)));if(!~as(a,"g"))throw ns("`.replaceAll` does not allow non-global regexes")}s=J(t,ts);if(s){return u(s,t,n,r)}else if(Q&&i){return ss(Zr(n),t,r)}}o=Zr(n);l=Zr(t);c=X(r);if(!c)r=Zr(r);f=l.length;d=us(1,f);h=ls(o,l,0);while(h!==-1){p=c?Zr(r(l,h,o)):es(l,o,h,[],undefined,r);y+=os(o,v,h)+p;v=h+f;h=ls(o,l,h+d)}if(v<o.length){y+=os(o,v)}return y}});var cs=ge("iterator");var fs=false;var ds=function(e,t){if(!t&&!fs)return false;var r=false;try{var n={};n[cs]=function(){return{next:function(){return{done:r=true}}}};e(n)}catch(e){}return r};var ps=Le.f;var hs=i.Int8Array;var vs=hs&&hs.prototype;var ys=i.Uint8ClampedArray;var ms=ys&&ys.prototype;var gs=hs&&Yt(hs);var bs=vs&&Yt(vs);var ws=Object.prototype;var xs=i.TypeError;var Ss=ge("toStringTag");var Es=pe("TYPED_ARRAY_TAG");var Ts=pe("TYPED_ARRAY_CONSTRUCTOR");var Bs=dn&&!!Kt&&Rr(i.opera)!=="Opera";var js=false;var Os,As,Xs;var ks={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};var Ns={BigInt64Array:8,BigUint64Array:8};var Cs=function e(t){if(!k(t))return false;var r=Rr(t);return r==="DataView"||le(ks,r)||le(Ns,r)};var Ps=function(e){if(!k(e))return false;var t=Rr(e);return le(ks,t)||le(Ns,t)};var _s=function(e){if(Ps(e))return e;throw xs("Target is not a typed array")};var Is=function(e){if(X(e)&&(!Kt||P(gs,e)))return e;throw xs(V(e)+" is not a typed array constructor")};var Ls=function(e,t,r){if(!s)return;if(r)for(var n in ks){var a=i[n];if(a&&le(a.prototype,e))try{delete a.prototype[e]}catch(e){}}if(!bs[e]||r){ft(bs,e,r?t:Bs&&vs[e]||t)}};var Ms=function(e,t,r){var n,a;if(!s)return;if(Kt){if(r)for(n in ks){a=i[n];if(a&&le(a,e))try{delete a[e]}catch(e){}}if(!gs[e]||r){try{return ft(gs,e,r?t:Bs&&gs[e]||t)}catch(e){}}else return}for(n in ks){a=i[n];if(a&&(!a[e]||r)){ft(a,e,t)}}};for(Os in ks){As=i[Os];Xs=As&&As.prototype;if(Xs)Me(Xs,Ts,As);else Bs=false}for(Os in Ns){As=i[Os];Xs=As&&As.prototype;if(Xs)Me(Xs,Ts,As)}if(!Bs||!X(gs)||gs===Function.prototype){gs=function e(){throw xs("Incorrect invocation")};if(Bs)for(Os in ks){if(i[Os])Kt(i[Os],gs)}}if(!Bs||!bs||bs===ws){bs=gs.prototype;if(Bs)for(Os in ks){if(i[Os])Kt(i[Os].prototype,bs)}}if(Bs&&Yt(ms)!==bs){Kt(ms,bs)}if(s&&!le(bs,Ss)){js=true;ps(bs,Ss,{get:function(){return k(this)?this[Es]:undefined}});for(Os in ks)if(i[Os]){Me(i[Os],Es,Os)}}var Ds={NATIVE_ARRAY_BUFFER_VIEWS:Bs,TYPED_ARRAY_CONSTRUCTOR:Ts,TYPED_ARRAY_TAG:js&&Es,aTypedArray:_s,aTypedArrayConstructor:Is,exportTypedArrayMethod:Ls,exportTypedArrayStaticMethod:Ms,isView:Cs,isTypedArray:Ps,TypedArray:gs,TypedArrayPrototype:bs};var Fs=Ds.NATIVE_ARRAY_BUFFER_VIEWS;var Rs=i.ArrayBuffer;var Hs=i.Int8Array;var Ws=!Fs||!a((function(){Hs(1)}))||!a((function(){new Hs(-1)}))||!ds((function(e){new Hs;new Hs(null);new Hs(1.5);new Hs(e)}),true)||a((function(){return new Hs(new Rs(2),1,undefined).length!==1}));var Gs=Math.floor;var zs=Number.isInteger||function e(t){return!k(t)&&isFinite(t)&&Gs(t)===t};var Us=i.RangeError;var $s=function(e){var t=ht(e);if(t<0)throw Us("The argument can't be less than 0");return t};var Vs=i.RangeError;var Ys=function(e,t){var r=$s(e);if(r%t)throw Vs("Wrong offset");return r};var qs=Ds.aTypedArrayConstructor;var Js=function e(t){var r=ji(this);var n=oe(t);var i=arguments.length;var a=i>1?arguments[1]:undefined;var s=a!==undefined;var o=Wr(n);var l,c,f,d,p,h;if(o&&!Cr(o)){p=zr(n,o);h=p.next;n=[];while(!(d=u(h,p)).done){n.push(d.value)}}if(s&&i>2){a=Ar(a,arguments[2])}c=wt(n);f=new(qs(r))(c);for(l=0;c>l;l++){f[l]=s?a(n[l],l):n[l]}return f};var Zs=ge("species");var Ks=i.Array;var Qs=function(e){var t;if(ln(e)){t=e.constructor;if(Ti(t)&&(t===Ks||ln(t.prototype)))t=undefined;else if(k(t)){t=t[Zs];if(t===null)t=undefined}}return t===undefined?Ks:t};var eo=function(e,t){return new(Qs(e))(t===0?0:t)};var to=b([].push);var ro=function(e){var t=e==1;var r=e==2;var n=e==3;var i=e==4;var a=e==6;var s=e==7;var o=e==5||a;return function(u,l,c,f){var d=oe(u);var p=B(d);var h=Ar(l,c);var v=wt(p);var y=0;var m=f||eo;var g=t?m(u,v):r||s?m(u,0):undefined;var b,w;for(;v>y;y++)if(o||y in p){b=p[y];w=h(b,y,d);if(e){if(t)g[y]=w;else if(w)switch(e){case 3:return true;case 5:return b;case 6:return y;case 2:to(g,b)}else switch(e){case 4:return false;case 7:to(g,b)}}}return a?-1:n||i?i:g}};var no={forEach:ro(0),map:ro(1),filter:ro(2),some:ro(3),every:ro(4),find:ro(5),findIndex:ro(6),filterReject:ro(7)};var io=ge("species");var ao=function(e){var t=C(e);var r=Le.f;if(s&&t&&!t[io]){r(t,io,{configurable:true,get:function(){return this}})}};var so=function(e,t,r){var n,i;if(Kt&&X(n=t.constructor)&&n!==r&&k(i=n.prototype)&&i!==r.prototype)Kt(e,i);return e};var oo=r((function(e){var t=Xt.f;var r=no.forEach;var n=it.get;var a=it.set;var o=Le.f;var l=Xe.f;var c=Math.round;var f=i.RangeError;var d=vi.ArrayBuffer;var p=d.prototype;var v=vi.DataView;var y=Ds.NATIVE_ARRAY_BUFFER_VIEWS;var m=Ds.TYPED_ARRAY_CONSTRUCTOR;var g=Ds.TYPED_ARRAY_TAG;var b=Ds.TypedArray;var w=Ds.TypedArrayPrototype;var x=Ds.aTypedArrayConstructor;var S=Ds.isTypedArray;var E="BYTES_PER_ELEMENT";var T="Wrong length";var B=function(e,t){x(e);var r=0;var n=t.length;var i=new e(n);while(n>r)i[r]=t[r++];return i};var j=function(e,t){o(e,t,{get:function(){return n(this)[t]}})};var O=function(e){var t;return P(p,e)||(t=Rr(e))=="ArrayBuffer"||t=="SharedArrayBuffer"};var A=function(e,t){return S(e)&&!U(t)&&t in e&&zs(+t)&&t>=0};var X=function e(t,r){r=Se(r);return A(t,r)?h(2,t[r]):l(t,r)};var N=function e(t,r,n){r=Se(r);if(A(t,r)&&k(n)&&le(n,"value")&&!le(n,"get")&&!le(n,"set")&&!n.configurable&&(!le(n,"writable")||n.writable)&&(!le(n,"enumerable")||n.enumerable)){t[r]=n.value;return t}return o(t,r,n)};if(s){if(!y){Xe.f=X;Le.f=N;j(w,"buffer");j(w,"byteOffset");j(w,"byteLength");j(w,"length")}Gt({target:"Object",stat:true,forced:!y},{getOwnPropertyDescriptor:X,defineProperty:N});e.exports=function(e,s,l){var p=e.match(/\d+$/)[0]/8;var h=e+(l?"Clamped":"")+"Array";var x="get"+e;var j="set"+e;var A=i[h];var X=A;var N=X&&X.prototype;var C={};var P=function(e,t){var r=n(e);return r.view[x](t*p+r.byteOffset,true)};var _=function(e,t,r){var i=n(e);if(l)r=(r=c(r))<0?0:r>255?255:r&255;i.view[j](t*p+i.byteOffset,r,true)};var I=function(e,t){o(e,t,{get:function(){return P(this,t)},set:function(e){return _(this,t,e)},enumerable:true})};if(!y){X=s((function(e,t,r,n){vn(e,N);var i=0;var s=0;var o,l,c;if(!k(t)){c=mn(t);l=c*p;o=new d(l)}else if(O(t)){o=t;s=Ys(r,p);var h=t.byteLength;if(n===undefined){if(h%p)throw f(T);l=h-s;if(l<0)throw f(T)}else{l=bt(n)*p;if(l+s>h)throw f(T)}c=l/p}else if(S(t)){return B(X,t)}else{return u(Js,X,t)}a(e,{buffer:o,byteOffset:s,byteLength:l,length:c,view:new v(o)});while(i<c)I(e,i++)}));if(Kt)Kt(X,b);N=X.prototype=pr(w)}else if(Ws){X=s((function(e,t,r,n){vn(e,N);return so(function(){if(!k(t))return new A(mn(t));if(O(t))return n!==undefined?new A(t,Ys(r,p),n):r!==undefined?new A(t,Ys(r,p)):new A(t);if(S(t))return B(X,t);return u(Js,X,t)}(),e,X)}));if(Kt)Kt(X,b);r(t(A),(function(e){if(!(e in X)){Me(X,e,A[e])}}));X.prototype=N}if(N.constructor!==X){Me(N,"constructor",X)}Me(N,m,X);if(g){Me(N,g,h)}C[h]=X;Gt({global:true,forced:X!=A,sham:!y},C);if(!(E in X)){Me(X,E,p)}if(!(E in N)){Me(N,E,p)}ao(h)}}else e.exports=function(){}}));oo("Float32",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));oo("Float64",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));oo("Int8",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));oo("Int16",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));oo("Int32",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));oo("Uint8",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));oo("Uint8",(function(e){return function t(r,n,i){return e(this,r,n,i)}}),true);oo("Uint16",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));oo("Uint32",(function(e){return function t(r,n,i){return e(this,r,n,i)}}));var uo=Ds.aTypedArray;var lo=Ds.exportTypedArrayMethod;lo("at",(function e(t){var r=uo(this);var n=wt(r);var i=ht(t);var a=i>=0?i:n+i;return a<0||a>=n?undefined:r[a]}));var co=Ds.exportTypedArrayStaticMethod;co("from",Js,Ws);var fo=Ds.aTypedArrayConstructor;var po=Ds.exportTypedArrayStaticMethod;po("of",(function e(){var t=0;var r=arguments.length;var n=new(fo(this))(r);while(r>t)n[t]=arguments[t++];return n}),Ws);var ho=Math.floor;var vo=function(e,t){var r=e.length;var n=ho(r/2);return r<8?yo(e,t):mo(e,vo(mr(e,0,n),t),vo(mr(e,n),t),t)};var yo=function(e,t){var r=e.length;var n=1;var i,a;while(n<r){a=n;i=e[n];while(a&&t(e[a-1],i)>0){e[a]=e[--a]}if(a!==n++)e[a]=i}return e};var mo=function(e,t,r,n){var i=t.length;var a=r.length;var s=0;var o=0;while(s<i||o<a){e[s+o]=s<i&&o<a?n(t[s],r[o])<=0?t[s++]:r[o++]:s<i?t[s++]:r[o++]}return e};var go=vo;var bo=_.match(/firefox\/(\d+)/i);var wo=!!bo&&+bo[1];var xo=/MSIE|Trident/.test(_);var So=_.match(/AppleWebKit\/(\d+)\./);var Eo=!!So&&+So[1];var To=i.Array;var Bo=Ds.aTypedArray;var jo=Ds.exportTypedArrayMethod;var Oo=i.Uint16Array;var Ao=Oo&&b(Oo.prototype.sort);var Xo=!!Ao&&!(a((function(){Ao(new Oo(2),null)}))&&a((function(){Ao(new Oo(2),{})})));var ko=!!Ao&&!a((function(){if(H)return H<74;if(wo)return wo<67;if(xo)return true;if(Eo)return Eo<602;var e=new Oo(516);var t=To(516);var r,n;for(r=0;r<516;r++){n=r%4;e[r]=515-r;t[r]=r-2*n+3}Ao(e,(function(e,t){return(e/4|0)-(t/4|0)}));for(r=0;r<516;r++){if(e[r]!==t[r])return true}}));var No=function(e){return function(t,r){if(e!==undefined)return+e(t,r)||0;if(r!==r)return-1;if(t!==t)return 1;if(t===0&&r===0)return 1/t>0&&1/r<0?1:-1;return t>r}};jo("sort",(function e(t){if(t!==undefined)q(t);if(ko)return Ao(this,t);return go(Bo(this),No(t))}),!ko||Xo);var Co={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var Po=Be("span").classList;var _o=Po&&Po.constructor&&Po.constructor.prototype;var Io=_o===Object.prototype?undefined:_o;var Lo=ct.PROPER;var Mo=ct.CONFIGURABLE;var Do=Zi.IteratorPrototype;var Fo=Zi.BUGGY_SAFARI_ITERATORS;var Ro=ge("iterator");var Ho="keys";var Wo="values";var Go="entries";var zo=function(){return this};var Uo=function(e,t,r,n,i,a,s){ea(r,t,n);var o=function(e){if(e===i&&p)return p;if(!Fo&&e in f)return f[e];switch(e){case Ho:return function t(){return new r(this,e)};case Wo:return function t(){return new r(this,e)};case Go:return function t(){return new r(this,e)}}return function(){return new r(this)}};var l=t+" Iterator";var c=false;var f=e.prototype;var d=f[Ro]||f["@@iterator"]||i&&f[i];var p=!Fo&&d||o(i);var h=t=="Array"?f.entries||d:d;var v,y,m;if(h){v=Yt(h.call(new e));if(v!==Object.prototype&&v.next){if(Yt(v)!==Do){if(Kt){Kt(v,Do)}else if(!X(v[Ro])){ft(v,Ro,zo)}}kn(v,l,true,true)}}if(Lo&&i==Wo&&d&&d.name!==Wo){if(Mo){Me(f,"name",Wo)}else{c=true;p=function e(){return u(d,this)}}}if(i){y={values:o(Wo),keys:a?p:o(Ho),entries:o(Go)};if(s)for(m in y){if(Fo||c||!(m in f)){ft(f,m,y[m])}}else Gt({target:t,proto:true,forced:Fo||c},y)}if(f[Ro]!==p){ft(f,Ro,p,{name:i})}Xr[t]=p;return y};var $o="Array Iterator";var Vo=it.set;var Yo=it.getterFor($o);var qo=Uo(Array,"Array",(function(e,t){Vo(this,{type:$o,target:A(e),index:0,kind:t})}),(function(){var e=Yo(this);var t=e.target;var r=e.kind;var n=e.index++;if(!t||n>=t.length){e.target=undefined;return{value:undefined,done:true}}if(r=="keys")return{value:n,done:false};if(r=="values")return{value:t[n],done:false};return{value:[n,t[n]],done:false}}),"values");Xr.Arguments=Xr.Array;un("keys");un("values");un("entries");var Jo=ge("iterator");var Zo=ge("toStringTag");var Ko=qo.values;var Qo=function(e,t){if(e){if(e[Jo]!==Ko)try{Me(e,Jo,Ko)}catch(t){e[Jo]=Ko}if(!e[Zo]){Me(e,Zo,t)}if(Co[t])for(var r in qo){if(e[r]!==qo[r])try{Me(e,r,qo[r])}catch(t){e[r]=qo[r]}}}};for(var eu in Co){Qo(i[eu]&&i[eu].prototype,eu)}Qo(Io,"DOMTokenList");var tu=Function.prototype;var ru=tu.apply;var nu=tu.bind;var iu=tu.call;var au=typeof Reflect=="object"&&Reflect.apply||(nu?iu.bind(ru):function(){return iu.apply(ru,arguments)});var su=b([].slice);var ou=/(?:ipad|iphone|ipod).*applewebkit/i.test(_);var uu=S(i.process)=="process";var lu=i.setImmediate;var cu=i.clearImmediate;var fu=i.process;var du=i.Dispatch;var pu=i.Function;var hu=i.MessageChannel;var vu=i.String;var yu=0;var mu={};var gu="onreadystatechange";var bu,wu,xu,Su;try{bu=i.location}catch(e){}var Eu=function(e){if(le(mu,e)){var t=mu[e];delete mu[e];t()}};var Tu=function(e){return function(){Eu(e)}};var Bu=function(e){Eu(e.data)};var ju=function(e){i.postMessage(vu(e),bu.protocol+"//"+bu.host)};if(!lu||!cu){lu=function e(t){var r=su(arguments,1);mu[++yu]=function(){au(X(t)?t:pu(t),undefined,r)};wu(yu);return yu};cu=function e(t){delete mu[t]};if(uu){wu=function(e){fu.nextTick(Tu(e))}}else if(du&&du.now){wu=function(e){du.now(Tu(e))}}else if(hu&&!ou){xu=new hu;Su=xu.port2;xu.port1.onmessage=Bu;wu=Ar(Su.postMessage,Su)}else if(i.addEventListener&&X(i.postMessage)&&!i.importScripts&&bu&&bu.protocol!=="file:"&&!a(ju)){wu=ju;i.addEventListener("message",Bu,false)}else if(gu in Be("script")){wu=function(e){tr.appendChild(Be("script"))[gu]=function(){tr.removeChild(this);Eu(e)}}}else{wu=function(e){setTimeout(Tu(e),0)}}}var Ou={set:lu,clear:cu};var Au=!i.setImmediate||!i.clearImmediate;Gt({global:true,bind:true,enumerable:true,forced:Au},{setImmediate:Ou.set,clearImmediate:Ou.clear});var Xu=/ipad|iphone|ipod/i.test(_)&&i.Pebble!==undefined;var ku=/web0s(?!.*chrome)/i.test(_);var Nu=Xe.f;var Cu=Ou.set;var Pu=i.MutationObserver||i.WebKitMutationObserver;var _u=i.document;var Iu=i.process;var Lu=i.Promise;var Mu=Nu(i,"queueMicrotask");var Du=Mu&&Mu.value;var Fu,Ru,Hu,Wu,Gu,zu,Uu,$u;if(!Du){Fu=function(){var e,t;if(uu&&(e=Iu.domain))e.exit();while(Ru){t=Ru.fn;Ru=Ru.next;try{t()}catch(e){if(Ru)Wu();else Hu=undefined;throw e}}Hu=undefined;if(e)e.enter()};if(!ou&&!uu&&!ku&&Pu&&_u){Gu=true;zu=_u.createTextNode("");new Pu(Fu).observe(zu,{characterData:true});Wu=function(){zu.data=Gu=!Gu}}else if(!Xu&&Lu&&Lu.resolve){Uu=Lu.resolve(undefined);Uu.constructor=Lu;$u=Ar(Uu.then,Uu);Wu=function(){$u(Fu)}}else if(uu){Wu=function(){Iu.nextTick(Fu)}}else{Cu=Ar(Cu,i);Wu=function(){Cu(Fu)}}}var Vu=Du||function(e){var t={fn:e,next:undefined};if(Hu)Hu.next=t;if(!Ru){Ru=t;Wu()}Hu=t};var Yu=i.process;Gt({global:true,enumerable:true,noTargetGet:true},{queueMicrotask:function e(t){var r=uu&&Yu.domain;Vu(r?r.bind(t):t)}})})(this.window=this.window||{});if(window._main_polyfill_core){console.warn("main.polyfill.core is loaded more than once on this page")}window._main_polyfill_core=true;(function(e){"use strict";var t=window.BX;window.BX=function(e){if(window.BX.type.isNotEmptyString(e)){return document.getElementById(e)}if(window.BX.type.isDomNode(e)){return e}if(window.BX.type.isFunction(e)){return window.BX.ready(e)}return null};if(t){Object.keys(t).forEach((e=>{window.BX[e]=t[e]}))}e=window.BX;function r(e){return Object.prototype.toString.call(e)}const n=Function.prototype.toString.call(Object);let i=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isString",value:function e(t){return typeof t==="string"}},{key:"isStringFilled",value:function t(r){return e.isString(r)&&r!==""}},{key:"isFunction",value:function e(t){return typeof t==="function"}},{key:"isObject",value:function e(t){return!!t&&(typeof t==="object"||typeof t==="function")}},{key:"isObjectLike",value:function e(t){return!!t&&typeof t==="object"}},{key:"isPlainObject",value:function t(i){if(!e.isObjectLike(i)||r(i)!=="[object Object]"){return false}const a=Object.getPrototypeOf(i);if(a===null){return true}const s=a.hasOwnProperty("constructor")&&a.constructor;return typeof s==="function"&&Function.prototype.toString.call(s)===n}},{key:"isBoolean",value:function e(t){return t===true||t===false}},{key:"isNumber",value:function e(t){return!Number.isNaN(t)&&typeof t==="number"}},{key:"isInteger",value:function t(r){return e.isNumber(r)&&r%1===0}},{key:"isFloat",value:function t(r){return e.isNumber(r)&&!e.isInteger(r)}},{key:"isNil",value:function e(t){return t===null||t===undefined}},{key:"isArray",value:function t(r){return!e.isNil(r)&&Array.isArray(r)}},{key:"isArrayFilled",value:function t(r){return e.isArray(r)&&r.length>0}},{key:"isArrayLike",value:function t(r){return!e.isNil(r)&&!e.isFunction(r)&&r.length>-1&&r.length<=Number.MAX_SAFE_INTEGER}},{key:"isDate",value:function t(n){return e.isObjectLike(n)&&r(n)==="[object Date]"}},{key:"isDomNode",value:function t(r){return e.isObjectLike(r)&&!e.isPlainObject(r)&&"nodeType"in r}},{key:"isElementNode",value:function t(r){return e.isDomNode(r)&&r.nodeType===Node.ELEMENT_NODE}},{key:"isTextNode",value:function t(r){return e.isDomNode(r)&&r.nodeType===Node.TEXT_NODE}},{key:"isMap",value:function t(n){return e.isObjectLike(n)&&r(n)==="[object Map]"}},{key:"isSet",value:function t(n){return e.isObjectLike(n)&&r(n)==="[object Set]"}},{key:"isWeakMap",value:function t(n){return e.isObjectLike(n)&&r(n)==="[object WeakMap]"}},{key:"isWeakSet",value:function t(n){return e.isObjectLike(n)&&r(n)==="[object WeakSet]"}},{key:"isPrototype",value:function e(t){return(typeof(t&&t.constructor)==="function"&&t.constructor.prototype||Object.prototype)===t}},{key:"isRegExp",value:function t(n){return e.isObjectLike(n)&&r(n)==="[object RegExp]"}},{key:"isNull",value:function e(t){return t===null}},{key:"isUndefined",value:function e(t){return typeof t==="undefined"}},{key:"isArrayBuffer",value:function t(n){return e.isObjectLike(n)&&r(n)==="[object ArrayBuffer]"}},{key:"isTypedArray",value:function t(n){const i=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)]$/;return e.isObjectLike(n)&&i.test(r(n))}},{key:"isBlob",value:function t(r){return e.isObjectLike(r)&&e.isNumber(r.size)&&e.isString(r.type)&&e.isFunction(r.slice)}},{key:"isFile",value:function t(r){return e.isBlob(r)&&e.isString(r.name)&&(e.isNumber(r.lastModified)||e.isObjectLike(r.lastModifiedDate))}},{key:"isFormData",value:function e(t){return t instanceof FormData}}]);return e}();let a=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getClass",value:function e(t){if(i.isString(t)&&!!t){let e=null;let r=window;const n=t.split(".");for(let t=0;t<n.length;t+=1){const i=n[t];if(!r[i]){return null}r=r[i];e=r}return e}if(i.isFunction(t)){return t}return null}},{key:"namespace",value:function e(t){let r=t.split(".");let n=window.BX;if(r[0]==="BX"){r=r.slice(1)}for(let e=0;e<r.length;e+=1){if(i.isUndefined(n[r[e]])){n[r[e]]={}}n=n[r[e]]}return n}}]);return e}();const s=/[&<>'"]/g;const o=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;const u={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};const l={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'};let c=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"encode",value:function e(t){if(i.isString(t)){return t.replace(s,(e=>u[e]))}return t}},{key:"decode",value:function e(t){if(i.isString(t)){return t.replace(o,(e=>l[e]))}return t}},{key:"getRandom",value:function e(t=8){return[...Array(t)].map((()=>(~~(Math.random()*36)).toString(36))).join("")}},{key:"toNumber",value:function e(t){const r=Number.parseFloat(t);if(i.isNumber(r)){return r}return 0}},{key:"toInteger",value:function t(r){return e.toNumber(Number.parseInt(r,10))}},{key:"toBoolean",value:function e(t,r=[]){const n=i.isString(t)?t.toLowerCase():t;return["true","y","1",1,true,...r].includes(n)}},{key:"toCamelCase",value:function e(t){if(!i.isStringFilled(t)){return t}const r=/[-_\s]+(.)?/g;if(!r.test(t)){return t.match(/^[A-Z]+$/)?t.toLowerCase():t[0].toLowerCase()+t.slice(1)}t=t.toLowerCase();t=t.replace(r,(function(e,t){return t?t.toUpperCase():""}));return t[0].toLowerCase()+t.substr(1)}},{key:"toPascalCase",value:function e(t){if(!i.isStringFilled(t)){return t}return this.capitalize(this.toCamelCase(t))}},{key:"toKebabCase",value:function e(t){if(!i.isStringFilled(t)){return t}const r=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);if(!r){return t}return r.map((e=>e.toLowerCase())).join("-")}},{key:"capitalize",value:function e(t){if(!i.isStringFilled(t)){return t}return t[0].toUpperCase()+t.substr(1)}}]);return e}();const f={mousewheel:["DOMMouseScroll"],bxchange:["change","cut","paste","drop","keyup"],animationend:["animationend","oAnimationEnd","webkitAnimationEnd","MSAnimationEnd"],transitionend:["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"],fullscreenchange:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],fullscreenerror:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]};let d=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"registry",new WeakMap)}babelHelpers.createClass(e,[{key:"set",value:function e(t,r,n){const a=this.get(t);if(!i.isSet(a[r])){a[r]=new Set}a[r].add(n);this.registry.set(t,a)}},{key:"get",value:function e(t){return this.registry.get(t)||{}}},{key:"has",value:function e(t,r,n){if(r&&n){return this.registry.has(t)&&this.registry.get(t)[r].has(n)}return this.registry.has(t)}},{key:"delete",value:function e(t,r,n){if(!i.isDomNode(t)){return}if(i.isString(r)&&i.isFunction(n)){const e=this.registry.get(t);if(i.isPlainObject(e)&&i.isSet(e[r])){e[r].delete(n)}return}if(i.isString(r)){const e=this.registry.get(t);if(i.isPlainObject(e)&&i.isSet(e[r])){e[r]=new Set}return}this.registry.delete(t)}}]);return e}();var p=new d;function h(e){let t=false;try{const r=Object.defineProperty({},e,{get(){t=true;return undefined}});window.addEventListener("test",null,r)}catch(e){}return t}function v(e){if(!i.isPlainObject(e)){return e}return Object.keys(e).reduce(((t,r)=>{if(h(r)){t[r]=e[r]}return t}),{})}function y(e,t,r,n){if(!i.isObject(e)||!i.isFunction(e.addEventListener)){return}const a=v(n);if(t in f){f[t].forEach((n=>{e.addEventListener(n,r,a);p.set(e,t,r)}));return}e.addEventListener(t,r,a);p.set(e,t,r)}function m(e,t,r,n){if(!i.isObject(e)||!i.isFunction(e.removeEventListener)){return}const a=v(n);if(t in f){f[t].forEach((t=>{e.removeEventListener(t,r,a);p.delete(e,t,r)}));return}e.removeEventListener(t,r,a);p.delete(e,t,r)}function g(e,t){const r=p.get(e);Object.keys(r).forEach((n=>{r[n].forEach((r=>{if(!i.isString(t)||t===n){m(e,n,r)}}))}))}function b(e,t,r,n){const i=function i(...a){m(e,t,i,n);r(...a)};y(e,t,i,n)}let w=true;function x(){w=true}function S(){w=false}function E(){return w}function T(...e){if(E()&&i.isObject(window.console)){if(i.isFunction(window.console.log)){window.console.log("BX.debug: ",e.length>0?e:e[0]);if(e[0]instanceof Error&&e[0].stack){window.console.log("BX.debug error stack trace",e[0].stack)}}if(i.isFunction(window.console.trace)){console.trace()}}}var B=Object.freeze({get debugState(){return w},enableDebug:x,disableDebug:S,isDebugEnabled:E,default:T});const j=new Map;const O="main.bitrix.main.controller.loadext.getextensions";function A(e){return new Promise((t=>{BX.ajax.runAction(O,{data:e}).then(t)}))}function X(e,t){if(t.isInternal){e.push(t.JS)}return e}function k(e,t){if(!t.isInternal){e.push(t.JS)}return e}function N(e,t){if(i.isString(t)&&t!==""){e.push(t)}return e}function C(e){if(i.isStringFilled(e)){const t=e.match(/<script type="extension\/settings" \b[^>]*>([\s\S]*?)<\/script>/g);if(i.isArrayFilled(t)){return t.map((e=>{const[,t]=e.match(/data-extension="(.[a-z0-9_.-]+)"/);return{extension:t,script:e}}))}}return[]}function P(e){const t=i.isArray(e)?e:[e];if(!t.length){return Promise.resolve()}return new Promise((e=>{BX.load(t,e)}))}function _(e,t,r){I(e,t);t.set(e,r)}function I(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}const L={loaded:false};var M=new WeakMap;var D=new WeakMap;var F=new WeakMap;var R=new WeakMap;let H=function(){function e(t){babelHelpers.classCallCheck(this,e);_(this,M,{writable:true,value:e.State.LOADING});_(this,D,{writable:true,value:""});_(this,F,{writable:true,value:""});_(this,R,{writable:true,value:null});const r={...L,...t};babelHelpers.classPrivateFieldSet(this,D,r.name);babelHelpers.classPrivateFieldSet(this,F,i.isStringFilled(r.namespace)?r.namespace:"window");if(r.loaded){babelHelpers.classPrivateFieldSet(this,M,e.State.LOADED)}}babelHelpers.createClass(e,[{key:"load",value:function t(){if(babelHelpers.classPrivateFieldGet(this,M)===e.State.LOADED&&!babelHelpers.classPrivateFieldGet(this,R)){babelHelpers.classPrivateFieldSet(this,R,Promise.resolve(a.getClass(babelHelpers.classPrivateFieldGet(this,F))))}if(babelHelpers.classPrivateFieldGet(this,R)){return babelHelpers.classPrivateFieldGet(this,R)}babelHelpers.classPrivateFieldSet(this,M,e.State.LOADING);babelHelpers.classPrivateFieldSet(this,R,new Promise((t=>{void A({extension:[babelHelpers.classPrivateFieldGet(this,D)]}).then((r=>{if(!i.isArrayFilled(r.data)){t(window)}const n=r.data.at(0);if(i.isPlainObject(n.config)&&i.isStringFilled(n.config.namespace)){babelHelpers.classPrivateFieldSet(this,F,n.config.namespace)}const s=BX.processHTML(n.html||"");const o=s.SCRIPT.reduce(X,[]);const u=s.SCRIPT.reduce(k,[]);const l=s.STYLE.reduce(N,[]);const c=C(s.HTML);c.forEach((e=>{document.body.insertAdjacentHTML("beforeend",e.script)}));o.forEach((e=>{BX.evalGlobal(e)}));void Promise.all([P(u),P(l)]).then((()=>{babelHelpers.classPrivateFieldSet(this,M,e.State.LOADED);if(babelHelpers.classPrivateFieldGet(this,F)){return a.getClass(babelHelpers.classPrivateFieldGet(this,F))}return window})).then((e=>{t(e)}))}))})));return babelHelpers.classPrivateFieldGet(this,R)}}]);return e}();babelHelpers.defineProperty(H,"State",{LOADED:"LOADED",LOADING:"LOADING"});async function W(...e){const t=e.flat();const r=t.map((e=>{if(j.has(e)){return j.get(e).load()}const t=new H({name:e});j.set(e,t);return t.load()}));return Promise.all(r).then((e=>e.reduce(((e,t)=>{if(i.isPlainObject(t)){return{...e,...t}}return e}),{})))}const G=["[object Object]","[object Array]","[object RegExp]","[object Arguments]","[object Date]","[object Error]","[object Map]","[object Set]","[object ArrayBuffer]","[object DataView]","[object Float32Array]","[object Float64Array]","[object Int8Array]","[object Int16Array]","[object Int32Array]","[object Uint8Array]","[object Uint16Array]","[object Uint32Array]","[object Uint8ClampedArray]"];function z(e){const t=i.isObjectLike(e)&&G.includes(r(e));return t||i.isDomNode(e)}function U(e,t){if(t.has(e)){return t.get(e)}if(z(e)){if(i.isArray(e)){const r=Array.from(e);t.set(e,r);e.forEach(((e,n)=>{r[n]=U(e,t)}));return t.get(e)}if(i.isDomNode(e)){return e.cloneNode(true)}if(i.isMap(e)){const r=new Map;t.set(e,r);e.forEach(((e,n)=>{r.set(U(n,t),U(e,t))}));return r}if(i.isSet(e)){const r=new Set;t.set(e,r);e.forEach((e=>{r.add(U(e,t))}));return r}if(i.isDate(e)){return new Date(e)}if(i.isRegExp(e)){const t=/\w*$/;const r=t.exec(e);let n=new RegExp(e.source);if(r&&i.isArray(r)){n=new RegExp(e.source,r[0])}n.lastIndex=e.lastIndex;return n}const r=Object.getPrototypeOf(e);const n=Object.assign(Object.create(r),e);t.set(e,n);Object.keys(e).forEach((r=>{n[r]=U(e[r],t)}));return n}return e}function $(e){return U(e,new WeakMap)}function V(e,t){return Object.entries(t).reduce(((e,[t,r])=>{if(!i.isDomNode(e[t])&&i.isObjectLike(e[t])&&i.isObjectLike(r)){e[t]=V(e[t],r);return e}e[t]=r;return e}),e)}function Y(e,t=[]){return(r,n)=>{const a=e[0];const s=t[0]||"asc";if(i.isUndefined(a)){return 0}let o=r[a];let u=n[a];if(i.isString(o)&&i.isString(u)){o=o.toLowerCase();u=u.toLowerCase()}if(o<u){return s==="asc"?-1:1}if(o>u){return s==="asc"?1:-1}return Y(e.slice(1),t.slice(1))(r,n)}}function q(e){if(!j.has(e.name)){j.set(e.name,new H(e))}}let J=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"debounce",value:function e(t,r=0,n=null){let a;return function e(...s){if(i.isNumber(a)){clearTimeout(a)}a=setTimeout((()=>{t.apply(n||this,s)}),r)}}},{key:"throttle",value:function e(t,r=0,n=null){let i=0;let a;return function e(...s){a=true;if(!i){const e=function e(){if(a){t.apply(n||this,s);a=false;i=setTimeout(e,r)}else{i=null}};e()}}}},{key:"html",value:function e(t,r,n={}){if(i.isNil(r)&&i.isDomNode(t)){return t.innerHTML}const a=BX.processHTML(r);const s=a.STYLE.reduce(N,[]);const o=a.SCRIPT.reduce(k,[]);const u=a.SCRIPT.reduce(X,[]);if(i.isDomNode(t)){if(n.htmlFirst||!o.length&&!s.length){if(n.useAdjacentHTML){t.insertAdjacentHTML("beforeend",a.HTML)}else{t.innerHTML=a.HTML}}}return Promise.all([P(o),P(s)]).then((()=>{if(i.isDomNode(t)&&(o.length>0||s.length>0)){if(n.useAdjacentHTML){t.insertAdjacentHTML("beforeend",a.HTML)}else{t.innerHTML=a.HTML}}u.forEach((e=>BX.evalGlobal(e)));if(i.isFunction(n.callback)){n.callback()}}))}},{key:"merge",value:function e(...t){if(i.isArray(t[0])){t.unshift([])}else if(i.isObject(t[0])){t.unshift({})}return t.reduce(((e,t)=>V(e,t)),t[0])}},{key:"orderBy",value:function e(t,r=[],n=[]){const i=Y(r,n);return Object.values(t).sort(i)}},{key:"destroy",value:function e(t,r="Object is destroyed"){if(i.isObject(t)){const e=()=>{throw new Error(r)};const n=Object.keys(t);const a=(()=>{const e=Object.getPrototypeOf(t);if(i.isObject(e)){return Object.getOwnPropertyNames(e)}return[]})();const s=[...new Set([...n,...a])];s.filter((e=>{const r=Object.getOwnPropertyDescriptor(t,e);return!/__(.+)__/.test(e)&&(!i.isObject(r)||r.configurable===true)})).forEach((r=>{Object.defineProperty(t,r,{get:e,set:e,configurable:false})}));Object.setPrototypeOf(t,null)}}}]);return e}();babelHelpers.defineProperty(J,"debug",T);babelHelpers.defineProperty(J,"loadExtension",W);babelHelpers.defineProperty(J,"registerExtension",q);babelHelpers.defineProperty(J,"clone",$);const Z=Symbol.for("BX.BaseError.isError");let K=function(){function e(t,r,n){babelHelpers.classCallCheck(this,e);this[Z]=true;this.message="";this.code=null;this.customData=null;this.setMessage(t);this.setCode(r);this.setCustomData(n)}babelHelpers.createClass(e,[{key:"getMessage",value:function e(){return this.message}},{key:"setMessage",value:function e(t){if(i.isString(t)){this.message=t}return this}},{key:"getCode",value:function e(){return this.code}},{key:"setCode",value:function e(t){if(i.isStringFilled(t)||t===null){this.code=t}return this}},{key:"getCustomData",value:function e(){return this.customData}},{key:"setCustomData",value:function e(t){if(!i.isUndefined(t)){this.customData=t}return this}},{key:"toString",value:function e(){const t=this.getCode();const r=this.getMessage();if(!i.isStringFilled(t)&&!i.isStringFilled(r)){return""}else if(!i.isStringFilled(t)){return`Error: ${r}`}else if(!i.isStringFilled(r)){return t}else{return`${t}: ${r}`}}}],[{key:"isError",value:function e(t){return i.isObject(t)&&t[Z]===true}}]);return e}();let Q=function(){function e(t={data:{}}){babelHelpers.classCallCheck(this,e);this.type="";this.data=null;this.target=null;this.compatData=null;this.defaultPrevented=false;this.immediatePropagationStopped=false;this.errors=[];this.setData(t.data);this.setCompatData(t.compatData)}babelHelpers.createClass(e,[{key:"getType",value:function e(){return this.type}},{key:"setType",value:function e(t){if(i.isStringFilled(t)){this.type=t}return this}},{key:"getData",value:function e(){return this.data}},{key:"setData",value:function e(t){if(!i.isUndefined(t)){this.data=t}return this}},{key:"getCompatData",value:function e(){return this.compatData}},{key:"setCompatData",value:function e(t){if(i.isArrayLike(t)){this.compatData=t}return this}},{key:"setTarget",value:function e(t){this.target=t;return this}},{key:"getTarget",value:function e(){return this.target}},{key:"getErrors",value:function e(){return this.errors}},{key:"setError",value:function e(t){if(K.isError(t)){this.errors.push(t)}}},{key:"preventDefault",value:function e(){this.defaultPrevented=true}},{key:"isDefaultPrevented",value:function e(){return this.defaultPrevented}},{key:"stopImmediatePropagation",value:function e(){this.immediatePropagationStopped=true}},{key:"isImmediatePropagationStopped",value:function e(){return this.immediatePropagationStopped}}],[{key:"create",value:function e(t){return new this(t)}}]);return e}();let ee=function(){function e(t={}){babelHelpers.classCallCheck(this,e);this.defaultMaxListeners=i.isNumber(t.defaultMaxListeners)?t.defaultMaxListeners:10;this.eventStore=new WeakMap}babelHelpers.createClass(e,[{key:"add",value:function e(t,r={}){const n=this.getRecordScheme();if(i.isNumber(r.maxListeners)){n.maxListeners=r.maxListeners}this.eventStore.set(t,n);return n}},{key:"get",value:function e(t){return this.eventStore.get(t)}},{key:"getOrAdd",value:function e(t,r={}){return this.get(t)||this.add(t,r)}},{key:"delete",value:function e(t){this.eventStore.delete(t)}},{key:"getRecordScheme",value:function e(){return{eventsMap:new Map,onceMap:new Map,maxListeners:this.getDefaultMaxListeners(),eventsMaxListeners:new Map}}},{key:"getDefaultMaxListeners",value:function e(){return this.defaultMaxListeners}}]);return e}();let te=function(){function e(){babelHelpers.classCallCheck(this,e);this.warnings=new Map;this.printDelayed=J.debounce(this.print.bind(this),500)}babelHelpers.createClass(e,[{key:"add",value:function e(t,r,n){let a=this.warnings.get(t);if(!a){a=Object.create(null);this.warnings.set(t,a)}if(!a[r]){a[r]={}}a[r].size=n.size;if(!i.isArray(a[r].errors)){a[r].errors=[]}a[r].errors.push(new Error)}},{key:"print",value:function e(){this.warnings.forEach((e=>{for(let t in e){console.groupCollapsed("Possible BX.Event.EventEmitter memory leak detected. "+e[t].size+' "'+t+'" listeners added. '+"Use emitter.setMaxListeners() to increase limit.");console.dir(e[t].errors);console.groupEnd()}}));this.clear()}},{key:"clear",value:function e(){this.warnings.clear()}},{key:"printDelayed",value:function e(){}}]);return e}();const re=new ee({defaultMaxListeners:10});const ne=new te;const ie=new Map;const ae={GLOBAL_TARGET:"GLOBAL_TARGET"};re.add(ae,{maxListeners:25});const se=Symbol.for("BX.Event.EventEmitter.isEmitter");const oe=Symbol("namespaceProperty");const ue=Symbol("targetProperty");let le=function(){function e(...t){babelHelpers.classCallCheck(this,e);this[ue]=null;this[oe]=null;this[se]=true;let r=this;if(Object.getPrototypeOf(this)===e.prototype&&t.length>0){if(!i.isObject(t[0])){throw new TypeError(`The "target" argument must be an object.`)}r=t[0];this.setEventNamespace(t[1])}this[ue]=r}babelHelpers.createClass(e,[{key:"setEventNamespace",value:function e(t){if(i.isStringFilled(t)){this[oe]=t}}},{key:"getEventNamespace",value:function e(){return this[oe]}},{key:"subscribe",value:function t(r,n){e.subscribe(this,r,n);return this}},{key:"subscribeFromOptions",value:function t(r,n,a){if(!i.isPlainObject(r)){return}n=i.isPlainObject(n)?e.normalizeAliases(n):{};Object.keys(r).forEach((t=>{const i=e.normalizeListener(r[t]);t=e.normalizeEventName(t);if(n[t]){const{eventName:r}=n[t];e.subscribe(this,r,i,{compatMode:a!==false})}else{e.subscribe(this,t,i,{compatMode:a===true})}}))}},{key:"subscribeOnce",value:function t(r,n){e.subscribeOnce(this,r,n);return this}},{key:"unsubscribe",value:function t(r,n){e.unsubscribe(this,r,n);return this}},{key:"unsubscribeAll",value:function t(r){e.unsubscribeAll(this,r)}},{key:"emit",value:function t(r,n){if(this.getEventNamespace()===null){console.warn("The instance of BX.Event.EventEmitter is supposed to have an event namespace. "+"Use emitter.setEventNamespace() to make events more unique.")}e.emit(this,r,n);return this}},{key:"emitAsync",value:function t(r,n){if(this.getEventNamespace()===null){console.warn("The instance of BX.Event.EventEmitter is supposed to have an event namespace. "+"Use emitter.setEventNamespace() to make events more unique.")}return e.emitAsync(this,r,n)}},{key:"setMaxListeners",value:function t(...r){e.setMaxListeners(this,...r);return this}},{key:"getMaxListeners",value:function t(r){return e.getMaxListeners(this,r)}},{key:"incrementMaxListeners",value:function t(...r){return e.incrementMaxListeners(this,...r)}},{key:"decrementMaxListeners",value:function t(...r){return e.decrementMaxListeners(this,...r)}},{key:"getListeners",value:function t(r){return e.getListeners(this,r)}},{key:"getFullEventName",value:function t(r){if(!i.isStringFilled(r)){throw new TypeError(`The "eventName" argument must be a string.`)}return e.makeFullEventName(this.getEventNamespace(),r)}}],[{key:"makeObservable",value:function t(r,n){if(!i.isObject(r)){throw new TypeError('The "target" argument must be an object.')}if(!i.isStringFilled(n)){throw new TypeError('The "namespace" must be an non-empty string.')}if(e.isEventEmitter(r)){throw new TypeError('The "target" is an event emitter already.')}const a=Object.getPrototypeOf(r);const s=new e;s.setEventNamespace(n);Object.setPrototypeOf(s,a);Object.setPrototypeOf(r,s);Object.getOwnPropertyNames(e.prototype).forEach((t=>{if(["constructor"].includes(t)){return}s[t]=function(...n){return e.prototype[t].apply(r,n)}}))}},{key:"subscribe",value:function e(t,r,n,a){if(i.isString(t)){a=n;n=r;r=t;t=this.GLOBAL_TARGET}if(!i.isObject(t)){throw new TypeError(`The "target" argument must be an object.`)}r=this.normalizeEventName(r);if(!i.isStringFilled(r)){throw new TypeError(`The "eventName" argument must be a string.`)}n=this.normalizeListener(n);a=i.isPlainObject(a)?a:{};const s=this.resolveEventName(r,t,a.useGlobalNaming===true);const{eventsMap:o,onceMap:u}=re.getOrAdd(t);const l=u.get(s);let c=o.get(s);if(c&&c.has(n)||l&&l.has(n)){console.error(`You cannot subscribe the same "${s}" event listener twice.`)}else{if(c){c.set(n,{listener:n,options:a,sort:this.getNextSequenceValue()})}else{c=new Map([[n,{listener:n,options:a,sort:this.getNextSequenceValue()}]]);o.set(s,c)}}const f=this.getMaxListeners(t,r);if(c.size>f){ne.add(t,s,c);ne.printDelayed()}}},{key:"subscribeOnce",value:function e(t,r,n){if(i.isString(t)){n=r;r=t;t=this.GLOBAL_TARGET}if(!i.isObject(t)){throw new TypeError(`The "target" argument must be an object.`)}r=this.normalizeEventName(r);if(!i.isStringFilled(r)){throw new TypeError(`The "eventName" argument must be a string.`)}n=this.normalizeListener(n);const a=this.resolveEventName(r,t);const{eventsMap:s,onceMap:o}=re.getOrAdd(t);const u=s.get(a);let l=o.get(a);if(u&&u.has(n)||l&&l.has(n)){console.error(`You cannot subscribe the same "${a}" event listener twice.`)}else{const e=(...i)=>{this.unsubscribe(t,r,e);l.delete(n);n(...i)};if(l){l.set(n,e)}else{l=new Map([[n,e]]);o.set(a,l)}this.subscribe(t,r,e)}}},{key:"unsubscribe",value:function e(t,r,n,a){if(i.isString(t)){n=r;r=t;t=this.GLOBAL_TARGET}r=this.normalizeEventName(r);if(!i.isStringFilled(r)){throw new TypeError(`The "eventName" argument must be a string.`)}n=this.normalizeListener(n);a=i.isPlainObject(a)?a:{};const s=this.resolveEventName(r,t,a.useGlobalNaming===true);const o=re.get(t);const u=o&&o.eventsMap.get(s);const l=o&&o.onceMap.get(s);if(u){u.delete(n)}if(l){const e=l.get(n);if(e){l.delete(n);u.delete(e)}}}},{key:"unsubscribeAll",value:function e(t,r,n){if(i.isString(t)){r=t;t=this.GLOBAL_TARGET}if(i.isStringFilled(r)){const e=re.get(t);if(e){n=i.isPlainObject(n)?n:{};const a=this.resolveEventName(r,t,n.useGlobalNaming===true);e.eventsMap.delete(a);e.onceMap.delete(a)}}else if(i.isNil(r)){if(t===this.GLOBAL_TARGET){console.error("You cannot unsubscribe all global listeners.")}else{re.delete(t)}}}},{key:"emit",value:function e(t,r,n,a){if(i.isString(t)){a=n;n=r;r=t;t=this.GLOBAL_TARGET}if(!i.isObject(t)){throw new TypeError(`The "target" argument must be an object.`)}r=this.normalizeEventName(r);if(!i.isStringFilled(r)){throw new TypeError(`The "eventName" argument must be a string.`)}a=i.isPlainObject(a)?a:{};const s=this.resolveEventName(r,t,a.useGlobalNaming===true);const o=re.get(this.GLOBAL_TARGET);const u=o&&o.eventsMap.get(s)||new Map;let l=new Set;if(t!==this.GLOBAL_TARGET){const e=re.get(t);l=e&&e.eventsMap.get(s)||new Map}const c=[...u.values(),...l.values()];c.sort((function(e,t){return e.sort-t.sort}));const f=this.prepareEvent(t,s,n);const d=[];for(let e=0;e<c.length;e++){if(f.isImmediatePropagationStopped()){break}const{listener:r,options:n}=c[e];if(u.has(r)||l.has(r)){let e;if(n.compatMode){let n=[];const s=f.getCompatData();if(s!==null){n=a.cloneData===true?J.clone(s):s}else{n=[f]}const o=i.isUndefined(a.thisArg)?t:a.thisArg;e=r.apply(o,n)}else{e=i.isUndefined(a.thisArg)?r(f):r.call(a.thisArg,f)}d.push(e)}}return d}},{key:"emitAsync",value:function e(t,r,n){if(i.isString(t)){n=r;r=t;t=this.GLOBAL_TARGET}return Promise.all(this.emit(t,r,n))}},{key:"prepareEvent",value:function e(t,r,n){let i=n;if(!(n instanceof Q)){i=new Q;i.setData(n)}i.setTarget(this.isEventEmitter(t)?t[ue]:t);i.setType(r);return i}},{key:"getNextSequenceValue",value:function e(){return this.sequenceValue++}},{key:"setMaxListeners",value:function e(...t){let r=this.GLOBAL_TARGET;let n=null;let a=undefined;if(t.length===1){a=t[0]}else if(t.length===2){if(i.isString(t[0])){[n,a]=t}else{[r,a]=t}}else if(t.length>=3){[r,n,a]=t}if(!i.isObject(r)){throw new TypeError(`The "target" argument must be an object.`)}if(n!==null&&!i.isStringFilled(n)){throw new TypeError(`The "eventName" argument must be a string.`)}if(!i.isNumber(a)||a<0){throw new TypeError(`The value of "count" is out of range. It must be a non-negative number. Received ${a}.`)}const s=re.getOrAdd(r);if(i.isStringFilled(n)){const e=this.resolveEventName(n,r);s.eventsMaxListeners.set(e,a)}else{s.maxListeners=a}}},{key:"getMaxListeners",value:function e(t,r){if(i.isString(t)){r=t;t=this.GLOBAL_TARGET}else if(i.isNil(t)){t=this.GLOBAL_TARGET}if(!i.isObject(t)){throw new TypeError(`The "target" argument must be an object.`)}const n=re.get(t);if(n){let e=n.maxListeners;if(i.isStringFilled(r)){const i=this.resolveEventName(r,t);e=n.eventsMaxListeners.get(i)||e}return e}return this.DEFAULT_MAX_LISTENERS}},{key:"addMaxListeners",value:function t(...r){const[n,a,s]=this.destructMaxListenersArgs(...r);const o=Math.max(this.getMaxListeners(n,a)+s,0);if(i.isStringFilled(a)){e.setMaxListeners(n,a,o)}else{e.setMaxListeners(n,o)}return o}},{key:"incrementMaxListeners",value:function e(...t){const[r,n,i]=this.destructMaxListenersArgs(...t);return this.addMaxListeners(r,n,Math.abs(i))}},{key:"decrementMaxListeners",value:function e(...t){const[r,n,i]=this.destructMaxListenersArgs(...t);return this.addMaxListeners(r,n,-Math.abs(i))}},{key:"destructMaxListenersArgs",value:function e(...t){let r=null;let n=1;let a=this.GLOBAL_TARGET;if(t.length===1){if(i.isNumber(t[0])){n=t[0]}else if(i.isString(t[0])){r=t[0]}else{a=t[0]}}else if(t.length===2){if(i.isString(t[0])){[r,n]=t}else if(i.isString(t[1])){[a,r]=t}else{[a,n]=t}}else if(t.length>=3){[a,r,n]=t}if(!i.isObject(a)){throw new TypeError(`The "target" argument must be an object.`)}if(r!==null&&!i.isStringFilled(r)){throw new TypeError(`The "eventName" argument must be a string.`)}if(!i.isNumber(n)){throw new TypeError(`The value of "increment" must be a number.`)}return[a,r,n]}},{key:"getListeners",value:function e(t,r){if(i.isString(t)){r=t;t=this.GLOBAL_TARGET}if(!i.isObject(t)){throw new TypeError(`The "target" argument must be an object.`)}r=this.normalizeEventName(r);if(!i.isStringFilled(r)){throw new TypeError(`The "eventName" argument must be a string.`)}const n=re.get(t);if(!n){return new Map}const a=this.resolveEventName(r,t);return n.eventsMap.get(a)||new Map}},{key:"registerAliases",value:function t(r){r=this.normalizeAliases(r);Object.keys(r).forEach((e=>{ie.set(e,{eventName:r[e].eventName,namespace:r[e].namespace})}));e.mergeEventAliases(r)}},{key:"normalizeAliases",value:function e(t){if(!i.isPlainObject(t)){throw new TypeError(`The "aliases" argument must be an object.`)}const r=Object.create(null);for(let e in t){if(!i.isStringFilled(e)){throw new TypeError(`The alias must be an non-empty string.`)}const n=t[e];if(!n||!i.isStringFilled(n.eventName)||!i.isStringFilled(n.namespace)){throw new TypeError(`The alias options must set the "eventName" and the "namespace".`)}e=this.normalizeEventName(e);r[e]={eventName:n.eventName,namespace:n.namespace}}return r}},{key:"mergeEventAliases",value:function e(t){const r=re.get(this.GLOBAL_TARGET);if(!r){return}Object.keys(t).forEach((e=>{const n=t[e];e=this.normalizeEventName(e);const i=this.makeFullEventName(n.namespace,n.eventName);const a=r.eventsMap.get(e);if(a){const t=r.eventsMap.get(i)||new Map;r.eventsMap.set(i,new Map([...t,...a]));r.eventsMap.delete(e)}const s=r.onceMap.get(e);if(s){const t=r.onceMap.get(i)||new Map;r.onceMap.set(i,new Map([...t,...s]));r.onceMap.delete(e)}const o=r.eventsMaxListeners.get(e);if(o){const t=r.eventsMaxListeners.get(i)||0;r.eventsMaxListeners.set(i,Math.max(t,o));r.eventsMaxListeners.delete(e)}}))}},{key:"isEventEmitter",value:function e(t){return i.isObject(t)&&t[se]===true}},{key:"normalizeEventName",value:function e(t){if(!i.isStringFilled(t)){return""}return t.toLowerCase()}},{key:"normalizeListener",value:function e(t){if(i.isString(t)){t=a.getClass(t)}if(!i.isFunction(t)){throw new TypeError(`The "listener" argument must be of type Function. Received type ${typeof t}.`)}return t}},{key:"resolveEventName",value:function e(t,r,n=false){t=this.normalizeEventName(t);if(!i.isStringFilled(t)){return""}if(this.isEventEmitter(r)&&n!==true){if(r.getEventNamespace()!==null&&t.includes(".")){console.warn(`Possible the wrong event name "${t}".`)}t=r.getFullEventName(t)}else if(ie.has(t)){const{namespace:e,eventName:r}=ie.get(t);t=this.makeFullEventName(e,r)}return t}},{key:"makeFullEventName",value:function e(t,r){const n=i.isStringFilled(t)?`${t}:${r}`:r;return i.isStringFilled(n)?n.toLowerCase():""}}]);return e}();babelHelpers.defineProperty(le,"GLOBAL_TARGET",ae);babelHelpers.defineProperty(le,"DEFAULT_MAX_LISTENERS",re.getDefaultMaxListeners());babelHelpers.defineProperty(le,"sequenceValue",1);let ce=[];e.isReady=false;function fe(t){if(!i.isFunction(t)){return}if(e.isReady){t()}else{ce.push(t)}}b(document,"DOMContentLoaded",(()=>{e.isReady=true;ce.forEach((e=>{e()}));ce=[]}));let de=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(de,"bind",y);babelHelpers.defineProperty(de,"bindOnce",b);babelHelpers.defineProperty(de,"unbind",m);babelHelpers.defineProperty(de,"unbindAll",g);babelHelpers.defineProperty(de,"ready",fe);babelHelpers.defineProperty(de,"EventEmitter",le);babelHelpers.defineProperty(de,"BaseEvent",Q);function pe(e){if(i.isPlainObject(e)||i.isArray(e)){return JSON.stringify(e)}return c.encode(c.decode(e))}function he(e){if(i.isString(e)){const t=c.decode(e);let r;try{r=JSON.parse(t)}catch(e){r=t}if(r===t){if(/^[\d.]+[.]?\d+$/.test(r)){return Number(r)}}if(r==="true"||r==="false"){return Boolean(r)}return r}return e}function ve(){const{documentElement:e,body:t}=document;const r=Math.max(window.pageYOffset||0,e?e.scrollTop:0,t?t.scrollTop:0);const n=Math.max(window.pageXOffset||0,e?e.scrollLeft:0,t?t.scrollLeft:0);return{scrollTop:r,scrollLeft:n}}let ye=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"replace",value:function e(t,r){if(i.isDomNode(t)&&i.isDomNode(r)){if(i.isDomNode(t.parentNode)){t.parentNode.replaceChild(r,t)}}}},{key:"remove",value:function e(t){if(i.isDomNode(t)&&i.isDomNode(t.parentNode)){t.parentNode.removeChild(t)}}},{key:"clean",value:function t(r){if(i.isDomNode(r)){while(r.childNodes.length>0){r.removeChild(r.firstChild)}return}if(i.isString(r)){e.clean(document.getElementById(r))}}},{key:"insertBefore",value:function e(t,r){if(i.isDomNode(t)&&i.isDomNode(r)){if(i.isDomNode(r.parentNode)){r.parentNode.insertBefore(t,r)}}}},{key:"insertAfter",value:function e(t,r){if(i.isDomNode(t)&&i.isDomNode(r)){if(i.isDomNode(r.parentNode)){const e=r.parentNode;if(i.isDomNode(r.nextSibling)){e.insertBefore(t,r.nextSibling);return}e.appendChild(t)}}}},{key:"append",value:function e(t,r){if(i.isDomNode(t)&&i.isDomNode(r)){r.appendChild(t)}}},{key:"prepend",value:function t(r,n){if(i.isDomNode(r)&&i.isDomNode(n)){if(i.isDomNode(n.firstChild)){n.insertBefore(r,n.firstChild);return}e.append(r,n)}}},{key:"hasClass",value:function t(r,n){if(i.isElementNode(r)){if(i.isString(n)){const t=n.trim();if(t.length>0){if(t.includes(" ")){return t.split(" ").every((t=>e.hasClass(r,t)))}if("classList"in r){return r.classList.contains(t)}if(i.isObject(r.className)&&i.isString(r.className.baseVal)){return r.getAttribute("class").split(" ").some((e=>e===t))}}}if(i.isArray(n)&&n.length>0){return n.every((t=>e.hasClass(r,t)))}}return false}},{key:"addClass",value:function t(r,n){if(i.isElementNode(r)){if(i.isString(n)){const t=n.trim();if(t.length>0){if(t.includes(" ")){e.addClass(r,t.split(" "));return}if("classList"in r){r.classList.add(t);return}if(i.isObject(r.className)&&i.isString(r.className.baseVal)){if(r.className.baseVal===""){r.className.baseVal=t;return}const e=r.className.baseVal.split(" ");if(!e.includes(t)){e.push(t);r.className.baseVal=e.join(" ").trim();return}}return}}if(i.isArray(n)){n.forEach((t=>e.addClass(r,t)))}}}},{key:"removeClass",value:function t(r,n){if(i.isElementNode(r)){if(i.isString(n)){const t=n.trim();if(t.length>0){if(t.includes(" ")){e.removeClass(r,t.split(" "));return}if("classList"in r){r.classList.remove(t);return}if(i.isObject(r.className)&&i.isString(r.className.baseVal)){const e=r.className.baseVal.split(" ").filter((e=>e!==t));r.className.baseVal=e.join(" ");return}}}if(i.isArray(n)){n.forEach((t=>e.removeClass(r,t)))}}}},{key:"toggleClass",value:function t(r,n){if(i.isElementNode(r)){if(i.isString(n)){const t=n.trim();if(t.length>0){if(t.includes(" ")){e.toggleClass(r,t.split(" "));return}r.classList.toggle(t);return}}if(i.isArray(n)){n.forEach((t=>e.toggleClass(r,t)))}}}},{key:"style",value:function t(r,n,a){if(i.isElementNode(r)){if(i.isNull(n)){r.removeAttribute("style");return r}if(i.isPlainObject(n)){Object.entries(n).forEach((t=>{const[n,i]=t;e.style(r,n,i)}));return r}if(i.isString(n)){if(i.isUndefined(a)&&r.nodeType!==Node.DOCUMENT_NODE){const e=getComputedStyle(r);if(n in e){return e[n]}return e.getPropertyValue(n)}if(i.isNull(a)||a===""||a==="null"){if(String(n).startsWith("--")){r.style.removeProperty(n);return r}r.style[n]="";return r}if(i.isString(a)||i.isNumber(a)){if(String(n).startsWith("--")){r.style.setProperty(n,a);return r}r.style[n]=a;return r}}}return null}},{key:"adjust",value:function t(r,n={}){if(!r.nodeType){return null}let a=r;if(r.nodeType===Node.DOCUMENT_NODE){a=r.body}if(i.isPlainObject(n)){if(i.isPlainObject(n.attrs)){Object.keys(n.attrs).forEach((e=>{if(e==="class"||e.toLowerCase()==="classname"){a.className=n.attrs[e];return}if(n.attrs[e]==""){a.removeAttribute(e);return}a.setAttribute(e,n.attrs[e])}))}if(i.isPlainObject(n.style)){e.style(a,n.style)}if(i.isPlainObject(n.props)){Object.keys(n.props).forEach((e=>{a[e]=n.props[e]}))}if(i.isPlainObject(n.events)){Object.keys(n.events).forEach((e=>{de.bind(a,e,n.events[e])}))}if(i.isPlainObject(n.dataset)){Object.keys(n.dataset).forEach((e=>{a.dataset[e]=n.dataset[e]}))}if(i.isString(n.children)){n.children=[n.children]}if(i.isArray(n.children)&&n.children.length>0){n.children.forEach((t=>{if(i.isDomNode(t)){e.append(t,a)}if(i.isString(t)){a.insertAdjacentHTML("beforeend",t)}}));return a}if("text"in n&&!i.isNil(n.text)){a.innerText=n.text;return a}if("html"in n&&!i.isNil(n.html)){a.innerHTML=n.html}}return a}},{key:"create",value:function t(r,n={},a=document){let s=r;let o=n;if(i.isObjectLike(r)){o=r;s=r.tag}return e.adjust(a.createElement(s),o)}},{key:"show",value:function e(t){if(i.isDomNode(t)){t.hidden=false}}},{key:"hide",value:function e(t){if(i.isDomNode(t)){t.hidden=true}}},{key:"isShown",value:function e(t){return i.isDomNode(t)&&!t.hidden&&t.style.getPropertyValue("display")!=="none"}},{key:"toggle",value:function t(r){if(i.isDomNode(r)){if(e.isShown(r)){e.hide(r)}else{e.show(r)}}}},{key:"getPosition",value:function e(t){if(i.isDomNode(t)){const e=t.getBoundingClientRect();const{scrollLeft:r,scrollTop:n}=ve();return new DOMRect(e.left+r,e.top+n,e.width,e.height)}return new DOMRect}},{key:"getRelativePosition",value:function t(r,n){if(i.isDomNode(r)&&i.isDomNode(n)){const t=e.getPosition(r);const i=e.getPosition(n);return new DOMRect(t.left-i.left,t.top-i.top,t.width,t.height)}return new DOMRect}},{key:"attr",value:function t(r,n,a){if(i.isElementNode(r)){if(i.isString(n)){if(!i.isNil(a)){return r.setAttribute(n,pe(a))}if(i.isNull(a)){return r.removeAttribute(n)}return he(r.getAttribute(n))}if(i.isPlainObject(n)){return Object.entries(n).forEach((([t,n])=>{e.attr(r,t,n)}))}}return null}}]);return e}();const me=navigator.userAgent.toLowerCase();let ge=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isOpera",value:function e(){return me.includes("opera")}},{key:"isIE",value:function t(){return"attachEvent"in document&&!e.isOpera()}},{key:"isIE6",value:function e(){return me.includes("msie 6")}},{key:"isIE7",value:function e(){return me.includes("msie 7")}},{key:"isIE8",value:function e(){return me.includes("msie 8")}},{key:"isIE9",value:function e(){return"documentMode"in document&&document.documentMode>=9}},{key:"isIE10",value:function e(){return"documentMode"in document&&document.documentMode>=10}},{key:"isSafari",value:function e(){return me.includes("safari")&&!me.includes("chrome")}},{key:"isFirefox",value:function e(){return me.includes("firefox")}},{key:"isChrome",value:function e(){return me.includes("chrome")}},{key:"detectIEVersion",value:function t(){if(e.isOpera()||e.isSafari()||e.isFirefox()||e.isChrome()){return-1}let r=-1;if(!!window.MSStream&&!window.ActiveXObject&&"ActiveXObject"in window){r=11}else if(e.isIE10()){r=10}else if(e.isIE9()){r=9}else if(e.isIE()){r=8}if(r===-1||r===8){if(navigator.appName==="Microsoft Internet Explorer"){const e=new RegExp("MSIE ([0-9]+[.0-9]*)");const t=navigator.userAgent.match(e);if(i.isArrayLike(t)&&t.length>0){r=parseFloat(t[1])}}if(navigator.appName==="Netscape"){r=11;const e=new RegExp("Trident/.*rv:([0-9]+[.0-9]*)");if(e.exec(navigator.userAgent)!=null){const t=navigator.userAgent.match(e);if(i.isArrayLike(t)&&t.length>0){r=parseFloat(t[1])}}}}return r}},{key:"isIE11",value:function t(){return e.detectIEVersion()>=11}},{key:"isMac",value:function e(){return me.includes("macintosh")}},{key:"isWin",value:function e(){return me.includes("windows")}},{key:"isLinux",value:function t(){return me.includes("linux")&&!e.isAndroid()}},{key:"isAndroid",value:function e(){return me.includes("android")}},{key:"isIPad",value:function e(){return me.includes("ipad;")||this.isMac()&&this.isTouchDevice()}},{key:"isIPhone",value:function e(){return me.includes("iphone;")}},{key:"isIOS",value:function t(){return e.isIPad()||e.isIPhone()}},{key:"isMobile",value:function t(){return e.isIPhone()||e.isIPad()||e.isAndroid()||me.includes("mobile")||me.includes("touch")}},{key:"isRetina",value:function e(){return window.devicePixelRatio&&window.devicePixelRatio>=2}},{key:"isTouchDevice",value:function e(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"isDoctype",value:function e(t){const r=t||document;if(r.compatMode){return r.compatMode==="CSS1Compat"}return r.documentElement&&r.documentElement.clientHeight}},{key:"isLocalStorageSupported",value:function e(){try{localStorage.setItem("test","test");localStorage.removeItem("test");return true}catch(e){return false}}},{key:"addGlobalClass",value:function t(r){let n="bx-core";r=i.isElementNode(r)?r:document.documentElement;if(ye.hasClass(r,n)){return}if(e.isIOS()){n+=" bx-ios"}else if(e.isWin()){n+=" bx-win"}else if(e.isMac()){n+=" bx-mac"}else if(e.isLinux()){n+=" bx-linux"}else if(e.isAndroid()){n+=" bx-android"}n+=e.isMobile()?" bx-touch":" bx-no-touch";n+=e.isRetina()?" bx-retina":" bx-no-retina";if(/AppleWebKit/.test(navigator.userAgent)){n+=" bx-chrome"}else if(/Opera/.test(navigator.userAgent)){n+=" bx-opera"}else if(e.isFirefox()){n+=" bx-firefox"}ye.addClass(r,n)}},{key:"detectAndroidVersion",value:function e(){const t=new RegExp("Android ([0-9]+[.0-9]*)");if(t.exec(navigator.userAgent)!=null){const e=navigator.userAgent.match(t);if(i.isArrayLike(e)&&e.length>0){return parseFloat(e[1])}}return 0}},{key:"isPropertySupported",value:function e(t,r){if(t===""){return false}function n(e){return e.replace(/([A-Z])/g,((...e)=>`-${e[1].toLowerCase()}`))}function i(e){const t=/(\\-([a-z]))/g;if(t.test(e)){return e.replace(t,((...e)=>e[2].toUpperCase()))}return e}const a=t.includes("-")?i(t):t;const s=!!r;const o=a.charAt(0).toUpperCase()+a.slice(1);const u=["Webkit","Moz","O","ms"].join(`${o} `);const l=`${a} ${u} ${o}`.split(" ");const c=document.body||document.documentElement;for(let e=0;e<l.length;e+=1){const t=l[e];if(c&&"style"in c&&t in c.style){const e=t.substr(0,t.length-a.length).toLowerCase();const r=t===a?"":`-${e}-`;return s?r+n(a):t}}return false}},{key:"addGlobalFeatures",value:function t(r){if(!i.isArray(r)){return}const n=[];for(let t=0;t<r.length;t+=1){const i=!!e.isPropertySupported(r[t]);n.push(`bx-${i?"":"no-"}${r[t].toLowerCase()}`)}ye.addClass(document.documentElement,n.join(" "))}}]);return e}();let be=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getList",value:function e(){return document.cookie.split(";").map((e=>e.split("="))).map((e=>e.map((e=>e.trim())))).reduce(((e,t)=>{const[r,n]=t;e[decodeURIComponent(r)]=decodeURIComponent(n);return e}),{})}},{key:"get",value:function t(r){const n=e.getList();if(r in n){return n[r]}return undefined}},{key:"set",value:function e(t,r,n={}){const a={expires:"",...n};if(i.isNumber(a.expires)){const e=+new Date;const t=a.expires;const r=864e5;a.expires=new Date(e+t*r)}if(i.isDate(a.expires)){a.expires=a.expires.toUTCString()}const s=decodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);const o=encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);const u=Object.keys(a).reduce(((e,t)=>{const r=a[t];if(!r){return e}if(r===true){return`${e}; ${t}`}return`${e}; ${t}=${r.split(";")[0]}`}),"");document.cookie=`${s}=${o}${u}`}},{key:"remove",value:function t(r,n={}){e.set(r,"",{...n,expires:-1})}}]);return e}();function we(e,t=new FormData,r=null){if(i.isUndefined(e)){return t}if(i.isNull(e)){t.append(r,"")}else if(i.isArray(e)){if(!e.length){const e=`${r}[]`;t.append(e,"")}else{e.forEach(((e,n)=>{const i=`${r}[${n}]`;we(e,t,i)}))}}else if(i.isDate(e)){t.append(r,e.toISOString())}else if(i.isObject(e)&&!i.isFile(e)&&!i.isBlob(e)){Object.keys(e).forEach((n=>{const a=e[n];let s=n;if(i.isArray(a)){while(s.length>2&&s.lastIndexOf("[]")===s.length-2){s=s.substring(0,s.length-2)}}const o=r?`${r}[${s}]`:s;we(a,t,o)}))}else{t.append(r,e)}return t}let xe=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"convertObjectToFormData",value:function e(t){return we(t)}}]);return e}();let Se=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(Se,"Cookie",be);babelHelpers.defineProperty(Se,"Data",xe);function Ee(e){if(i.isString(e)){if(i.isNil(Ee[e])){le.emit("onBXMessageNotFound",new Q({compatData:[e]}));if(i.isNil(Ee[e])){J.debug(`message undefined: ${e}`);Ee[e]=""}}}if(i.isPlainObject(e)){Object.keys(e).forEach((t=>{Ee[t]=e[t]}))}return Ee[e]}if(!i.isNil(window.BX)&&i.isFunction(window.BX.message)){Object.keys(window.BX.message).forEach((e=>{Ee({[e]:window.BX.message[e]})}))}let Te=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getMessage",value:function e(t,r=null){let n=Ee(t);if(i.isString(n)&&i.isPlainObject(r)){const e=e=>String(e).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");Object.keys(r).forEach((t=>{const a=new RegExp(e(t),"gi");n=n.replace(a,(()=>i.isNil(r[t])?"":String(r[t])))}))}return n}},{key:"hasMessage",value:function e(t){return i.isString(t)&&!i.isNil(Ee[t])}},{key:"setMessage",value:function e(t,r){if(i.isString(t)&&i.isString(r)){Ee({[t]:r})}if(i.isObject(t)){Ee(t)}}},{key:"getMessagePlural",value:function e(t,r,n=null){let a="";if(i.isNumber(r)){if(this.hasMessage(`${t}_PLURAL_${this.getPluralForm(r)}`)){a=this.getMessage(`${t}_PLURAL_${this.getPluralForm(r)}`,n)}else{a=this.getMessage(`${t}_PLURAL_1`,n)}}else{a=this.getMessage(t,n)}return a}},{key:"getPluralForm",value:function e(t,r){let n;if(!i.isStringFilled(r)){r=Ee("LANGUAGE_ID")}if(t<0){t=-1*t}switch(r){case"ar":n=t!==1?1:0;break;case"br":case"fr":case"tr":n=t>1?1:0;break;case"de":case"en":case"hi":case"it":case"la":n=t!==1?1:0;break;case"ru":case"ua":if(t%10===1&&t%100!==11){n=0}else if(t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)){n=1}else{n=2}break;case"pl":if(t===1){n=0}else if(t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)){n=1}else{n=2}break;case"id":case"ja":case"ms":case"sc":case"tc":case"th":case"vn":n=0;break;default:n=1;break}return n}}]);return e}();const Be=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function je(e){return Be.includes(e)}const Oe={tag:/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>|{{uid[0-9]+}}/g,comment:/<!--(?!<!)[^\[>].*?-->/g,tagName:/<\/?([^\s]+?)[/\s>]/,attributes:/\s([\w\-_:.]+)\s?\n?=\s?\n?"([^"]+)?"|\s([\w\-_:.]+)\s?\n?=\s?\n?'([^']+)?'|\s([\w\-_:.]+)/gs,placeholder:/{{uid[0-9]+}}/g};function Ae(e){const t={type:"tag",name:"",svg:false,attrs:{},children:[],voidElement:false};if(e.startsWith("\x3c!--")){const t=e.indexOf("--\x3e");const r="\x3c!--".length;return{type:"comment",content:t!==-1?e.slice(r,t):""}}const r=e.match(Oe.tagName);if(i.isArrayFilled(r)){const[,n]=r;t.name=n;t.svg=n==="svg";t.voidElement=je(n)||e.trim().endsWith("/>")}const n=new RegExp(Oe.attributes);for(;;){const r=n.exec(e);if(!i.isNil(r)){const[,e,n]=r;if(!i.isNil(e)){t.attrs[e]=i.isStringFilled(n)?n:""}else{const[,,,e,n]=r;if(!i.isNil(e)){t.attrs[e]=i.isStringFilled(n)?n:""}else{const[,,,,,e]=r;t.attrs[e]=""}}}else{break}}return t}function Xe(e){const t=e.replace(/[\n\r\t]$/,"");const r=t.match(Oe.placeholder);return t.split(Oe.placeholder).reduce(((e,t,n)=>{if(i.isStringFilled(t)){e.push(...t.split(/\n/).reduce(((e,t)=>{const r=t.replace(/[\t\r]/g,"");if(i.isStringFilled(r)){e.push({type:"text",content:r})}return e}),[]))}if(r&&r[n]){e.push({type:"placeholder",uid:parseInt(r[n].replace(/{{uid|}}/,""))})}return e}),[])}function ke(e,t){const r=[];if(e.indexOf("<")!==0&&!e.startsWith("{{")){const t=e.indexOf("<");r.push(...Xe(t===-1?e:e.slice(0,t)))}const n=[];let i=-1;e=e.replace(Oe.comment,(e=>{i+=1;n.push(e.replace(/^<!--|-->$/g,""));return`\x3c!--{{cUid${i}}}--\x3e`}));const a=[];let s=-1;let o;e.replace(Oe.tag,((i,u)=>{const l=u+i.length;const c=e.charAt(l);let f;if(i.startsWith("\x3c!--")){const e=Ae(i,t);e.content=n[i.replace(/<!--{{cUid|}}-->/g,"")];if(s<0){r.push(e);return r}f=a[s];f.children.push(e);return r}if(i.startsWith("{{")){const[e]=Xe(i);if(s<0){r.push(e);return r}f=a[s];f.children.push(e);return r}if(!i.startsWith("</")){s++;o=Ae(i,t);if(!o.voidElement&&c&&c!=="<"){o.children.push(...Xe(e.slice(l,e.indexOf("<",l))))}if(s===0){r.push(o)}f=a[s-1];if(f){if(!o.svg){o.svg=f.svg}f.children.push(o)}a[s]=o}if(i.startsWith("</")||o.voidElement){if(s>-1&&(o.voidElement||o.name===i.slice(2,-1))){s--;o=s===-1?r:a[s]}if(c&&c!=="<"){f=s===-1?r:a[s].children;const t=e.indexOf("<",l);const n=e.slice(l,t===-1?undefined:t);if(t>-1&&s+f.length>=0||n!==" "){f.push(...Xe(n))}}}}));return r}const Ne=(e,t)=>{if(i.isDomNode(e)&&i.isDomNode(t)){if(t.nodeName!=="TEMPLATE"){ye.append(e,t)}else{t.content.append(e)}}};function Ce(e){const{node:t,parentElement:r,substitutions:n,refs:a=[]}=e;if(t.type==="tag"){const e=(()=>{if(t.svg){return document.createElementNS("http://www.w3.org/2000/svg",t.name)}return document.createElement(t.name)})();if(Object.hasOwn(t.attrs,"ref")){a.push([t.attrs.ref,e]);delete t.attrs.ref}Object.entries(t.attrs).forEach((([t,r])=>{if(t.startsWith("on")&&new RegExp(Oe.placeholder).test(r)){const a=n[parseInt(r.replace(/{{uid|}}/,""))-1];if(i.isFunction(a)){const r=t.endsWith("once")?"bindOnce":"bind";de[r](e,t.replace(/^on|once$/g,""),a)}else{e.setAttribute(t,a)}}else{if(new RegExp(Oe.placeholder).test(r)){const i=r.split(/{{|}}/).reduce(((e,t)=>{if(t.startsWith("uid")){const r=n[parseInt(t.replace("uid",""))-1];return`${e}${r}`}return`${e}${t}`}),"");e.setAttribute(t,i)}else{e.setAttribute(t,c.decode(r))}}}));t.children.forEach((t=>{const r=Ce({node:t,parentElement:e,substitutions:n,refs:a});if(i.isArray(r)){r.forEach((t=>{Ne(t,e)}))}else{Ne(r,e)}}));return e}if(t.type==="comment"){return document.createComment(t.content)}if(t.type==="text"){if(r){if(r.nodeName!=="TEMPLATE"){r.insertAdjacentHTML("beforeend",t.content)}else{r.content.append(t.content)}return}return document.createTextNode(t.content)}if(t.type==="placeholder"){return n[t.uid-1]}}function Pe(e,...t){const r=e.reduce(((e,r,n)=>{if(n>0){const a=t[n-1];if(i.isString(a)||i.isNumber(a)){return`${e}${a}${r}`}return`${e}{{uid${n}}}${r}`}return e}),e[0]).replace(/^[\r\n\t\s]+/gm,"").replace(/>[\n]+/g,">").replace(/[}][\n]+/g,"}");const n=ke(r);if(n.length===1){const e=[];const r=Ce({node:n[0],substitutions:t,refs:e});if(i.isArrayFilled(e)){return Object.fromEntries([["root",r],...e])}return r}if(n.length>1){const e=[];const r=n.map((r=>Ce({node:r,substitutions:t,refs:e})));if(i.isArrayFilled(e)){return Object.fromEntries([["root",r],...e])}return r}return false}function _e(e,...t){return t.reduce(((t,r,n)=>{const a=n+1;if(!i.isPlainObject(r)&&!i.isArray(r)){return t+r+e[a]}return`${t}__s${n}${e[a]}`}),e[0]).replace(/[\r\t]/gm,"").split(";\n").map((e=>e.replace(/\n/,""))).reduce(((e,r)=>{if(r!==""){const n=r.match(/^[\w-. ]+:/);const i=r.split(/^[\w-. ]+:/);const a=n[0].replace(":","").trim();const s=i[1].trim();const o=/^__s\d+/;if(o.test(s)){e[a]=t[s.replace("__s","")];return e}e[a]=s}return e}),{})}let Ie=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"safe",value:function e(t,...r){return r.reduce(((e,r,n)=>e+c.encode(r)+t[n+1]),t[0])}},{key:"unsafe",value:function e(t,...r){return r.reduce(((e,r,n)=>e+c.decode(r)+t[n+1]),t[0])}},{key:"style",value:function e(t){if(!i.isDomNode(t)){throw new Error("element is not HTMLElement")}return function e(...r){ye.style(t,_e(...r))}}},{key:"message",value:function e(t,...r){return r.reduce(((e,r,n)=>e+Te.getMessage(r)+t[n+1]),t[0])}},{key:"attrs",value:function e(t){if(!i.isDomNode(t)){throw new Error("element is not HTMLElement")}return function e(...r){ye.attr(t,_e(...r))}}}]);return e}();babelHelpers.defineProperty(Ie,"render",Pe);babelHelpers.defineProperty(Ie,"attr",Ie.attrs);function Le(e){switch(e){case"index":return(e,t,r)=>{const n=/\[(\w*)\]$/.exec(e);const a=e.replace(/\[\w*\]$/,"");if(i.isNil(n)){r[a]=t;return}if(i.isUndefined(r[a])){r[a]={}}r[a][n[1]]=t};case"bracket":return(e,t,r)=>{const n=/(\[\])$/.exec(e);const a=e.replace(/\[\]$/,"");if(i.isNil(n)){r[a]=t;return}if(i.isUndefined(r[a])){r[a]=[t];return}r[a]=[].concat(r[a],t)};default:return(e,t,r)=>{const n=e.replace(/\[\]$/,"");r[n]=t}}}function Me(e){if(/^\w+\[([\w]+)\]$/.test(e)){return"index"}if(/^\w+\[\]$/.test(e)){return"bracket"}return"default"}function De(e){return!String(e).startsWith("__proto__")}function Fe(e){if(!i.isString(e)){return{}}const t=e.trim().replace(/^[?#&]/,"");if(!t){return{}}return{...t.split("&").reduce(((e,t)=>{const[r,n]=t.replace(/\+/g," ").split("=");if(De(r)){const t=Me(r);const i=Le(t);i(r,n,e)}return e}),Object.create(null))}}const Re=/^((\w+):)?(\/\/((\w+)?(:(\w+))?@)?([^\/\?:]+)(:(\d+))?)?(\/?([^\/\?#][^\?#]*)?)?(\?([^#]+))?(#(\w*))?/;function He(e){const t=e.match(Re);if(i.isArray(t)){const r=Fe(t[14]);return{useShort:/^\/\//.test(e),href:t[0]||"",schema:t[2]||"",host:t[8]||"",port:t[10]||"",path:t[11]||"",query:t[14]||"",queryParams:r,hash:t[16]||"",username:t[5]||"",password:t[7]||"",origin:t[8]||""}}return{}}function We(e={}){const t=Object.keys(e).reduce(((t,r)=>{if(i.isArray(e[r])){e[r].forEach((e=>{t.push(`${r}[]=${e}`)}),"")}if(i.isPlainObject(e[r])){Object.keys(e[r]).forEach((n=>{t.push(`${r}[${n}]=${e[r][n]}`)}),"")}if(!i.isObject(e[r])&&!i.isArray(e[r])){t.push(`${r}=${e[r]}`)}return t}),[]).join("&");if(t.length>0){return`?${t}`}return t}function Ge(e){if(i.isArray(e)){return e.map((e=>String(e)))}if(i.isPlainObject(e)){return{...e}}return String(e)}const ze=new WeakMap;let Ue=function(){babelHelpers.createClass(e,null,[{key:"addParam",value:function t(r,n={}){return new e(r).setQueryParams(n).toString()}},{key:"removeParam",value:function t(r,n){const a=i.isArray(n)?n:[n];return new e(r).removeQueryParam(...a).toString()}}]);function e(t=""){babelHelpers.classCallCheck(this,e);ze.set(this,He(t))}babelHelpers.createClass(e,[{key:"getSchema",value:function e(){return ze.get(this).schema}},{key:"setSchema",value:function e(t){ze.get(this).schema=String(t);return this}},{key:"getHost",value:function e(){return ze.get(this).host}},{key:"setHost",value:function e(t){ze.get(this).host=String(t);return this}},{key:"getPort",value:function e(){return ze.get(this).port}},{key:"setPort",value:function e(t){ze.get(this).port=String(t);return this}},{key:"getPath",value:function e(){return ze.get(this).path}},{key:"setPath",value:function e(t){if(!/^\//.test(t)){ze.get(this).path=`/${String(t)}`;return this}ze.get(this).path=String(t);return this}},{key:"getQuery",value:function e(){return We(ze.get(this).queryParams)}},{key:"getQueryParam",value:function e(t){const r=this.getQueryParams();if(Object.hasOwn(r,t)){return r[t]}return null}},{key:"setQueryParam",value:function e(t,r=""){ze.get(this).queryParams[t]=Ge(r);return this}},{key:"getQueryParams",value:function e(){return{...ze.get(this).queryParams}}},{key:"setQueryParams",value:function e(t={}){const r=this.getQueryParams();const n={...r,...t};Object.keys(n).forEach((e=>{n[e]=Ge(n[e])}));ze.get(this).queryParams=n;return this}},{key:"removeQueryParam",value:function e(...t){const r={...ze.get(this).queryParams};t.forEach((e=>{if(Object.hasOwn(r,e)){delete r[e]}}));ze.get(this).queryParams=r;return this}},{key:"getFragment",value:function e(){return ze.get(this).hash}},{key:"setFragment",value:function e(t){ze.get(this).hash=String(t);return this}},{key:"serialize",value:function e(){const t={...ze.get(this)};t.href=this.toString();return t}},{key:"toString",value:function e(){const t={...ze.get(this)};let r=t.schema?`${t.schema}://`:"";if(t.useShort){r="//"}const n=(()=>{if(i.isString(t.port)&&!["","80"].includes(t.port)){return`:${t.port}`}return""})();const a=this.getHost();const s=this.getPath();const o=We(t.queryParams);const u=t.hash?`#${t.hash}`:"";return`${a?r:""}${a}${a?n:""}${s}${o}${u}`}}]);return e}();let $e=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isEmail",value:function e(t){const r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return r.test(String(t).toLowerCase())}}]);return e}();let Ve=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"storage",new Map)}babelHelpers.createClass(e,[{key:"get",value:function e(t,r){if(!this.storage.has(t)){if(i.isFunction(r)){return r()}if(!i.isUndefined(r)){return r}}return this.storage.get(t)}},{key:"set",value:function e(t,r){this.storage.set(t,r)}},{key:"delete",value:function e(t){this.storage.delete(t)}},{key:"has",value:function e(t){return this.storage.has(t)}},{key:"remember",value:function e(t,r){if(!this.storage.has(t)){if(i.isFunction(r)){this.storage.set(t,r())}else if(!i.isUndefined(r)){this.storage.set(t,r)}}return this.storage.get(t)}},{key:"size",value:function e(){return this.storage.size}},{key:"keys",value:function e(){return[...this.storage.keys()]}},{key:"values",value:function e(){return[...this.storage.values()]}}]);return e}();let Ye=function(e){babelHelpers.inherits(t,e);function t(...e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,...e));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(r),"storage",new Map);return r}return t}(Ve);let qe=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"stackKey","BX.Cache.Storage.LsStorage.stack");babelHelpers.defineProperty(this,"stack",null)}babelHelpers.createClass(e,[{key:"getStack",value:function e(){if(i.isPlainObject(this.stack)){return this.stack}const t=localStorage.getItem(this.stackKey);if(i.isString(t)&&t!==""){const e=JSON.parse(t);if(i.isPlainObject(e)){this.stack=e;return this.stack}}this.stack={};return this.stack}},{key:"saveStack",value:function e(){if(i.isPlainObject(this.stack)){const e=JSON.stringify(this.stack);localStorage.setItem(this.stackKey,e)}}},{key:"get",value:function e(t){const r=this.getStack();return r[t]}},{key:"set",value:function e(t,r){const n=this.getStack();n[t]=r;this.saveStack()}},{key:"delete",value:function e(t){const r=this.getStack();if(t in r){delete r[t]}}},{key:"has",value:function e(t){const r=this.getStack();return t in r}},{key:"keys",value:function e(){const t=this.getStack();return Object.keys(t)}},{key:"values",value:function e(){const t=this.getStack();return Object.values(t)}},{key:"size",get:function(){const e=this.getStack();return Object.keys(e).length}}]);return e}();let Je=function(e){babelHelpers.inherits(t,e);function t(...e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,...e));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(r),"storage",new qe);return r}return t}(Ve);let Ze=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(Ze,"BaseCache",Ve);babelHelpers.defineProperty(Ze,"MemoryCache",Ye);babelHelpers.defineProperty(Ze,"LocalStorageCache",Je);function Ke(e){if(i.isStringFilled(e)){return e.split(".").reduce(((e,t)=>{t.split(/\[['"]?(.+?)['"]?\]/g).forEach((t=>{if(i.isStringFilled(t)){e.push(t)}}));return e}),[])}return[]}let Qe=function(){function e(t={}){babelHelpers.classCallCheck(this,e);if(i.isPlainObject(t)){Object.assign(this,t)}}babelHelpers.createClass(e,[{key:"get",value:function e(t,r=null){const n=Ke(t);return n.reduce(((e,t)=>{if(!i.isNil(e)&&e!==r){if(!i.isUndefined(e[t])){return e[t]}return r}return e}),this)}}]);return e}();function et(e){if(i.isObject(e)){Object.values(e).forEach((e=>{et(e)}));return Object.freeze(e)}return e}const tt=new Map;let rt=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getSettings",value:function e(t){if(i.isStringFilled(t)){if(tt.has(t)){return tt.get(t)}const e=document.querySelector(`script[data-extension="${t}"]`);if(i.isDomNode(e)){const r=(()=>{try{return new Qe(JSON.parse(e.innerHTML))}catch(e){return new Qe}})();const n=et(r);tt.set(t,n);return n}}return et(new Qe)}}]);return e}();let nt;function it(e,t){at(e,t);t.add(e)}function at(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function st(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var ot=new WeakSet;nt=Symbol.iterator;let ut=function(){function e(t=null){babelHelpers.classCallCheck(this,e);it(this,ot);babelHelpers.defineProperty(this,"comparator",null);babelHelpers.defineProperty(this,"items",[]);this.comparator=i.isFunction(t)?t:null}babelHelpers.createClass(e,[{key:"add",value:function e(t){let r=-1;if(this.comparator){r=st(this,ot,lt).call(this,t);this.items.splice(r,0,t)}else{this.items.push(t)}return r}},{key:"has",value:function e(t){return this.items.includes(t)}},{key:"getIndex",value:function e(t){return this.items.indexOf(t)}},{key:"getByIndex",value:function e(t){if(i.isNumber(t)&&t>=0){const e=this.items[t];return i.isUndefined(e)?null:e}return null}},{key:"getFirst",value:function e(){const t=this.items[0];return i.isUndefined(t)?null:t}},{key:"getLast",value:function e(){const t=this.items[this.count()-1];return i.isUndefined(t)?null:t}},{key:"count",value:function e(){return this.items.length}},{key:"delete",value:function e(t){const r=this.getIndex(t);if(r!==-1){this.items.splice(r,1);return true}return false}},{key:"clear",value:function e(){this.items=[]}},{key:nt,value:function(){return this.items[Symbol.iterator]()}},{key:"forEach",value:function e(t,r){return this.items.forEach(t,r)}},{key:"getAll",value:function e(){return this.items}},{key:"getComparator",value:function e(){return this.comparator}},{key:"sort",value:function e(){const t=this.getComparator();if(t===null){return}const r=this.items.length;const n=new Array(r);for(let e=0;e<r;e++){n[e]=e}n.sort(((e,r)=>t(this.items[e],this.items[r])||e-r));for(let e=0;e<r;e++){n[e]=this.items[n[e]]}for(let e=0;e<r;e++){this.items[e]=n[e]}}}]);return e}();function lt(e){let t=0;let r=this.items.length;while(t<r){const n=Math.floor((t+r)/2);if(this.comparator(this.items[n],e)>=0){r=n}else{t=n+1}}return t}let ct=function(e){babelHelpers.inherits(t,e);function t(e,r={}){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"sort",0);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"alwaysOnTop",false);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"zIndex",0);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"element",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"overlay",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"overlayGap",-5);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"stack",null);n.setEventNamespace("BX.Main.ZIndexManager.Component");if(!i.isElementNode(e)){throw new Error("ZIndexManager.Component: The argument 'element' must be a DOM element.")}n.element=e;const a=i.isPlainObject(r)?r:{};n.setAlwaysOnTop(a.alwaysOnTop);n.setOverlay(a.overlay);n.setOverlayGap(a.overlayGap);n.subscribeFromOptions(a.events);return n}babelHelpers.createClass(t,[{key:"getSort",value:function e(){return this.sort}},{key:"setSort",value:function e(t){if(i.isNumber(t)){this.sort=t}}},{key:"setStack",value:function e(t){this.stack=t}},{key:"getStack",value:function e(){return this.stack}},{key:"getZIndex",value:function e(){return this.zIndex}},{key:"setZIndex",value:function e(t){const r=this.getZIndex()!==t;this.getElement().style.setProperty("z-index",t,"important");this.zIndex=t;if(this.getOverlay()!==null){this.getOverlay().style.setProperty("z-index",t+this.getOverlayGap(),"important")}if(r){this.emit("onZIndexChange",{component:this})}}},{key:"getAlwaysOnTop",value:function e(){return this.alwaysOnTop}},{key:"setAlwaysOnTop",value:function e(t){if(i.isNumber(t)||i.isBoolean(t)){this.alwaysOnTop=t}}},{key:"getElement",value:function e(){return this.element}},{key:"setOverlay",value:function e(t,r){if(i.isElementNode(t)||t===null){this.overlay=t;this.setOverlayGap(r);if(this.getStack()){this.getStack().sort()}}}},{key:"getOverlay",value:function e(){return this.overlay}},{key:"setOverlayGap",value:function e(t){if(i.isNumber(t)){this.overlayGap=t}}},{key:"getOverlayGap",value:function e(){return this.overlayGap}}]);return t}(le);let ft=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"container",null);babelHelpers.defineProperty(this,"components",null);babelHelpers.defineProperty(this,"elements",new WeakMap);babelHelpers.defineProperty(this,"baseIndex",1e3);babelHelpers.defineProperty(this,"baseStep",50);babelHelpers.defineProperty(this,"sortCount",0);if(!i.isDomNode(t)){throw new Error("ZIndexManager.Stack: The 'container' argument must be a DOM element.")}this.container=t;const r=(e,t)=>{let r=(e.getAlwaysOnTop()||0)-(t.getAlwaysOnTop()||0);if(!r){r=e.getSort()-t.getSort()}return r};this.components=new ut(r)}babelHelpers.createClass(e,[{key:"getBaseIndex",value:function e(){return this.baseIndex}},{key:"setBaseIndex",value:function e(t){if(i.isNumber(t)&&t>=0){this.baseIndex=t;this.sort()}}},{key:"setBaseStep",value:function e(t){if(i.isNumber(t)&&t>0){this.baseStep=t;this.sort()}}},{key:"getBaseStep",value:function e(){return this.baseStep}},{key:"register",value:function e(t,r={}){if(this.getComponent(t)){console.warn("ZIndexManager: You cannot register the element twice.",t);return this.getComponent(t)}const n=new ct(t,r);n.setStack(this);n.setSort(++this.sortCount);this.elements.set(t,n);this.components.add(n);this.sort();return n}},{key:"unregister",value:function e(t){const r=this.elements.get(t);this.components.delete(r);this.elements.delete(t);this.sort()}},{key:"getComponent",value:function e(t){return this.elements.get(t)||null}},{key:"getComponents",value:function e(){return this.components.getAll()}},{key:"getMaxZIndex",value:function e(){const t=this.components.getLast();return t?t.getZIndex():this.baseIndex}},{key:"sort",value:function e(){this.components.sort();let t=this.baseIndex;this.components.forEach((e=>{e.setZIndex(t);t+=this.baseStep}))}},{key:"bringToFront",value:function e(t){const r=this.getComponent(t);if(!r){console.error("ZIndexManager: element was not found in the stack.",t);return null}r.setSort(++this.sortCount);this.sort();return r}}]);return e}();function dt(e,t,r){pt(e,t);return r}function pt(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}let ht=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"register",value:function t(r,n={}){const i=dt(this,e,vt).call(this,r);if(!i){return null}const a=this.getOrAddStack(i);return a.register(r,n)}},{key:"unregister",value:function t(r){const n=dt(this,e,vt).call(this,r);const i=this.getStack(n);if(i){i.unregister(r)}}},{key:"addStack",value:function e(t){const r=new ft(t);this.stacks.set(t,r);return r}},{key:"getStack",value:function e(t){return this.stacks.get(t)||null}},{key:"getOrAddStack",value:function e(t){return this.getStack(t)||this.addStack(t)}},{key:"getComponent",value:function t(r){const n=dt(this,e,vt).call(this,r,true);if(!n){return null}const i=this.getStack(n);return i?i.getComponent(r):null}},{key:"bringToFront",value:function t(r){const n=dt(this,e,vt).call(this,r);const i=this.getStack(n);if(i){return i.bringToFront(r)}return null}}]);return e}();function vt(e,t=false){if(!i.isElementNode(e)){if(!t){console.error("ZIndexManager: The argument 'element' must be a DOM element.",e)}return null}else if(!i.isElementNode(e.parentNode)){if(!t){console.error("ZIndexManager: The 'element' doesn't have a parent node.",e)}return null}return e.parentNode}babelHelpers.defineProperty(ht,"stacks",new WeakMap);var yt={OrderedArray:ut,SettingsCollection:Qe};function mt(e){if(i.isString(e)){return document.getElementById(e)}return e}function gt(e){if(i.isElementNode(e)){return e.ownerDocument.parentWindow||e.ownerDocument.defaultView||window}if(i.isDomNode(e)){return e.parentWindow||e.defaultView||window}return window}const{getClass:bt,namespace:wt}=a;const xt=Ee;const{replace:St,remove:Et,clean:Tt,insertBefore:Bt,insertAfter:jt,append:Ot,prepend:At,style:Xt,adjust:kt,create:Nt,isShown:Ct}=ye;const Pt=function e(){ye.addClass(...J.merge([],Array.from(arguments),[mt(arguments[0])]))};const _t=function e(){ye.removeClass(...J.merge(Array.from(arguments),[mt(arguments[0])]))};const It=function e(){return ye.hasClass(...J.merge(Array.from(arguments),[mt(arguments[0])]))};const Lt=function e(){ye.toggleClass(...J.merge(Array.from(arguments),[mt(arguments[0])]))};const Mt=(e,t=false)=>{const r=mt(e);if(i.isDomNode(r)){ye.clean(r);if(t){ye.remove(r);return r}}return r};const Dt=Se.Cookie.get;const Ft=(e,t,r={})=>{const n={...r};if(i.isNumber(n.expires)){n.expires/=3600*24}Se.Cookie.set(e,t,n)};const{bind:Rt,unbind:Ht,unbindAll:Wt,bindOnce:Gt,ready:zt}=de;const{debugState:Ut,isDebugEnabled:$t,default:Vt}=B;const Yt=e=>{if(e){x()}else{S()}};const{clone:qt,loadExtension:Jt,debounce:Zt,throttle:Kt,html:Qt}=J;const er={...Object.getOwnPropertyNames(i).filter((e=>!["name","length","prototype","caller","arguments"].includes(e))).reduce(((e,t)=>{e[t]=i[t];return e}),{}),isNotEmptyString:e=>i.isString(e)&&e!=="",isNotEmptyObject:e=>i.isObjectLike(e)&&Object.keys(e).length>0,isMapKey:i.isObject,stringToInt:e=>{const t=parseInt(e);return!Number.isNaN(t)?t:0}};const tr={IsOpera:ge.isOpera,IsIE:ge.isIE,IsIE6:ge.isIE6,IsIE7:ge.isIE7,IsIE8:ge.isIE8,IsIE9:ge.isIE9,IsIE10:ge.isIE10,IsIE11:ge.isIE11,IsSafari:ge.isSafari,IsFirefox:ge.isFirefox,IsChrome:ge.isChrome,DetectIeVersion:ge.detectIEVersion,IsMac:ge.isMac,IsAndroid:ge.isAndroid,isIPad:ge.isIPad,isIPhone:ge.isIPhone,IsIOS:ge.isIOS,IsMobile:ge.isMobile,isRetina:ge.isRetina,IsDoctype:ge.isDoctype,SupportLocalStorage:ge.isLocalStorageSupported,addGlobalClass:ge.addGlobalClass,DetectAndroidVersion:ge.detectAndroidVersion,isPropertySupported:ge.isPropertySupported,addGlobalFeatures:ge.addGlobalFeatures};const rr=window.BX?window.BX.ajax:()=>{};function nr(e=document){return{scrollWidth:e.documentElement.scrollWidth,scrollHeight:e.documentElement.scrollHeight}}function ir(e=document){const t=gt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ar(e=document){const t=gt(e);return{innerWidth:t.innerWidth,innerHeight:t.innerHeight}}function sr(e=document){return{...ar(e),...ir(e),...nr(e)}}function or(e){return gt(e)}function ur(e,t=false){if(!e){return(new DOMRect).toJSON()}if(e.ownerDocument===document&&!t){const t=e.getBoundingClientRect();const r=document.documentElement;const{body:n}=document;return{top:Math.round(t.top+(r.scrollTop||n.scrollTop)),left:Math.round(t.left+(r.scrollLeft||n.scrollLeft)),width:Math.round(t.right-t.left),height:Math.round(t.bottom-t.top),right:Math.round(t.right+(r.scrollLeft||n.scrollLeft)),bottom:Math.round(t.bottom+(r.scrollTop||n.scrollTop))}}let r=0;let n=0;const i=e.offsetWidth;const a=e.offsetHeight;let s=true;for(;e!=null;e=e.offsetParent){if(!s&&t&&BX.is_relative(e)){break}r+=e.offsetLeft;n+=e.offsetTop;if(s){s=false;continue}r+=c.toNumber(ye.style(e,"border-left-width"));n+=c.toNumber(ye.style(e,"border-top-width"))}return new DOMRect(r,n,i,a).toJSON()}function lr(e,t,r){if(i.isString(e)){r=t;t=e;e=le.GLOBAL_TARGET}if(e===window){e=le.GLOBAL_TARGET}if(!i.isObject(e)){console.error('The "eventObject" argument must be an object. Received type '+typeof e+".");return}if(!i.isStringFilled(t)){console.error('The "eventName" argument must be a string.');return}if(!i.isFunction(r)){console.error('The "eventHandler" argument must be a function. Received type '+typeof r+".");return}t=t.toLowerCase();le.subscribe(e,t,r,{compatMode:true,useGlobalNaming:true})}function cr(e,t,r,n){if(i.isString(e)){n=r;r=t;t=e;e=le.GLOBAL_TARGET}if(!i.isObject(e)||e===window){e=le.GLOBAL_TARGET}if(!r){r=[]}t=t.toLowerCase();const a=new Q;a.setData(r);a.setCompatData(r);le.emit(e,t,a,{cloneData:n===true,useGlobalNaming:true})}function fr(e,t,r){if(i.isString(e)){r=t;t=e;e=le.GLOBAL_TARGET}if(!i.isFunction(r)){console.error('The "eventHandler" argument must be a function. Received type '+typeof r+".");return}if(e===window){e=le.GLOBAL_TARGET}t=t.toLowerCase();le.unsubscribe(e,t,r,{useGlobalNaming:true})}function dr(e,t){if(i.isString(e)){t=e;e=le.GLOBAL_TARGET}if(e===window){e=le.GLOBAL_TARGET}t=t.toLowerCase();le.unsubscribeAll(e,t,{useGlobalNaming:true})}if(typeof global==="object"&&global.window&&global.window.BX){Object.assign(global.window.BX,e)}e.Type=i;e.Reflection=a;e.Text=c;e.Dom=ye;e.Browser=ge;e.Event=de;e.Http=Se;e.Runtime=J;e.Loc=Te;e.Tag=Ie;e.Uri=Ue;e.Validation=$e;e.Cache=Ze;e.BaseError=K;e.Extension=rt;e.ZIndexManager=ht;e.Collections=yt;e.getClass=bt;e.namespace=wt;e.message=xt;e.replace=St;e.remove=Et;e.clean=Tt;e.insertBefore=Bt;e.insertAfter=jt;e.append=Ot;e.prepend=At;e.style=Xt;e.adjust=kt;e.create=Nt;e.isShown=Ct;e.addClass=Pt;e.removeClass=_t;e.hasClass=It;e.toggleClass=Lt;e.cleanNode=Mt;e.getCookie=Dt;e.setCookie=Ft;e.bind=Rt;e.unbind=Ht;e.unbindAll=Wt;e.bindOnce=Gt;e.ready=zt;e.debugEnableFlag=Ut;e.debugStatus=$t;e.debug=Vt;e.debugEnable=Yt;e.clone=qt;e.loadExt=Jt;e.debounce=Zt;e.throttle=Kt;e.html=Qt;e.type=er;e.browser=tr;e.ajax=rr;e.GetWindowScrollSize=nr;e.GetWindowScrollPos=ir;e.GetWindowInnerSize=ar;e.GetWindowSize=sr;e.GetContext=or;e.pos=ur;e.addCustomEvent=lr;e.onCustomEvent=cr;e.removeCustomEvent=fr;e.removeAllCustomEvents=dr})(this.BX=this.BX||{});(function(BX){var proxyList=new WeakMap;var deferList=new WeakMap;var deniedEvents=[];var customEvents=new WeakMap;var customEventsCnt=0;var garbageCollectors=[];var cssList=[];var cssInit=false;var jsList=[];var jsInit=false;var eventTypes={click:"MouseEvent",dblclick:"MouseEvent",mousedown:"MouseEvent",mousemove:"MouseEvent",mouseout:"MouseEvent",mouseover:"MouseEvent",mouseup:"MouseEvent",focus:"MouseEvent",blur:"MouseEvent"};var lastWait=[];var CHECK_FORM_ELEMENTS={tagName:/^INPUT|SELECT|TEXTAREA|BUTTON$/i};BX.MSLEFT=1;BX.MSMIDDLE=2;BX.MSRIGHT=4;BX.AM_PM_UPPER=1;BX.AM_PM_LOWER=2;BX.AM_PM_NONE=false;BX.ext=function(e){for(var t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}};var r={script:/<script([^>]*)>/gi,script_end:/<\/script>/gi,script_src:/src=["\']([^"\']+)["\']/i,script_type:/type=["\']([^"\']+)["\']/i,space:/\s+/,ltrim:/^[\s\r\n]+/g,rtrim:/[\s\r\n]+$/g,style:/<link.*?(rel="stylesheet"|type="text\/css")[^>]*>/i,style_href:/href=["\']([^"\']+)["\']/i};BX.processHTML=function(e,t){var n,i,a,s,o,u=[],l=[];var c=[];var f=r.script.lastIndex=r.script_end.lastIndex=0;while((n=r.script.exec(e))!==null){r.script_end.lastIndex=r.script.lastIndex;var d=r.script_end.exec(e);if(d===null){break}var p=false;if((o=n[1].match(r.script_type))!==null){if(o[1]=="text/html"||o[1]=="text/template"||o[1]=="extension/settings"){p=true}}if(p){c.push([f,r.script_end.lastIndex-f])}else{c.push([f,n.index-f]);var h=t||n[1].indexOf("bxrunfirst")!="-1";if((a=n[1].match(r.script_src))!==null){u.push({bRunFirst:h,isInternal:false,JS:a[1]})}else{var v=n.index+n[0].length;var y=e.substr(v,d.index-v);u.push({bRunFirst:h,isInternal:true,JS:y})}}f=d.index+9;r.script.lastIndex=f}c.push([f,f===0?e.length:e.length-f]);var m="";for(var g=0,b=c.length;g<b;g++){if(BX.type.isString(e)&&BX.type.isFunction(e.substr)){m+=e.substr(c[g][0],c[g][1])}}while((i=m.match(r.style))!==null){if((s=i[0].match(r.style_href))!==null&&i[0].indexOf('media="')<0){l.push(s[1])}m=m.replace(i[0],"")}return{HTML:m,SCRIPT:u,STYLE:l}};BX.extend=function(e,t){var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e;e.superclass=t.prototype;e.prototype.superclass=t.prototype;if(t.prototype.constructor==Object.prototype.constructor){t.prototype.constructor=t}};BX.is_subclass_of=function(e,t){if(e instanceof t)return true;if(t.superclass)return BX.is_subclass_of(e,t.superclass);return false};BX.clearNodeCache=function(){return false};BX.bitrix_sessid=function(){return BX.message("bitrix_sessid")};BX.createFragment=function(e){var t=document.createDocumentFragment();if(!BX.type.isArray(e)){return t}for(var r=0;r<e.length;r++){t.appendChild(e[r])}return t};BX.setOpacity=function(e,t){var r=parseFloat(t);if(!isNaN(r)&&BX.type.isDomNode(e)){r=r<1?r:r/100;BX.style(e,"opacity",r)}};BX.hoverEvents=function(e){if(e)return BX.adjust(e,{events:BX.hoverEvents()});else return{mouseover:BX.hoverEventsHover,mouseout:BX.hoverEventsHout}};BX.hoverEventsHover=function(){BX.addClass(this,"bx-hover");this.BXHOVER=true};BX.hoverEventsHout=function(){BX.removeClass(this,"bx-hover");this.BXHOVER=false};BX.focusEvents=function(e){if(e)return BX.adjust(e,{events:BX.focusEvents()});else return{mouseover:BX.focusEventsFocus,mouseout:BX.focusEventsBlur}};BX.focusEventsFocus=function(){BX.addClass(this,"bx-focus");this.BXFOCUS=true};BX.focusEventsBlur=function(){BX.removeClass(this,"bx-focus");this.BXFOCUS=false};BX.setUnselectable=function(e){BX.style(e,{userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none"});e.setAttribute("unSelectable","on")};BX.setSelectable=function(e){BX.style(e,{userSelect:null,MozUserSelect:null,WebkitUserSelect:null,KhtmlUserSelect:null});e.removeAttribute("unSelectable")};BX.styleIEPropertyName=function(e){if(e=="float")e=BX.browser.IsIE()?"styleFloat":"cssFloat";else{var t=BX.browser.isPropertySupported(e);if(t){e=t}else{var r=/(\-([a-z]){1})/g;if(r.test(e)){e=e.replace(r,(function(){return arguments[2].toUpperCase()}))}}}return e};BX.focus=function(e){try{e.focus();return true}catch(e){return false}};BX.firstChild=function(e){return BX.type.isDomNode(e)?e.firstElementChild:null};BX.lastChild=function(e){return BX.type.isDomNode(e)?e.lastElementChild:null};BX.previousSibling=function(e){return BX.type.isDomNode(e)?e.previousElementSibling:null};BX.nextSibling=function(e){return BX.type.isDomNode(e)?e.nextElementSibling:null};BX.findChildrenByClassName=function(e,t,r){if(!e||!e.childNodes)return null;var n=[];if(typeof e.getElementsByClassName=="undefined"){r=r!==false;n=BX.findChildren(e,{className:t},r)}else{var a=e.getElementsByClassName(t);for(i=0,l=a.length;i<l;i++){n[i]=a[i]}}return n};BX.findChildByClassName=function(e,t,r){if(!e||!e.childNodes)return null;var n=null;if(typeof e.getElementsByClassName=="undefined"){r=r!==false;n=BX.findChild(e,{className:t},r)}else{var i=e.getElementsByClassName(t);if(i&&typeof i[0]!="undefined"){n=i[0]}else{n=null}}return n};BX.findChildren=function(e,t,r){return BX.findChild(e,t,r,true)};BX.findChild=function(e,t,r,n){if(!e||!e.childNodes)return null;r=!!r;n=!!n;var i=e.childNodes.length,a=[];for(var s=0;s<i;s++){var o=e.childNodes[s];if(_checkNode(o,t)){if(n)a.push(o);else return o}if(r==true){var u=BX.findChild(o,t,r,n);if(u){if(n)a=BX.util.array_merge(a,u);else return u}}}if(n||a.length>0)return a;else return null};BX.findParent=function(e,t,r){if(!e)return null;var n=e;while(n.parentNode){var i=n.parentNode;if(_checkNode(i,t))return i;n=i;if(!!r&&(BX.type.isFunction(r)||typeof r=="object")){if(BX.type.isElementNode(r)){if(n==r)break}else{if(_checkNode(n,r))break}}}return null};BX.findNextSibling=function(e,t){if(!e)return null;var r=e;while(r.nextSibling){var n=r.nextSibling;if(_checkNode(n,t))return n;r=n}return null};BX.findPreviousSibling=function(e,t){if(!e)return null;var r=e;while(r.previousSibling){var n=r.previousSibling;if(_checkNode(n,t))return n;r=n}return null};BX.checkNode=function(e,t){return _checkNode(e,t)};BX.findFormElements=function(e){if(BX.type.isString(e))e=document.forms[e]||BX(e);var t=[];if(BX.type.isElementNode(e)){if(e.tagName.toUpperCase()=="FORM"){t=e.elements}else{t=BX.findChildren(e,CHECK_FORM_ELEMENTS,true)}}return t};BX.isParentForNode=function(e,t){if(BX.type.isDomNode(e)&&BX.type.isDomNode(t)){return e.contains(t)}return false};BX.getCaretPosition=function(e){var t=0;if(e.selectionStart||e.selectionStart==0){t=e.selectionStart}else if(document.selection){e.focus();var r=document.selection.createRange();r.moveStart("character",-e.value.length);t=r.text.length}return t};BX.setCaretPosition=function(e,t){if(!BX.isNodeInDom(e)||BX.isNodeHidden(e)||e.disabled){return}if(e.setSelectionRange){e.focus();e.setSelectionRange(t,t)}else if(e.createTextRange){var r=e.createTextRange();r.collapse(true);r.moveEnd("character",t);r.moveStart("character",t);r.select()}};BX.merge=function(){var e=Array.prototype.slice.call(arguments);if(e.length<2)return{};var t=e.shift();for(var r=0;r<e.length;r++){for(var n in e[r]){if(typeof e[r]=="undefined"||e[r]==null)continue;if(e[r].hasOwnProperty(n)){if(typeof e[r][n]=="undefined"||e[r][n]==null)continue;if(typeof e[r][n]=="object"&&!BX.type.isDomNode(e[r][n])&&typeof e[r][n]["isUIWidget"]=="undefined"){var i="length"in e[r][n];if(typeof t[n]!="object")t[n]=i?[]:{};if(i)BX.util.array_merge(t[n],e[r][n]);else BX.merge(t[n],e[r][n])}else t[n]=e[r][n]}}}return t};BX.mergeEx=function(){var e=Array.prototype.slice.call(arguments);if(e.length<2){return{}}var t=e.shift();for(var r=0;r<e.length;r++){for(var n in e[r]){if(typeof e[r]=="undefined"||e[r]==null||!e[r].hasOwnProperty(n)){continue}if(BX.type.isPlainObject(e[r][n])&&BX.type.isPlainObject(t[n])){BX.mergeEx(t[n],e[r][n])}else{t[n]=BX.type.isPlainObject(e[r][n])?BX.clone(e[r][n]):e[r][n]}}}return t};BX.getEventButton=function(e){e=e||window.event;var t=0;if(typeof e.which!="undefined"){switch(e.which){case 1:t=t|BX.MSLEFT;break;case 2:t=t|BX.MSMIDDLE;break;case 3:t=t|BX.MSRIGHT;break}}else if(typeof e.button!="undefined"){t=event.button}return t||BX.MSLEFT};var captured_events=null,_bind=null;BX.CaptureEvents=function(e,t){if(_bind)return;_bind=BX.bind;captured_events=[];BX.bind=function(r,n,i){if(r===e&&n===t)captured_events.push(i);_bind.apply(this,arguments)}};BX.CaptureEventsGet=function(){if(_bind){BX.bind=_bind;var e=captured_events;_bind=null;captured_events=null;return e}return null};BX.fireEvent=function(e,t){var r=false,n=null;if(BX.type.isDomNode(e)){r=true;if(document.createEventObject){if(eventTypes[t]!="MouseEvent"){n=document.createEventObject();n.type=t;r=e.fireEvent("on"+t,n)}if(e[t]){e[t]()}}else{n=null;switch(eventTypes[t]){case"MouseEvent":n=document.createEvent("MouseEvent");try{n.initMouseEvent(t,true,true,top,1,0,0,0,0,0,0,0,0,0,null)}catch(e){n.initMouseEvent(t,true,true,window,1,0,0,0,0,0,0,0,0,0,null)}break;default:n=document.createEvent("Event");n.initEvent(t,true,true)}r=e.dispatchEvent(n)}}return r};BX.getWheelData=function(e){e=e||window.event;e.wheelData=e.detail?e.detail*-1:e.wheelDelta/40;return e.wheelData};BX.proxy_context=null;BX.delegate=function(e,t){if(!e||!t)return e;return function(){var r=BX.proxy_context;BX.proxy_context=this;var n=e.apply(t,arguments);BX.proxy_context=r;return n}};BX.delegateLater=function(e,t,r){return function(){if(t[e]){var n=BX.proxy_context;BX.proxy_context=this;var i=t[e].apply(r||t,arguments);BX.proxy_context=n;return i}return null}};BX.proxy=function(e,t){return getObjectDelegate(e,t,proxyList)};BX.defer=function(e,t){if(!!t)return BX.defer_proxy(e,t);else return function(){var t=arguments;setTimeout((function(){e.apply(this,t)}),10)}};BX.defer_proxy=function(e,t){return getObjectDelegate(e,t,deferList,BX.defer)};function getObjectDelegate(e,t,r,n){if(!BX.type.isFunction(e)||!BX.type.isMapKey(t)){return e}var i=r.get(t);if(!i){i=new WeakMap;r.set(t,i)}var a=i.get(e);if(!a){a=n?n(BX.delegate(e,t)):BX.delegate(e,t);i.set(e,a)}return a}BX.once=function(e,t,r){var n=function(){BX.unbind(e,t,n);r.apply(this,arguments)};return n};BX.bindDelegate=function(e,t,r,n){var i=BX.delegateEvent(r,n);BX.bind(e,t,i);return i};BX.delegateEvent=function(e,t){return function(r){r=r||window.event;var n=r.target||r.srcElement;while(n!=this){if(_checkNode(n,e)){return t.call(n,r)}if(n&&n.parentNode)n=n.parentNode;else break}return null}};BX.False=function(){return false};BX.DoNothing=function(){};BX.denyEvent=function(e,t){deniedEvents.push([e,t,e["on"+t]]);e["on"+t]=BX.DoNothing};BX.allowEvent=function(e,t){for(var r=0,n=deniedEvents.length;r<n;r++){if(deniedEvents[r][0]==e&&deniedEvents[r][1]==t){e["on"+t]=deniedEvents[r][2];BX.util.deleteFromArray(deniedEvents,r);return}}};BX.fixEventPageXY=function(e){BX.fixEventPageX(e);BX.fixEventPageY(e);return e};BX.fixEventPageX=function(e){if(e.pageX==null&&e.clientX!=null){e.pageX=e.clientX+(document.documentElement&&document.documentElement.scrollLeft||document.body&&document.body.scrollLeft||0)-(document.documentElement.clientLeft||0)}return e};BX.fixEventPageY=function(e){if(e.pageY==null&&e.clientY!=null){e.pageY=e.clientY+(document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0)-(document.documentElement.clientTop||0)}return e};BX.PreventDefault=function(e){if(!e)e=window.event;if(e.stopPropagation){e.preventDefault();e.stopPropagation()}else{e.cancelBubble=true;e.returnValue=false}return false};BX.eventReturnFalse=function(e){e=e||window.event;if(e&&e.preventDefault)e.preventDefault();else e.returnValue=false;return false};BX.eventCancelBubble=function(e){e=e||window.event;if(e&&e.stopPropagation)e.stopPropagation();else e.cancelBubble=true};BX.bindDebouncedChange=function(e,t,r,n,i){i=i||window;n=n||300;var a="bx-dc-previous-value";BX.data(e,a,e.value);var s=function(t,r){var n=BX.data(e,a);if(typeof n=="undefined"||n!=r){if(typeof i!="object")t(r);else t.apply(i,[r])}};var o=BX.debounce((function(){var r=e.value;s(t,r);BX.data(e,a,r)}),n);BX.bind(e,"keyup",o);BX.bind(e,"change",o);BX.bind(e,"input",o);if(BX.type.isFunction(r)){var u=function(){s(r,e.value)};BX.bind(e,"keyup",u);BX.bind(e,"change",u);BX.bind(e,"input",u)}};BX.parseJSON=function(data,context){var result=null;if(BX.type.isNotEmptyString(data)){try{if(data.indexOf("\n")>=0)eval("result = "+data);else result=new Function("return "+data)()}catch(e){BX.onCustomEvent(context,"onParseJSONFailure",[data,context])}}else if(BX.type.isPlainObject(data)){return data}return result};BX.submit=function(e,t,r,n){t=t||"save";if(!e["BXFormSubmit_"+t]){e["BXFormSubmit_"+t]=e.appendChild(BX.create("INPUT",{props:{type:"submit",name:t,value:r||"Y"},style:{display:"none"}}))}if(e.sessid)e.sessid.value=BX.bitrix_sessid();setTimeout(BX.delegate((function(){BX.fireEvent(this,"click");if(n)n()}),e["BXFormSubmit_"+t]),10)};BX.show=function(e,t){if(e.BXDISPLAY||!_checkDisplay(e,t)){e.style.display=e.BXDISPLAY}};BX.hide=function(e,t){if(!e.BXDISPLAY)_checkDisplay(e,t);e.style.display="none"};BX.toggle=function(e,t){if(!t&&BX.type.isElementNode(e)){var r=true;if(e.BXDISPLAY)r=!_checkDisplay(e);else r=e.style.display=="none";if(r)BX.show(e);else BX.hide(e)}else if(BX.type.isArray(t)){for(var n=0,i=t.length;n<i;n++){if(e==t[n]){e=t[n==i-1?0:n+1];break}}if(n==i)e=t[0]}return e};function _checkDisplay(e,t){if(typeof t!="undefined")e.BXDISPLAY=t;var r=e.style.display||BX.style(e,"display");if(r!="none"){e.BXDISPLAY=e.BXDISPLAY||r;return true}else{e.BXDISPLAY=e.BXDISPLAY||"block";return false}}BX.util={array_values:function(e){if(!BX.type.isArray(e))return BX.util._array_values_ob(e);var t=[];for(var r=0,n=e.length;r<n;r++)if(e[r]!==null&&typeof e[r]!="undefined")t.push(e[r]);return t},_array_values_ob:function(e){var t=[];for(var r in e)if(e[r]!==null&&typeof e[r]!="undefined")t.push(e[r]);return t},array_keys:function(e){if(!BX.type.isArray(e))return BX.util._array_keys_ob(e);var t=[];for(var r=0,n=e.length;r<n;r++)if(e[r]!==null&&typeof e[r]!="undefined")t.push(r);return t},_array_keys_ob:function(e){var t=[];for(var r in e)if(e[r]!==null&&typeof e[r]!="undefined")t.push(r);return t},object_keys:function(e){var t=[];for(var r in e){if(e.hasOwnProperty(r)){t.push(r)}}return t},array_merge:function(e,t){if(!BX.type.isArray(e))e=[];if(!BX.type.isArray(t))t=[];var r=e.length,n=0;if(typeof t.length==="number"){for(var i=t.length;n<i;n++){e[r++]=t[n]}}else{while(t[n]!==undefined){e[r++]=t[n++]}}e.length=r;return e},array_flip:function(e){var t={};for(var r in e){t[e[r]]=r}return t},array_diff:function(e,t,r){r=BX.type.isFunction(r)?r:null;var n,i,a,s,o={},u=[];for(n=0,i=t.length;n<i;n++){a=t[n];s=r?r(a):a;o[s]=true}for(n=0,i=e.length;n<i;n++){a=e[n];s=r?r(a):a;if(typeof o[s]==="undefined"){u.push(a)}}return u},array_unique:function(e){var t=0,r,n=e.length;if(n<2)return e;for(;t<n-1;t++){for(r=t+1;r<n;r++){if(e[t]==e[r]){e.splice(r--,1);n--}}}return e},in_array:function(e,t){for(var r=0;r<t.length;r++){if(t[r]==e)return true}return false},array_search:function(e,t){for(var r=0;r<t.length;r++){if(t[r]==e)return r}return-1},object_search_key:function(e,t){if(typeof t[e]!="undefined")return t[e];for(var r in t){if(typeof t[r]=="object"){var n=BX.util.object_search_key(e,t[r]);if(n!==false)return n}}return false},trim:function(e){if(BX.type.isString(e)){return e.trim()}return e},urlencode:function(e){return encodeURIComponent(e)},deleteFromArray:function(e,t){return e.slice(0,t).concat(e.slice(t+1))},insertIntoArray:function(e,t,r){return e.slice(0,t).concat([r]).concat(e.slice(t))},htmlspecialchars:function(e){return BX.Text.encode(e)},htmlspecialcharsback:function(e){return BX.Text.decode(e)},preg_quote:function(e,t){if(!e.replace)return e;return e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},jsencode:function(e){if(!e||!e.replace)return e;var t=[{c:"\\\\",r:"\\\\"},{c:"\\t",r:"\\t"},{c:"\\n",r:"\\n"},{c:"\\r",r:"\\r"},{c:'"',r:'\\"'},{c:"'",r:"\\'"},{c:"<",r:"\\x3C"},{c:">",r:"\\x3E"},{c:"\\u2028",r:"\\u2028"},{c:"\\u2029",r:"\\u2029"}];for(var r=0;r<t.length;r++)e=e.replace(new RegExp(t[r].c,"g"),t[r].r);return e},getCssName:function(e){if(!BX.type.isNotEmptyString(e)){return""}return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},getJsName:function(e){var t=/\-([a-z]){1}/g;if(t.test(e)){return e.replace(t,(function(e,t){return t.toUpperCase()}))}return e},nl2br:function(e){if(!e||!e.replace)return e;return e.replace(/([^>])\n/g,"$1<br/>")},str_pad:function(e,t,r,n){r=r||" ";n=n||"right";e=e.toString();if(n==="left"){return BX.util.str_pad_left(e,t,r)}return BX.util.str_pad_right(e,t,r)},str_pad_left:function(e,t,r){return e.toString().padStart(t,r)},str_pad_right:function(e,t,r){return e.toString().padEnd(t,r)},strip_tags:function(e){return e.split(/<[^>]+>/g).join("")},strip_php_tags:function(e){return e.replace(/<\?(.|[\r\n])*?\?>/g,"")},popup:function(e,t,r){var n,i;if(BX.browser.IsOpera()){n=document.body.offsetWidth;i=document.body.offsetHeight}else{n=screen.width;i=screen.height}return window.open(e,"","status=no,scrollbars=yes,resizable=yes,width="+t+",height="+r+",top="+Math.floor((i-r)/2-14)+",left="+Math.floor((n-t)/2-5))},shuffle:function(e){var t,r;var n=e.length;while(0!==n){r=Math.floor(Math.random()*n);n-=1;t=e[n];e[n]=e[r];e[r]=t}return e},objectSort:function(e,t,r){r=r=="asc"?"asc":"desc";var n=[],i;for(i in e){if(e.hasOwnProperty(i)&&e[i][t]){n.push([i,e[i][t]])}}if(r=="asc"){n.sort((function(e,t){var r,n;if(BX.type.isDate(e[1])){r=e[1].getTime()}else if(!isNaN(e[1])){r=parseInt(e[1])}else{r=e[1].toString().toLowerCase()}if(BX.type.isDate(t[1])){n=t[1].getTime()}else if(!isNaN(t[1])){n=parseInt(t[1])}else{n=t[1].toString().toLowerCase()}if(r>n)return 1;else if(r<n)return-1;else return 0}))}else{n.sort((function(e,t){var r,n;if(BX.type.isDate(e[1])){r=e[1].getTime()}else if(!isNaN(e[1])){r=parseInt(e[1])}else{r=e[1].toString().toLowerCase()}if(BX.type.isDate(t[1])){n=t[1].getTime()}else if(!isNaN(t[1])){n=parseInt(t[1])}else{n=t[1].toString().toLowerCase()}if(r<n)return 1;else if(r>n)return-1;else return 0}))}var a=Array();for(i=0;i<n.length;i++){a.push(e[n[i][0]])}return a},objectMerge:function(){return BX.mergeEx.apply(window,arguments)},objectClone:function(e){return BX.clone(e,true)},hex2rgb:function(e){var t=e.replace(/[# ]/g,"").replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3").match(/.{2}/g);for(var r=0;r<3;r++){t[r]=parseInt(t[r],16)}return{r:t[0],g:t[1],b:t[2]}},remove_url_param:function(e,t){return BX.Uri.removeParam(e,t)},add_url_param:function(e,t){var r=Object.entries(t).reduce((function(e,t){e[t[0]]=BX.type.isArray(t[1])?t[1].join():t[1];return e}),{});return BX.Uri.addParam(e,r)},buildQueryString:function(e){var t="";for(var r in e){var n=e[r];if(BX.type.isArray(n)){n.forEach((function(e,n){t+=encodeURIComponent(r+"["+n+"]")+"="+encodeURIComponent(e)+"&"}))}else{t+=encodeURIComponent(r)+"="+encodeURIComponent(n)+"&"}}if(t.length>0){t=t.substr(0,t.length-1)}return t},even:function(e){return parseInt(e)%2==0},hashCode:function(e){if(!BX.type.isNotEmptyString(e)){return 0}var t=0;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);t=(t<<5)-t+n;t=t&t}return t},getRandomString:function(e){return BX.Text.getRandom(e)},number_format:function(e,t,r,n){var i,a,s,o,u,l="";t=Math.abs(t);if(isNaN(t)||t<0){t=2}r=r||",";if(typeof n==="undefined")n=".";e=(+e||0).toFixed(t);if(e<0){l="-";e=-e}i=parseInt(e,10)+"";a=i.length>3?i.length%3:0;u=a?i.substr(0,a)+n:"";s=i.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+n);o=t?r+Math.abs(e-i).toFixed(t).replace(/-/,"0").slice(2):"";return l+u+s+o},getExtension:function(e){e=e||"";var t=e.split("?")[0].split(".");return t[t.length-1].toLowerCase()},addObjectToForm:function(e,t,r){if(!BX.type.isString(r)){r=""}for(var n in e){if(!e.hasOwnProperty(n)){continue}var i=e[n];var a=r!==""?r+"["+n+"]":n;if(BX.type.isArray(i)){var s={};for(var o=0;o<i.length;o++){s[o]=i[o]}BX.util.addObjectToForm(s,t,a)}else if(BX.type.isPlainObject(i)){BX.util.addObjectToForm(i,t,a)}else{i=BX.type.isFunction(i.toString)?i.toString():"";if(i!==""){t.appendChild(BX.create("INPUT",{attrs:{type:"hidden",name:a,value:i}}))}}}},observe:function(e,t){console.error("BX.util.observe: function is no longer supported by browser.");return false},escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};BX.validation={checkIfEmail:function(e){var t="[=a-z0-9_+~'!$&*^`|#%/?{}-]";return new RegExp("^\\s*"+t+"+(\\."+t+"+)*@([a-z0-9-]+\\.)+[a-z0-9-]{2,20}\\s*$","i").test(e)},checkIfPhone:function(e){var t=new RegExp(typeof BX.PhoneNumber==="undefined"?BX.PhoneNumber.getValidNumberPattern():"^\\s*\\+?s*[0-9(-)\\s]+\\s*$","i");return t.test(e)}};BX.prop={get:function(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r},getObject:function(e,t,r){return e&&BX.type.isPlainObject(e[t])?e[t]:r},getElementNode:function(e,t,r){return e&&BX.type.isElementNode(e[t])?e[t]:r},getArray:function(e,t,r){return e&&BX.type.isArray(e[t])?e[t]:r},getFunction:function(e,t,r){return e&&BX.type.isFunction(e[t])?e[t]:r},getNumber:function(e,t,r){if(!(e&&e.hasOwnProperty(t))){return r}var n=e[t];if(BX.type.isNumber(n)){return n}n=parseFloat(n);return!isNaN(n)?n:r},getInteger:function(e,t,r){if(!(e&&e.hasOwnProperty(t))){return r}var n=e[t];if(BX.type.isNumber(n)){return n}n=parseInt(n);return!isNaN(n)?n:r},getBoolean:function(e,t,r){if(!(e&&e.hasOwnProperty(t))){return r}var n=e[t];return BX.type.isBoolean(n)?n:BX.type.isString(n)?n.toLowerCase()==="true":!!n},getString:function(e,t,r){if(!(e&&e.hasOwnProperty(t))){return r}var n=e[t];return BX.type.isString(n)?n:n?n.toString():""},extractDate:function(e){if(!BX.type.isDate(e)){e=new Date}e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e}};BX.isNodeInDom=function(e,t){return e===(t||document)?true:e.parentNode?BX.isNodeInDom(e.parentNode):false};BX.isNodeHidden=function(e){if(e===document)return false;else if(BX.style(e,"display")=="none")return true;else return e.parentNode?BX.isNodeHidden(e.parentNode):true};BX.evalPack=function(e){while(e.length>0){var t=e.shift();if(t.TYPE=="SCRIPT_EXT"||t.TYPE=="SCRIPT_SRC"){BX.loadScript(t.DATA,(function(){BX.evalPack(e)}));return}else if(t.TYPE=="SCRIPT"){BX.evalGlobal(t.DATA)}}};BX.evalGlobal=function(e){if(e){var t=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.type="text/javascript";if(!BX.browser.IsIE()){r.appendChild(document.createTextNode(e))}else{r.text=e}t.insertBefore(r,t.firstChild);t.removeChild(r)}};BX.garbage=function(e,t){garbageCollectors.push({callback:e,context:t})};BX.GetDocElement=function(e){e=e||document;return BX.browser.IsDoctype(e)?e.documentElement:e.body};BX.scrollTop=function(e,t){if(typeof t!="undefined"){if(e==window){throw new Error("scrollTop() for window is not implemented")}else e.scrollTop=parseInt(t)}else{if(e==window)return BX.GetWindowScrollPos().scrollTop;return e.scrollTop}};BX.scrollLeft=function(e,t){if(typeof t!="undefined"){if(e==window){throw new Error("scrollLeft() for window is not implemented")}else e.scrollLeft=parseInt(t)}else{if(e==window)return BX.GetWindowScrollPos().scrollLeft;return e.scrollLeft}};BX.hide_object=function(e){e=BX(e);e.style.position="absolute";e.style.top="-1000px";e.style.left="-1000px";e.style.height="10px";e.style.width="10px"};BX.is_relative=function(e){var t=BX.style(e,"position");return t=="relative"||t=="absolute"};BX.is_float=function(e){var t=BX.style(e,"float");return t=="right"||t=="left"};BX.is_fixed=function(e){var t=BX.style(e,"position");return t=="fixed"};BX.width=function(e,t){if(typeof t!="undefined")BX.style(e,"width",parseInt(t)+"px");else{if(e==window)return window.innerWidth;return BX.pos(e).width}};BX.height=function(e,t){if(typeof t!="undefined")BX.style(e,"height",parseInt(t)+"px");else{if(e==window)return window.innerHeight;return BX.pos(e).height}};BX.align=function(e,t,r,n){if(n)n=n.toLowerCase();else n="";var i=document;if(BX.type.isElementNode(e)){i=e.ownerDocument;e=BX.pos(e)}var a=e["left"],s=e["bottom"];var o=BX.GetWindowScrollPos(i);var u=BX.GetWindowInnerSize(i);if(u.innerWidth+o.scrollLeft-(e["left"]+t)<0){if(e["right"]-t>=0)a=e["right"]-t;else a=o.scrollLeft}if(u.innerHeight+o.scrollTop-(e["bottom"]+r)<0||~n.indexOf("top")){if(e["top"]-r>=0||~n.indexOf("top"))s=e["top"]-r;else s=o.scrollTop}return{left:a,top:s}};BX.scrollToNode=function(e){var t=BX(e);if(t.scrollIntoView)t.scrollIntoView(true);else{var r=BX.pos(t);window.scrollTo(r.left,r.top)}};BX.showWait=function(e,t){e=BX(e)||document.body||document.documentElement;t=t||BX.message("JS_CORE_LOADING");var r=e.id||Math.random();var n=e.bxmsg=document.body.appendChild(BX.create("DIV",{props:{id:"wait_"+r},style:{background:'url("/bitrix/js/main/core/images/wait.gif") no-repeat scroll 10px center #fcf7d1',border:"1px solid #E1B52D",color:"black",fontFamily:"Verdana,Arial,sans-serif",fontSize:"11px",padding:"10px 30px 10px 37px",position:"absolute",textAlign:"center"},text:t}));BX.ZIndexManager.register(n);BX.ZIndexManager.bringToFront(n);setTimeout(BX.delegate(_adjustWait,e),10);lastWait[lastWait.length]=n;return n};BX.closeWait=function(e,t){if(e&&!t)t=e.bxmsg;if(e&&!t&&BX.hasClass(e,"bx-core-waitwindow"))t=e;if(e&&!t)t=BX("wait_"+e.id);if(!t)t=lastWait.pop();if(t&&t.parentNode){for(var r=0,n=lastWait.length;r<n;r++){if(t==lastWait[r]){lastWait=BX.util.deleteFromArray(lastWait,r);break}}BX.ZIndexManager.unregister(t);t.parentNode.removeChild(t);if(e)e.bxmsg=null;BX.cleanNode(t,true)}};BX.setJSList=function(e){if(BX.type.isArray(e)){e=e.map((function(e){return normalizeUrl(e)}));jsList=jsList.concat(e)}};BX.getJSList=function(){initJsList();return jsList};BX.setCSSList=function(e){if(BX.type.isArray(e)){e=e.map((function(e){return normalizeUrl(e)}));cssList=cssList.concat(e)}};BX.getCSSList=function(){initCssList();return cssList};BX.getJSPath=function(e){return e.replace(/^(http[s]*:)*\/\/[^\/]+/i,"")};BX.getCSSPath=function(e){return e.replace(/^(http[s]*:)*\/\/[^\/]+/i,"")};BX.getCDNPath=function(e){return e};BX.loadScript=function(e,t,r){if(BX.type.isString(e)){e=[e]}return BX.load(e,t,r)};BX.loadCSS=function(e,t,r){if(BX.type.isString(e)){e=[e]}if(BX.type.isArray(e)){e=e.map((function(e){return{url:e,ext:"css"}}));BX.load(e,null,t)}};const LOADING=3;const LOADED=4;const assets={};const loadingAssetCallbacks={};BX.load=function(e,t,r){if(!BX.isReady){var n=arguments;BX.ready((function(){BX.load.apply(this,n)}));return null}r=r||document;t=BX.Type.isFunction(t)?t:()=>{};return loadAsync(e,t,r)};function loadAsync(e,t,r){if(!BX.type.isArray(e)){t();return}function n(){const e=a.shift();if(e){load(e,n,r)}else if(i()){t()}}function i(){for(const e in s){if(s[e].state!==LOADED){return false}}return true}const a=[];const s={};e.forEach((e=>{const t=getAsset(e);if(t&&t.state!==LOADED){a.push(t);s[t.name]=t}}));if(a.length>0){const e=6;const t=Math.min(a.length,e);const i=a.splice(0,t);i.forEach((e=>{load(e,n,r)}))}else{t()}}function load(e,t,r){t=t||BX.DoNothing;if(e.state===LOADED){t();return}if(e.state===LOADING){if(!BX.Type.isArray(loadingAssetCallbacks[e.name])){loadingAssetCallbacks[e.name]=[]}loadingAssetCallbacks[e.name].push(t);return}e.state=LOADING;loadAsset(e,(function(){e.state=LOADED;t();if(BX.Type.isArrayFilled(loadingAssetCallbacks[e.name])){for(const t of loadingAssetCallbacks[e.name]){t()}}delete loadingAssetCallbacks[e.name]}),r)}function loadAsset(e,t,r){t=t||BX.DoNothing;function n(r){window.clearTimeout(e.errorTimeout);window.clearTimeout(e.cssTimeout);s.onload=s.onreadystatechange=s.onerror=null;t()}function i(n){n=n||window.event;if(n.type==="load"||/loaded|complete/.test(s.readyState)&&(!r.documentMode||r.documentMode<9)){window.clearTimeout(e.errorTimeout);window.clearTimeout(e.cssTimeout);s.onload=s.onreadystatechange=s.onerror=null;t()}}function a(){if(e.state!==LOADED&&e.cssRetries<=20){for(var t=0,n=r.styleSheets.length;t<n;t++){if(r.styleSheets[t].href===s.href){i({type:"load"});return}}e.cssRetries++;e.cssTimeout=window.setTimeout(a,250)}}let s=null;const o=BX.type.isNotEmptyString(e.ext)?e.ext:BX.util.getExtension(e.url);if(o==="css"){s=r.createElement("link");s.type="text/"+(e.type||"css");s.rel="stylesheet";s.href=e.url;e.cssRetries=0;e.cssTimeout=window.setTimeout(a,500)}else{s=r.createElement("script");s.type="text/"+(e.type||"javascript");s.src=e.url}s.onload=s.onreadystatechange=i;s.onerror=n;s.async=false;s.defer=false;e.errorTimeout=window.setTimeout((function(){n({type:"timeout"})}),7e3);if(o==="css"){cssList.push(normalizeMinUrl(normalizeUrl(e.url)))}else{jsList.push(normalizeMinUrl(normalizeUrl(e.url)))}let u=null;const l=r.head||r.getElementsByTagName("head")[0];if(o==="css"&&(u=getTemplateLink(l))!==null){u.parentNode.insertBefore(s,u)}else{l.insertBefore(s,l.lastChild)}}function getAsset(e){var t={};if(typeof e==="object"){t=e;t.name=t.name?t.name:BX.util.hashCode(e.url)}else{t={name:BX.util.hashCode(e),url:e}}var r=BX.type.isNotEmptyString(t.ext)?t.ext:BX.util.getExtension(t.url);if(r==="css"&&isCssLoaded(t.url)||isScriptLoaded(t.url)){t.state=LOADED}var n=assets[t.name];if(n&&n.url===t.url){return n}assets[t.name]=t;return t}function normalizeUrl(e){if(!BX.type.isNotEmptyString(e)){return""}e=BX.getJSPath(e);e=e.replace(/\?[0-9]*$/,"");return e}function normalizeMinUrl(e){if(!BX.type.isNotEmptyString(e)){return""}var t=e.indexOf(".min");return t>=0?e.substr(0,t)+e.substr(t+4):e}function isCssLoaded(e){initCssList();e=normalizeUrl(e);var t=normalizeMinUrl(e);return e!==t&&BX.util.in_array(t,cssList)||BX.util.in_array(e,cssList)}function initCssList(){if(!cssInit){var e=document.getElementsByTagName("link");if(!!e&&e.length>0){for(var t=0;t<e.length;t++){var r=e[t].getAttribute("href");if(BX.type.isNotEmptyString(r)){r=normalizeMinUrl(normalizeUrl(r));cssList.push(r)}}}cssInit=true}}function getTemplateLink(e){var t=function(t){var r=e.getElementsByTagName(t);for(var n=0,i=r.length;n<i;n++){var a=r[n].getAttribute("data-template-style");if(BX.type.isNotEmptyString(a)&&a=="true"){return r[n]}}return null};var r=t("link");if(r===null){r=t("style")}return r}function isScriptLoaded(e){initJsList();e=normalizeUrl(e);var t=normalizeMinUrl(e);return e!==t&&BX.util.in_array(t,jsList)||BX.util.in_array(e,jsList)}function initJsList(){if(!jsInit){var e=document.getElementsByTagName("script");if(!!e&&e.length>0){for(var t=0;t<e.length;t++){var r=e[t].getAttribute("src");if(BX.type.isNotEmptyString(r)){r=normalizeMinUrl(normalizeUrl(r));jsList.push(r)}}}jsInit=true}}function reloadInternal(e,t){if(e===true){t=true;e=null}var r=function(){if(BX.PageObject&&BX.PageObject.getRootWindow){return BX.PageObject.getRootWindow()}return window.top}();var n=e||r.location.href;var i=n.indexOf("#"),a="";if(i!=-1){a=n.substr(i);n=n.substr(0,i)}if(t&&n.indexOf("clear_cache=Y")<0)n+=(n.indexOf("?")==-1?"?":"&")+"clear_cache=Y";if(a){if(t&&(a.substr(0,5)=="view/"||a.substr(0,6)=="#view/")&&a.indexOf("clear_cache%3DY")<0)a+=(a.indexOf("%3F")==-1?"%3F":"%26")+"clear_cache%3DY";n=n.replace(/(\?|\&)_r=[\d]*/,"");n+=(n.indexOf("?")==-1?"?":"&")+"_r="+Math.round(Math.random()*1e4)+a}r.location.href=n}BX.reload=function(e,t){if(window!==window.top){BX.Runtime.loadExtension("main.pageobject").then((function(){reloadInternal(e,t)}))}else{reloadInternal(e,t)}};BX.clearCache=function(){BX.showWait();BX.reload(true)};BX.template=function(e,t,r){BX.ready((function(){_processTpl(BX(e),t,r)}))};BX.isAmPmMode=function(e){if(e===true){return BX.message.AMPM_MODE}return BX.message.AMPM_MODE!==false};BX.formatDate=function(e,t){e=e||new Date;var r=e.getHours()||e.getMinutes()||e.getSeconds(),n=!!t?t:r?BX.message("FORMAT_DATETIME"):BX.message("FORMAT_DATE");return n.replace(/YYYY/gi,e.getFullYear()).replace(/MMMM/gi,BX.util.str_pad_left((e.getMonth()+1).toString(),2,"0")).replace(/MM/gi,BX.util.str_pad_left((e.getMonth()+1).toString(),2,"0")).replace(/DD/gi,BX.util.str_pad_left(e.getDate().toString(),2,"0")).replace(/HH/gi,BX.util.str_pad_left(e.getHours().toString(),2,"0")).replace(/MI/gi,BX.util.str_pad_left(e.getMinutes().toString(),2,"0")).replace(/SS/gi,BX.util.str_pad_left(e.getSeconds().toString(),2,"0"))};BX.formatName=function(e,t,r){e=e||{};t=t||"";var n={TITLE:e["TITLE"]||"",NAME:e["NAME"]||"",LAST_NAME:e["LAST_NAME"]||"",SECOND_NAME:e["SECOND_NAME"]||"",LOGIN:e["LOGIN"]||"",NAME_SHORT:e["NAME"]?e["NAME"].substr(0,1)+".":"",LAST_NAME_SHORT:e["LAST_NAME"]?e["LAST_NAME"].substr(0,1)+".":"",SECOND_NAME_SHORT:e["SECOND_NAME"]?e["SECOND_NAME"].substr(0,1)+".":"",EMAIL:e["EMAIL"]||"",ID:e["ID"]||"",NOBR:"","/NOBR":""},i=t;for(var a in n){if(n.hasOwnProperty(a)){i=i.replace("#"+a+"#",n[a])}}i=i.replace(/([\s]+)/gi," ").trim();if(i==""){i=r=="Y"?n["LOGIN"]:"";i=i==""?"Noname":i}return i};BX.getNumMonth=function(e){var t=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];var r=["january","february","march","april","may","june","july","august","september","october","november","december"];var n=e.toUpperCase();for(i=1;i<=12;i++){if(n==BX.message("MON_"+i).toUpperCase()||n==BX.message("MONTH_"+i).toUpperCase()||n==t[i-1].toUpperCase()||n==r[i-1].toUpperCase()){return i}}return e};BX.parseDate=function(e,t,r,n){if(BX.type.isNotEmptyString(e)){if(!r)r=BX.message("FORMAT_DATE");if(!n)n=BX.message("FORMAT_DATETIME");var i="";for(u=1;u<=12;u++){i=i+"|"+BX.message("MON_"+u)}var a=new RegExp("([0-9]+|[a-z]+"+i+")","ig");var s=e.match(a),o=r.match(/(DD|MI|MMMM|MM|M|YYYY)/gi),u,l,c=[],f=[],d={};if(!s)return null;if(s.length>o.length){o=n.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/gi)}for(u=0,l=s.length;u<l;u++){if(BX.util.trim(s[u])!=""){c[c.length]=s[u]}}for(u=0,l=o.length;u<l;u++){if(BX.util.trim(o[u])!=""){f[f.length]=o[u]}}var p=BX.util.array_search("MMMM",f);if(p>0){c[p]=BX.getNumMonth(c[p]);f[p]="MM"}else{p=BX.util.array_search("M",f);if(p>0){c[p]=BX.getNumMonth(c[p]);f[p]="MM"}}for(u=0,l=f.length;u<l;u++){var h=f[u].toUpperCase();d[h]=h=="T"||h=="TT"?c[u]:parseInt(c[u],10)}if(d["DD"]>0&&d["MM"]>0&&d["YYYY"]>0){var v=new Date;if(t){v.setUTCDate(1);v.setUTCFullYear(d["YYYY"]);v.setUTCMonth(d["MM"]-1);v.setUTCDate(d["DD"]);v.setUTCHours(0,0,0,0)}else{v.setDate(1);v.setFullYear(d["YYYY"]);v.setMonth(d["MM"]-1);v.setDate(d["DD"]);v.setHours(0,0,0,0)}if((!isNaN(d["HH"])||!isNaN(d["GG"])||!isNaN(d["H"])||!isNaN(d["G"]))&&!isNaN(d["MI"])){if(!isNaN(d["H"])||!isNaN(d["G"])){var y=(d["T"]||d["TT"]||"am").toUpperCase()=="PM";var m=parseInt(d["H"]||d["G"]||0,10);if(y){d["HH"]=m+(m==12?0:12)}else{d["HH"]=m<12?m:0}}else{d["HH"]=parseInt(d["HH"]||d["GG"]||0,10)}if(isNaN(d["SS"]))d["SS"]=0;if(t){v.setUTCHours(d["HH"],d["MI"],d["SS"])}else{v.setHours(d["HH"],d["MI"],d["SS"])}}return v}}return null};BX.selectUtils={addNewOption:function(e,t,r,n,i){e=BX(e);if(e){var a=e.length;if(i!==false){for(var s=0;s<a;s++){if(e[s].value==t){return}}}e.options[a]=new Option(r,t,false,false)}if(n===true){this.sortSelect(e)}},deleteOption:function(e,t){e=BX(e);if(e){for(var r=0;r<e.length;r++){if(e[r].value==t){e.remove(r);break}}}},deleteSelectedOptions:function(e){e=BX(e);if(e){var t=0;while(t<e.length){if(e[t].selected){e[t].selected=false;e.remove(t)}else{t++}}}},deleteAllOptions:function(e){e=BX(e);if(e){for(var t=e.length-1;t>=0;t--){e.remove(t)}}},optionCompare:function(e,t){var r=e.optText.toLowerCase();var n=t.optText.toLowerCase();if(r>n)return 1;if(r<n)return-1;return 0},sortSelect:function(e){e=BX(e);if(e){var t=[];var r=e.options.length;var n;for(n=0;n<r;n++){t[n]={optText:e[n].text,optValue:e[n].value}}t.sort(this.optionCompare);e.length=0;r=t.length;for(n=0;n<r;n++){e[n]=new Option(t[n].optText,t[n].optValue,false,false)}}},selectAllOptions:function(e){e=BX(e);if(e){var t=e.length;for(var r=0;r<t;r++){e[r].selected=true}}},selectOption:function(e,t){e=BX(e);if(e){var r=e.length;for(var n=0;n<r;n++){e[n].selected=e[n].value==t}}},addSelectedOptions:function(e,t,r,n){e=BX(e);if(!e)return;var i=e.length;for(var a=0;a<i;a++)if(e[a].selected)this.addNewOption(t,e[a].value,e[a].text,n,r)},moveOptionsUp:function(e){e=BX(e);if(!e)return;var t=e.length;for(var r=0;r<t;r++){if(e[r].selected&&r>0&&e[r-1].selected==false){var n=new Option(e[r].text,e[r].value);e[r]=new Option(e[r-1].text,e[r-1].value);e[r].selected=false;e[r-1]=n;e[r-1].selected=true}}},moveOptionsDown:function(e){e=BX(e);if(!e)return;var t=e.length;for(var r=t-1;r>=0;r--){if(e[r].selected&&r<t-1&&e[r+1].selected==false){var n=new Option(e[r].text,e[r].value);e[r]=new Option(e[r+1].text,e[r+1].value);e[r].selected=false;e[r+1]=n;e[r+1].selected=true}}}};BX.getEventTarget=function(e){if(e.target){return e.target}else if(e.srcElement){return e.srcElement}return null};BX.convert={toNumber:function(e){if(BX.type.isNumber(e)){return e}e=Number(e);return!isNaN(e)?e:0},nodeListToArray:function(e){try{return Array.prototype.slice.call(e,0)}catch(i){var t=[];for(var r=0,n=e.length;r<n;r++){t.push(e[r])}return t}}};BX.hint=function(e,t,r,n){if(null==r){r=t;t=""}if(null==e.BXHINT){e.BXHINT=new BX.CHint({parent:e,hint:r,title:t,id:n});e.BXHINT.Show()}};BX.hint_replace=function(e,t,r){if(null==r){r=t;t=""}if(!e||!e.parentNode||!r)return null;var n=new BX.CHint({hint:r,title:t});n.CreateParent();e.parentNode.insertBefore(n.PARENT,e);e.parentNode.removeChild(e);n.PARENT.style.marginLeft="5px";return e};BX.CHint=function(e){if(BX.CHint.cssLoaded===false){BX.load(["/bitrix/js/main/core/css/core_hint.css"]);BX.CHint.cssLoaded=true}this.PARENT=BX(e.parent);this.HINT=e.hint;this.HINT_TITLE=e.title;this.PARAMS={};for(var t in this.defaultSettings){if(null==e[t])this.PARAMS[t]=this.defaultSettings[t];else this.PARAMS[t]=e[t]}if(null!=e.id)this.ID=e.id;this.timer=null;this.bInited=false;this.msover=true;if(this.PARAMS.showOnce){this.__show();this.msover=false;this.timer=setTimeout(BX.proxy(this.__hide,this),this.PARAMS.hide_timeout)}else if(this.PARENT){BX.bind(this.PARENT,"mouseover",BX.proxy(this.Show,this));BX.bind(this.PARENT,"mouseout",BX.proxy(this.Hide,this))}};BX.CHint.cssLoaded=false;BX.CHint.openHints=new Set;BX.CHint.globalDisabled=false;BX.CHint.handleMenuOpen=function(){BX.CHint.globalDisabled=true;BX.CHint.openHints.forEach((function(e){e.__hide_immediately()}))};BX.CHint.handleMenuClose=function(){BX.CHint.globalDisabled=false};BX.addCustomEvent("onMenuOpen",BX.CHint.handleMenuOpen);BX.addCustomEvent("onMenuClose",BX.CHint.handleMenuClose);BX.CHint.prototype.defaultSettings={show_timeout:1e3,hide_timeout:500,dx:2,showOnce:false,preventHide:true,min_width:250};BX.CHint.prototype.CreateParent=function(e,t){if(this.PARENT){BX.unbind(this.PARENT,"mouseover",BX.proxy(this.Show,this));BX.unbind(this.PARENT,"mouseout",BX.proxy(this.Hide,this))}if(!t)t={};var r="icon";if(t.type&&(t.type=="link"||t.type=="icon"))r=t.type;if(e)r="element";if(r=="icon"){e=BX.create("IMG",{props:{src:t.iconSrc?t.iconSrc:"/bitrix/js/main/core/images/hint.gif"}})}else if(r=="link"){e=BX.create("A",{props:{href:"javascript:void(0)"},html:"[?]"})}this.PARENT=e;BX.bind(this.PARENT,"mouseover",BX.proxy(this.Show,this));BX.bind(this.PARENT,"mouseout",BX.proxy(this.Hide,this));return this.PARENT};BX.CHint.prototype.Show=function(){this.msover=true;if(null!=this.timer)clearTimeout(this.timer);this.timer=setTimeout(BX.proxy(this.__show,this),this.PARAMS.show_timeout)};BX.CHint.prototype.Hide=function(){this.msover=false;if(null!=this.timer)clearTimeout(this.timer);this.timer=setTimeout(BX.proxy(this.__hide,this),this.PARAMS.hide_timeout)};BX.CHint.prototype.__show=function(){if(!this.msover||this.disabled||BX.CHint.globalDisabled)return;if(!this.bInited)this.Init();if(this.prepareAdjustPos()){this.DIV.style.display="block";BX.ZIndexManager.bringToFront(this.DIV);this.adjustPos();BX.CHint.openHints.add(this);BX.bind(window,"scroll",BX.proxy(this.__onscroll,this));if(this.PARAMS.showOnce){this.timer=setTimeout(BX.proxy(this.__hide,this),this.PARAMS.hide_timeout)}}};BX.CHint.prototype.__onscroll=function(){if(!BX.admin||!BX.admin.panel||!BX.admin.panel.isFixed())return;if(this.scrollTimer)clearTimeout(this.scrollTimer);this.DIV.style.display="none";this.scrollTimer=setTimeout(BX.proxy(this.Reopen,this),this.PARAMS.show_timeout)};BX.CHint.prototype.Reopen=function(){if(null!=this.timer)clearTimeout(this.timer);this.timer=setTimeout(BX.proxy(this.__show,this),50)};BX.CHint.prototype.__hide=function(){if(this.msover)return;if(!this.bInited)return;BX.unbind(window,"scroll",BX.proxy(this.Reopen,this));BX.CHint.openHints.delete(this);if(this.PARAMS.showOnce){this.Destroy()}else{this.DIV.style.display="none"}};BX.CHint.prototype.__hide_immediately=function(){this.msover=false;this.__hide()};BX.CHint.prototype.Init=function(){this.DIV=document.body.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip"},style:{display:"none",position:"absolute",visibility:"hidden"},children:[this.CONTENT=BX.create("DIV",{props:{className:"bx-panel-tooltip-content"},children:[BX.create("DIV",{props:{className:"bx-panel-tooltip-underlay"},children:[BX.create("DIV",{props:{className:"bx-panel-tooltip-underlay-bg"}})]})]})]}));BX.ZIndexManager.register(this.DIV);if(this.ID){this.CONTENT.insertBefore(BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:"bx-panel-tooltip-close"},events:{click:BX.delegate(this.Close,this)}}),this.CONTENT.firstChild)}if(this.HINT_TITLE){this.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip-title"},text:this.HINT_TITLE}))}if(this.HINT){this.CONTENT_TEXT=this.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip-text"}})).appendChild(BX.create("SPAN",{html:this.HINT}))}if(this.PARAMS.preventHide){BX.bind(this.DIV,"mouseout",BX.proxy(this.Hide,this));BX.bind(this.DIV,"mouseover",BX.proxy(this.Show,this))}this.bInited=true};BX.CHint.prototype.setContent=function(e){this.HINT=e;if(this.CONTENT_TEXT)this.CONTENT_TEXT.innerHTML=this.HINT;else this.CONTENT_TEXT=this.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip-text"}})).appendChild(BX.create("SPAN",{html:this.HINT}))};BX.CHint.prototype.prepareAdjustPos=function(){this._wnd={scrollPos:BX.GetWindowScrollPos(),scrollSize:BX.GetWindowScrollSize()};return BX.style(this.PARENT,"display")!="none"};BX.CHint.prototype.getAdjustPos=function(){var e={},t=BX.pos(this.PARENT),r=0;e.top=t.bottom+this.PARAMS.dx;if(BX.admin&&BX.admin.panel.DIV){r=BX.admin.panel.DIV.offsetHeight+this.PARAMS.dx;if(BX.admin.panel.isFixed()){r+=this._wnd.scrollPos.scrollTop}}if(e.top<r)e.top=r;else{if(e.top+this.DIV.offsetHeight>this._wnd.scrollSize.scrollHeight)e.top=t.top-this.PARAMS.dx-this.DIV.offsetHeight}e.left=t.left;if(t.left<this.PARAMS.dx)t.left=this.PARAMS.dx;else{var n=this.DIV.offsetWidth;var i=this._wnd.scrollSize.scrollWidth-n-this.PARAMS.dx;if(e.left>i)e.left=i}return e};BX.CHint.prototype.adjustWidth=function(){if(this.bWidthAdjusted)return;var e=this.DIV.offsetWidth,t=this.DIV.offsetHeight;if(e>this.PARAMS.min_width)e=Math.round(Math.sqrt(1.618*e*t));if(e<this.PARAMS.min_width)e=this.PARAMS.min_width;this.DIV.style.width=e+"px";if(this._adjustWidthInt)clearInterval(this._adjustWidthInt);this._adjustWidthInt=setInterval(BX.delegate(this._adjustWidthInterval,this),5);this.bWidthAdjusted=true};BX.CHint.prototype._adjustWidthInterval=function(){if(!this.DIV||this.DIV.style.display=="none")clearInterval(this._adjustWidthInt);var e=20,t=1500,r=this.DIV.offsetWidth,n=this.CONTENT_TEXT.offsetWidth;if(r>0&&n>0&&r-n<e&&r<t){this.DIV.style.width=r+e+"px";return}clearInterval(this._adjustWidthInt)};BX.CHint.prototype.adjustPos=function(){this.adjustWidth();var e=this.getAdjustPos();this.DIV.style.top=e.top+"px";this.DIV.style.left=e.left+"px"};BX.CHint.prototype.Close=function(){if(this.ID&&BX.WindowManager)BX.WindowManager.saveWindowOptions(this.ID,{display:"off"});this.__hide_immediately();this.Destroy()};BX.CHint.prototype.Destroy=function(){if(this.PARENT){BX.unbind(this.PARENT,"mouseover",BX.proxy(this.Show,this));BX.unbind(this.PARENT,"mouseout",BX.proxy(this.Hide,this))}if(this.DIV){BX.unbind(this.DIV,"mouseover",BX.proxy(this.Show,this));BX.unbind(this.DIV,"mouseout",BX.proxy(this.Hide,this));BX.ZIndexManager.unregister(this.DIV);BX.cleanNode(this.DIV,true)}};BX.CHint.prototype.enable=function(){this.disabled=false};BX.CHint.prototype.disable=function(){this.__hide_immediately();this.disabled=true};function _adjustWait(){if(!this.bxmsg)return;var e=BX.pos(this),t=e.top;if(t<BX.GetDocElement().scrollTop)t=BX.GetDocElement().scrollTop+5;this.bxmsg.style.top=t+5+"px";if(this==BX.GetDocElement()){this.bxmsg.style.right="5px"}else{this.bxmsg.style.left=e.right-this.bxmsg.offsetWidth-5+"px"}}function _processTpl(e,t,r){if(e){if(r)e.parentNode.removeChild(e);var n={},i=BX.findChildren(e,{attribute:"data-role"},true);for(var a=0,s=i.length;a<s;a++){n[i[a].getAttribute("data-role")]=i[a]}t.apply(e,[n])}}function _checkNode(e,t){t=t||{};if(BX.type.isFunction(t))return t.call(window,e);if(!t.allowTextNodes&&!BX.type.isElementNode(e))return false;var r,n,i;for(r in t){if(t.hasOwnProperty(r)){switch(r){case"tag":case"tagName":if(BX.type.isString(t[r])){if(e.tagName.toUpperCase()!=t[r].toUpperCase())return false}else if(t[r]instanceof RegExp){if(!t[r].test(e.tagName))return false}break;case"class":case"className":if(BX.type.isString(t[r])){if(!BX.hasClass(e,t[r]))return false}else if(t[r]instanceof RegExp){if(!BX.type.isString(e.className)||!t[r].test(e.className))return false}break;case"attr":case"attrs":case"attribute":if(BX.type.isString(t[r])){if(!e.getAttribute(t[r]))return false}else if(BX.type.isArray(t[r])){for(n=0,i=t[r].length;n<i;n++){if(t[r]&&!e.getAttribute(t[r]))return false}}else{for(n in t[r]){if(t[r].hasOwnProperty(n)){var a=e.getAttribute(n);if(t[r][n]instanceof RegExp){if(!BX.type.isString(a)||!t[r][n].test(a)){return false}}else{if(a!=""+t[r][n]){return false}}}}}break;case"property":case"props":if(BX.type.isString(t[r])){if(!e[t[r]])return false}else if(BX.type.isArray(t[r])){for(n=0,i=t[r].length;n<i;n++){if(t[r]&&!e[t[r]])return false}}else{for(n in t[r]){if(BX.type.isString(t[r][n])){if(e[n]!=t[r][n])return false}else if(t[r][n]instanceof RegExp){if(!BX.type.isString(e[n])||!t[r][n].test(e[n]))return false}}}break;case"callback":return t[r](e)}}}return true}function Trash(){var e,t;for(e=0,t=garbageCollectors.length;e<t;e++){try{garbageCollectors[e].callback.apply(garbageCollectors[e].context||window);delete garbageCollectors[e];garbageCollectors[e]=null}catch(e){}}}if(window.attachEvent)window.attachEvent("onunload",Trash);else if(window.addEventListener)window.addEventListener("unload",Trash,false);else window.onunload=Trash;BX(BX.DoNothing);window.BX=BX;BX.browser.addGlobalClass();BX.data=function(e,t,r){if(typeof e=="undefined")return undefined;if(typeof t=="undefined")return undefined;if(typeof r!="undefined"){dataStorage.set(e,t,r)}else{var n;if((n=dataStorage.get(e,t))!=undefined){return n}else{if("getAttribute"in e){n=e.getAttribute("data-"+t.toString());if(n===null){return undefined}return n}}return undefined}};BX.DataStorage=function(){this.keyOffset=1;this.data={};this.uniqueTag="BX-"+Math.random();this.resolve=function(e,t){if(typeof e[this.uniqueTag]=="undefined")if(t){try{Object.defineProperty(e,this.uniqueTag,{value:this.keyOffset++})}catch(t){e[this.uniqueTag]=this.keyOffset++}}else return undefined;return e[this.uniqueTag]};this.get=function(e,t){if(e!=document&&!BX.type.isElementNode(e)||typeof t=="undefined")return undefined;e=this.resolve(e,false);if(typeof e=="undefined"||typeof this.data[e]=="undefined")return undefined;return this.data[e][t]};this.set=function(e,t,r){if(e!=document&&!BX.type.isElementNode(e)||typeof r=="undefined")return;var n=this.resolve(e,true);if(typeof this.data[n]=="undefined")this.data[n]={};this.data[n][t]=r}};var dataStorage=new BX.DataStorage})(window.BX);(function(e){if(!e.BX){e.BX={}}var t=e.BX;t.Promise=function(e,t){this.state=null;this.value=null;this.reason=null;this.next=null;this.ctx=t||this;this.onFulfilled=[];this.onRejected=[]};t.Promise.prototype.fulfill=function(e){this.checkState();this.value=e;this.state=true;this.execute()};t.Promise.prototype.reject=function(e){this.checkState();this.reason=e;this.state=false;this.execute()};t.Promise.prototype.then=function(e,r){if(typeof e=="function"||e instanceof Function){this.onFulfilled.push(e)}if(typeof r=="function"||r instanceof Function){this.onRejected.push(r)}if(this.next===null){this.next=new t.Promise(null,this.ctx)}if(this.state!==null){this.execute()}return this.next};t.Promise.prototype.catch=function(e){if(typeof e=="function"||e instanceof Function){this.onRejected.push(e)}if(this.next===null){this.next=new t.Promise(null,this.ctx)}if(this.state!==null){this.execute()}return this.next};t.Promise.prototype.setAutoResolve=function(e,t){this.timer=setTimeout(function(){if(this.state===null){this[e?"fulfill":"reject"]()}}.bind(this),t||15)};t.Promise.prototype.cancelAutoResolve=function(){clearTimeout(this.timer)};t.Promise.prototype.resolve=function(e){var t=this;if(this===e){this.reject(new TypeError("Promise cannot fulfill or reject itself"))}else if(e&&e.toString()==="[object BX.Promise]"){e.then((function(e){t.fulfill(e)}),(function(e){t.reject(e)}))}else{this.fulfill(e)}};t.Promise.prototype.toString=function(){return"[object BX.Promise]"};t.Promise.prototype.execute=function(){if(this.state===null){return}var r=undefined;var n=undefined;var i=undefined;var a;if(this.state===true){if(this.onFulfilled.length){try{for(a=0;a<this.onFulfilled.length;a++){i=this.onFulfilled[a].apply(this.ctx,[this.value]);if(typeof i!="undefined"){r=i}}}catch(r){if("console"in e){console.dir(r)}if(typeof t.debug!=="undefined"){t.debug(r)}n=r}}else{r=this.value}}else if(this.state===false){if(this.onRejected.length){try{for(a=0;a<this.onRejected.length;a++){i=this.onRejected[a].apply(this.ctx,[this.reason]);if(typeof i!="undefined"){r=i}}}catch(r){if("console"in e){console.dir(r)}if(typeof t.debug!=="undefined"){t.debug(r)}n=r}}else{n=this.reason}}if(this.next!==null){if(typeof n!="undefined"){this.next.reject(n)}else if(typeof r!="undefined"){this.next.resolve(r)}}};t.Promise.prototype.checkState=function(){if(this.state!==null){throw new Error("You can not do fulfill() or reject() multiple times")}}})(window);(function(e){if(e.BX.ajax)return;var t=e.BX,r={},n={method:"GET",dataType:"html",timeout:0,async:true,processData:true,scriptsRunFirst:false,emulateOnload:true,skipAuthCheck:false,start:true,cache:true,preparePost:true,headers:false,lsTimeout:30,lsForce:false},i={},a=[],s={url_utf:/[^\034-\254]+/g,script_self:/\/bitrix\/js\/main\/core\/core(_ajax)*.js$/i,script_self_window:/\/bitrix\/js\/main\/core\/core_window.js$/i,script_self_admin:/\/bitrix\/js\/main\/core\/core_admin.js$/i,script_onload:/window.onload/g};t.ajax=function(e){var i,a;if(!e||!e.url||!t.type.isString(e.url)){return false}for(var u in r)if(typeof e[u]=="undefined")e[u]=r[u];r={};for(u in n)if(typeof e[u]=="undefined")e[u]=n[u];e.method=e.method.toUpperCase();if(!t.localStorage)e.lsId=null;if(t.browser.IsIE()){var l=s.url_utf.exec(e.url);if(l){do{e.url=e.url.replace(l,t.util.urlencode(l));l=s.url_utf.exec(e.url)}while(l)}}if(e.dataType=="json")e.emulateOnload=false;if(!e.cache&&e.method=="GET")e.url=t.ajax._uncache(e.url);if(e.method=="POST"){if(e.preparePost){e.data=t.ajax.prepareData(e.data)}else if(o(e.headers)==="application/json"){const r=t.Type.isPlainObject(e.data)||t.Type.isString(e.data)||t.Type.isNumber(e.data)||t.Type.isBoolean(e.data)||t.Type.isArray(e.data);if(r){e.data=JSON.stringify(e.data)}}}var c=true;if(e.lsId&&!e.lsForce){var f=t.localStorage.get("ajax-"+e.lsId);if(f!==null){c=false;var d=function(r){if(r.key=="ajax-"+e.lsId&&r.value!="BXAJAXWAIT"){var n=r.value,i=!!r.oldValue&&n==null;if(!i)t.ajax.__run(e,n);else if(e.onfailure)e.onfailure("timeout");t.removeCustomEvent("onLocalStorageChange",d)}};if(f=="BXAJAXWAIT"){t.addCustomEvent("onLocalStorageChange",d)}else{setTimeout((function(){d({key:"ajax-"+e.lsId,value:f})}),10)}}}if(c){e.xhr=t.ajax.xhr();if(!e.xhr)return;if(e.lsId){t.localStorage.set("ajax-"+e.lsId,"BXAJAXWAIT",e.lsTimeout)}if(t.Type.isFunction(e.onprogress)){t.bind(e.xhr,"progress",e.onprogress)}if(t.Type.isFunction(e.onprogressupload)&&e.xhr.upload){t.bind(e.xhr.upload,"progress",e.onprogressupload)}e.xhr.open(e.method,e.url,e.async);if(!e.skipBxHeader&&!t.ajax.isCrossDomain(e.url)){e.xhr.setRequestHeader("Bx-ajax","true")}if(e.method=="POST"&&e.preparePost){e.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}if(typeof e.headers=="object"){for(u=0;u<e.headers.length;u++)e.xhr.setRequestHeader(e.headers[u].name,e.headers[u].value)}var p=false;var h=e.xhr.onreadystatechange=function(r){if(p)return;if(r==="timeout"){if(e.onfailure){e.onfailure("timeout","",e)}t.onCustomEvent(e.xhr,"onAjaxFailure",["timeout","",e]);e.xhr.onreadystatechange=t.DoNothing;e.xhr.abort();if(e.async){e.xhr=null}}else{if(e.xhr.readyState==4||r=="run"){i=t.ajax.xhrSuccess(e.xhr)?"success":"error";p=true;e.xhr.onreadystatechange=t.DoNothing;if(i=="success"){var n=!!e.skipAuthCheck||t.ajax.isCrossDomain(e.url)?false:e.xhr.getResponseHeader("X-Bitrix-Ajax-Status");if(!!n&&n=="Authorize"){if(e.onfailure){e.onfailure("auth",e.xhr.status,e)}t.onCustomEvent(e.xhr,"onAjaxFailure",["auth",e.xhr.status,e])}else{var a=e.xhr.responseText;if(e.lsId){t.localStorage.set("ajax-"+e.lsId,a,e.lsTimeout)}t.ajax.__run(e,a)}}else{if(e.onfailure){e.onfailure("status",e.xhr.status,e)}t.onCustomEvent(e.xhr,"onAjaxFailure",["status",e.xhr.status,e])}if(e.async){e.xhr=null}}}};if(e.async&&e.timeout>0){setTimeout((function(){if(e.xhr&&!p){h("timeout")}}),e.timeout*1e3)}if(e.start){e.xhr.send(e.data);if(!e.async){h("run")}}return e.xhr}};t.ajax.xhr=function(){if(e.XMLHttpRequest){try{return new XMLHttpRequest}catch(e){}}else if(e.ActiveXObject){try{return new e.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new e.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new e.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}return null};t.ajax.isCrossDomain=function(r,n){n=n||e.location;if(r.indexOf("//")===0){r=n.protocol+r}if(r.indexOf("http")!==0){return false}var i=e.document.createElement("a");i.href=r;return i.protocol!==n.protocol||i.hostname!==n.hostname||t.ajax.getHostPort(i.protocol,i.host)!==t.ajax.getHostPort(n.protocol,n.host)};t.ajax.getHostPort=function(e,t){var r=/:(\d+)$/.exec(t);if(r){return r[1]}else{if(e==="http:"){return"80"}else if(e==="https:"){return"443"}}return""};t.ajax.__prepareOnload=function(r,n){if(r.length>0){t.ajax["onload_"+n]=null;for(var i=0,a=r.length;i<a;i++){if(r[i].isInternal){r[i].JS=r[i].JS.replace(s.script_onload,"BX.ajax.onload_"+n)}}}t.CaptureEventsGet();t.CaptureEvents(e,"load")};t.ajax.__runOnload=function(r){if(null!=t.ajax["onload_"+r]){t.ajax["onload_"+r].apply(e);t.ajax["onload_"+r]=null}var n=t.CaptureEventsGet();if(n){for(var i=0;i<n.length;i++)n[i].apply(e)}};t.ajax.__run=function(e,r){if(!e.processData){if(e.onsuccess){e.onsuccess(r)}t.onCustomEvent(e.xhr,"onAjaxSuccess",[r,e])}else{r=t.ajax.processRequestData(r,e)}};t.ajax._onParseJSONFailure=function(e){this.jsonFailure=true;this.jsonResponse=e;this.jsonProactive=/^\[WAF\]/.test(e)};t.ajax.processRequestData=function(e,r){var n,i=[],a=[];switch(r.dataType.toUpperCase()){case"JSON":var s=r.xhr||{};t.addCustomEvent(s,"onParseJSONFailure",t.proxy(t.ajax._onParseJSONFailure,r));n=t.parseJSON(e,s);t.removeCustomEvent(s,"onParseJSONFailure",t.proxy(t.ajax._onParseJSONFailure,r));if(!!n&&t.type.isArray(n["bxjs"])){for(var o=0;o<n["bxjs"].length;o++){if(t.type.isNotEmptyString(n["bxjs"][o])){i.push({isInternal:false,JS:n["bxjs"][o],bRunFirst:r.scriptsRunFirst})}else{i.push(n["bxjs"][o])}}}if(!!n&&t.type.isArray(n["bxcss"])){a=n["bxcss"]}break;case"SCRIPT":i.push({isInternal:true,JS:e,bRunFirst:r.scriptsRunFirst});n=e;break;default:var u=t.processHTML(e,r.scriptsRunFirst);n=u.HTML;i=u.SCRIPT;a=u.STYLE;break}if(a.length>0){t.loadCSS(a)}let l=null;if(r.emulateOnload){l=parseInt(Math.random()*1e6);t.ajax.__prepareOnload(i,l)}const c=t.defer((function(){if(r.emulateOnload){t.ajax.__runOnload(l)}t.onCustomEvent(r.xhr,"onAjaxSuccessFinish",[r])}));try{if(!!r.jsonFailure){throw{type:"json_failure",data:r.jsonResponse,bProactive:r.jsonProactive}}r.scripts=i;t.ajax.processScripts(r.scripts,true);if(r.onsuccess){r.onsuccess(n)}t.onCustomEvent(r.xhr,"onAjaxSuccess",[n,r]);t.ajax.processScripts(r.scripts,false,c)}catch(e){if(r.onfailure)r.onfailure("processing",e);t.onCustomEvent(r.xhr,"onAjaxFailure",["processing",e,r])}};t.ajax.processScripts=function(e,r,n){var i=[],a="";n=n||t.DoNothing;for(var s=0,o=e.length;s<o;s++){if(typeof r!="undefined"&&r!=!!e[s].bRunFirst)continue;if(e[s].isInternal)a+=";"+e[s].JS;else i.push(e[s].JS)}i=t.util.array_unique(i);var u=a.length>0?function(){t.evalGlobal(a)}:t.DoNothing;if(i.length>0){t.load(i,(function(){u();n()}))}else{u();n()}};t.ajax.prepareData=function(e,r){var n="";if(t.type.isString(e))n=e;else if(null!=e){for(var i in e){if(e.hasOwnProperty(i)){if(n.length>0)n+="&";var a=t.util.urlencode(i);if(r)a=r+"["+a+"]";if(typeof e[i]=="object")n+=t.ajax.prepareData(e[i],a);else n+=a+"="+t.util.urlencode(e[i])}}}return n};t.ajax.xhrSuccess=function(e){return e.status>=200&&e.status<300||e.status===304||e.status===1223||e.status===0};t.ajax.Setup=function(e,t){t=!!t;for(var i in e){if(t)r[i]=e[i];else n[i]=e[i]}};t.ajax.replaceLocalStorageValue=function(e,r,n){if(!!t.localStorage)t.localStorage.set("ajax-"+e,r,n)};t.ajax._uncache=function(e){return e+((e.indexOf("?")!==-1?"&":"?")+"_="+(new Date).getTime())};t.ajax.get=function(e,r,n){if(t.type.isFunction(r)){n=r;r=""}r=t.ajax.prepareData(r);if(r){e+=(e.indexOf("?")!==-1?"&":"?")+r;r=""}return t.ajax({method:"GET",dataType:"html",url:e,data:"",onsuccess:n})};t.ajax.getCaptcha=function(e){return t.ajax.loadJSON("/bitrix/tools/ajax_captcha.php",e)};t.ajax.insertToNode=function(e,n){n=t(n);if(!!n){var i={cancel:false};t.onCustomEvent("onAjaxInsertToNode",[{url:e,node:n,eventArgs:i}]);if(i.cancel===true){return}var a=null;if(!r.denyShowWait){a=t.showWait(n);delete r.denyShowWait}return t.ajax.get(e,(function(e){n.innerHTML=e;t.closeWait(n,a)}))}};t.ajax.post=function(e,r,n){r=t.ajax.prepareData(r);return t.ajax({method:"POST",dataType:"html",url:e,data:r,onsuccess:n})};t.ajax.promise=function(e){var r=new t.Promise;e.onsuccess=function(e){r.fulfill(e)};e.onfailure=function(e,t,n){r.reject({reason:e,data:t,ajaxConfig:n,xhr:n.xhr})};var n=t.ajax(e);if(n){if(typeof e.onrequeststart==="function"){e.onrequeststart(n)}}else{r.reject({reason:"init",data:false})}return r};t.ajax.loadScriptAjax=function(e,r,n){if(t.type.isArray(e)){for(var a=0,o=e.length;a<o;a++){t.ajax.loadScriptAjax(e[a],r,n)}}else{var u=e.replace(/\.js\?.*/,".js");if(s.script_self.test(u))return;if(s.script_self_window.test(u)&&t.CWindow)return;if(s.script_self_admin.test(u)&&t.admin)return;if(typeof i[u]=="undefined"){if(!!n){i[u]="";return t.loadScript(e)}else{return t.ajax({url:e,method:"GET",dataType:"script",processData:true,emulateOnload:false,scriptsRunFirst:true,async:false,start:true,onsuccess:function(e){i[u]=e;if(r)r(e)}})}}else if(r){r(i[u])}}};t.ajax.loadJSON=function(e,r,n,i){if(t.type.isFunction(r)){i=n;n=r;r=""}r=t.ajax.prepareData(r);if(r){e+=(e.indexOf("?")!==-1?"&":"?")+r;r=""}return t.ajax({method:"GET",dataType:"json",url:e,onsuccess:n,onfailure:i})};var o=function(e){if(!t.Type.isArray(e)){return null}var r=e.filter((function(e){return e.name==="Content-Type"})).pop();return r?r.value:null};const u=function(e){if(!t.Type.isPlainObject(e)){console.error("BX.ajax: {analytics} must be an object.");return false}const r=["event","tool","category"];for(const n of r){if(!t.Type.isStringFilled(e[n])){console.error(`BX.ajax: The "${n}" property in the "analytics" object must be a non-empty string.`);return false}}const n=["p1","p2","p3","p4","p5"];for(const r of n){const n=e[r];if(!t.Type.isStringFilled(n)){continue}if(n.split("_").length>2){console.error(`BX.ajax: The "${r}" property (${n}) in the "analytics" object must be a string containing a single underscore.`);return false}}return true};const l=function(e){const r={};if(t.Type.isStringFilled(e.analyticsLabel)||t.Type.isPlainObject(e.analyticsLabel)){r.analyticsLabel=e.analyticsLabel}if(t.Type.isPlainObject(e.analytics)){if(e.analyticsLabel){delete r.analyticsLabel;console.error("BX.ajax: Only {analytics} or {analyticsLabel} should be used. If both are present, {analyticsLabel} will be ignored.")}if(u(e.analytics)){r.st=e.analytics}else{console.error("BX.ajax: {analytics} is invalid and is skipped.")}}return r};const c=function(e){let t=e.getParameters||{};t={...t,...l(e)};if(typeof e.mode!=="undefined"){t.mode=e.mode}if(e.navigation){if(e.navigation.page){t.nav="page-"+e.navigation.page}if(e.navigation.size){if(t.nav){t.nav+="-"}else{t.nav=""}t.nav+="size-"+e.navigation.size}}return t};var f=function(e){e=t.type.isPlainObject(e)?e:{};e.headers=e.headers||[];e.headers.push({name:"X-Bitrix-Csrf-Token",value:t.bitrix_sessid()});if(t.message.SITE_ID){e.headers.push({name:"X-Bitrix-Site-Id",value:t.message.SITE_ID})}if(typeof e.json!=="undefined"){if(!t.type.isPlainObject(e.json)){throw new Error("Wrong `config.json`, plain object expected.")}e.headers.push({name:"Content-Type",value:"application/json"});e.data=e.json;e.preparePost=false}else if(e.data instanceof FormData){e.preparePost=false;if(typeof e.signedParameters!=="undefined"){e.data.append("signedParameters",e.signedParameters)}}else if(t.type.isPlainObject(e.data)||t.Type.isNil(e.data)){e.data=t.type.isPlainObject(e.data)?e.data:{};if(typeof e.signedParameters!=="undefined"){e.data.signedParameters=e.signedParameters}}if(!e.method){e.method="POST"}return e};var d=function(e,r){r=r||false;var n=t.clone(e);var i=null;var a=e.onrequeststart;e.onrequeststart=function(e){i=e;if(t.type.isFunction(a)){a(e)}};var s=n.onrequeststart;n.onrequeststart=function(e){i=e;if(t.type.isFunction(s)){s(e)}};var o=t.ajax.promise(e);return o.then((function(e){if(!r&&t.type.isPlainObject(e)&&t.type.isArray(e.errors)){var i=false;e.errors.forEach((function(e){if(e.code==="invalid_csrf"&&e.customData.csrf){t.message({bitrix_sessid:e.customData.csrf});n.headers=n.headers||[];n.headers=n.headers.filter((function(e){return e&&e.name!=="X-Bitrix-Csrf-Token"}));n.headers.push({name:"X-Bitrix-Csrf-Token",value:t.bitrix_sessid()});i=true}}));if(i){return d(n,true)}}if(!t.type.isPlainObject(e)||e.status!=="success"){var a=new t.Promise;a.reject(e);return a}return e})).catch((function(e){var r=new t.Promise;var n;if(t.type.isPlainObject(e)&&e.xhr&&e.xhr.responseText){try{n=JSON.parse(e.xhr.responseText);e=n}catch(e){}}if(t.type.isPlainObject(e)&&e.status&&e.hasOwnProperty("data")){r.reject(e)}else{r.reject({status:"error",data:{ajaxRejectData:e},errors:[{code:"NETWORK_ERROR",message:"Network error"}]})}return r})).then((function(e){var r=new t.Promise;var n=i.getAllResponseHeaders().trim().split(/[\r\n]+/);var a={};n.forEach((function(e){var t=e.split(": ");var r=t.shift().toLowerCase();a[r]=t.join(": ")}));if(!a["x-process-assets"]){r.fulfill(e);return r}var s=t.prop.getObject(t.prop.getObject(e,"data",{}),"assets",{});var o=[];if(t.Type.isArrayFilled(s.string)){s.string.reduce((function(e,t){if(String(t).length>0&&!e.includes(t)){e.push(t)}return e}),[]).forEach((function(e){if(String(e).startsWith('<script type="extension/settings"')){t.html(document.head,e,{useAdjacentHTML:true})}else{o.push(e)}}))}var u=new Promise((function(e,r){var n=t.prop.getArray(s,"css",[]);t.load(n,(function(){t.loadScript(t.prop.getArray(s,"js",[]),e)}))}));u.then((function(){var n=o.join("\n");t.html(document.head,n,{useAdjacentHTML:true}).then((function(){r.fulfill(e)}))}));return r}))};t.ajax.runAction=function(e,r){r=f(r);var n=c(r);n.action=e;var i="/bitrix/services/main/ajax.php?"+t.ajax.prepareData(n);return d({method:r.method,dataType:"json",url:i,data:r.data,timeout:r.timeout,preparePost:r.preparePost,headers:r.headers,onrequeststart:r.onrequeststart,onprogress:r.onprogress,onprogressupload:r.onprogressupload})};t.ajax.runComponentAction=function(e,r,n){n=f(n);n.mode=n.mode||"ajax";var i=c(n);i.c=e;i.action=r;var a="/bitrix/services/main/ajax.php?"+t.ajax.prepareData(i);return d({method:n.method,dataType:"json",url:a,data:n.data,timeout:n.timeout,preparePost:n.preparePost,headers:n.headers,onrequeststart:n.onrequeststart?n.onrequeststart:null,onprogress:n.onprogress,onprogressupload:n.onprogressupload})};t.ajax.load=function(e,r){if(!t.type.isArray(e))e=[e];var n=0;if(!t.type.isFunction(r))r=t.DoNothing;var i=function(e){if(t.type.isFunction(this.callback))this.callback(e);if(++n>=s)r()};for(var a=0,s=e.length;a<s;a++){switch(e[a].type.toUpperCase()){case"SCRIPT":t.loadScript([e[a].url],t.proxy(i,e[a]));break;case"CSS":t.loadCSS([e[a].url]);if(++n>=s)r();break;case"JSON":t.ajax.loadJSON(e[a].url,t.proxy(i,e[a]));break;default:t.ajax.get(e[a].url,"",t.proxy(i,e[a]));break}}};t.ajax.submit=function(e,r){if(!e.target){if(null==e.BXFormTarget){var n="formTarget_"+Math.random();e.BXFormTarget=document.body.appendChild(t.create("IFRAME",{props:{name:n,id:n,src:"javascript:void(0)"},style:{display:"none"}}))}e.target=e.BXFormTarget.name}e.BXFormCallback=r;t.bind(e.BXFormTarget,"load",t.proxy(t.ajax._submit_callback,e));t.submit(e);return false};t.ajax.submitComponentForm=function(r,n,i){if(!r.target){if(null==r.BXFormTarget){var a="formTarget_"+Math.random();r.BXFormTarget=document.body.appendChild(t.create("IFRAME",{props:{name:a,id:a,src:"javascript:void(0)"},style:{display:"none"}}))}r.target=r.BXFormTarget.name}if(!!i)var s=t.showWait(n);r.BXFormCallback=function(r){if(!!i)t.closeWait(s);var a=function(){if(!!e.bxcompajaxframeonload){setTimeout((function(){e.bxcompajaxframeonload();e.bxcompajaxframeonload=null}),10)}};t(n).innerHTML=r;t.onCustomEvent("onAjaxSuccess",[null,null,a])};t.bind(r.BXFormTarget,"load",t.proxy(t.ajax._submit_callback,r));return true};t.ajax._submit_callback=function(){try{if(this.BXFormTarget.contentWindow.location.href.indexOf("http")!=0)return}catch(e){return}if(this.BXFormCallback)this.BXFormCallback.apply(this,[this.BXFormTarget.contentWindow.document.body.innerHTML]);t.unbindAll(this.BXFormTarget)};t.ajax.prepareForm=function(e,t){t=!!t?t:{};var r,n,i,a=[],s=e.elements.length,o=0,u=0;if(!!e){for(r=0;r<s;r++){i=e.elements[r];if(i.disabled)continue;if(!i.type)continue;switch(i.type.toLowerCase()){case"text":case"textarea":case"password":case"number":case"hidden":case"select-one":a.push({name:i.name,value:i.value});u+=i.name.length+i.value.length;break;case"file":if(!!i.files){for(n=0;n<i.files.length;n++){o++;a.push({name:i.name,value:i.files[n],file:true});u+=i.files[n].size}}break;case"radio":case"checkbox":if(i.checked){a.push({name:i.name,value:i.value});u+=i.name.length+i.value.length}break;case"select-multiple":for(var l=0;l<i.options.length;l++){if(i.options[l].selected){a.push({name:i.name,value:i.options[l].value});u+=i.name.length+i.options[l].length}}break;default:break}}r=0;u=0;var c=t,f,d,p,h;while(r<a.length){var v=a[r].name.indexOf("[");if(h){c[a[r].name]={};c[a[r].name][h.replace(/\[|\]/gi,"")]=a[r].value;c=t;h=null;r++}else if(v==-1){c[a[r].name]=a[r].value;c=t;r++}else{f=a[r].name.substring(0,v);d=a[r].name.substring(v+1);p=d.indexOf("]");if(p==-1){if(!c[f])c[f]=[];c=t;r++}else if(p==0){if(!c[f])c[f]=[];c=c[f];a[r].name=""+c.length;if(d.substring(p+1).indexOf("[")===0)h=d.substring(0,p)+d.substring(p+1)}else{if(!c[f])c[f]={};c=c[f];a[r].name=d.substring(0,p)+d.substring(p+1)}}}}return{data:t,filesCount:o,roughSize:u}};t.ajax.submitAjax=function(r,n){n=n!==null&&typeof n=="object"?n:{};n.url=n["url"]||r.getAttribute("action");var i=n["data"]||{};n.data=t.ajax.prepareForm(r).data;for(var a in i){if(i.hasOwnProperty(a)){n.data[a]=i[a]}}if(!e["FormData"]){t.ajax(n)}else{var s=function(e){var t=Object.prototype.toString.call(e);return t=="[object File]"||t=="[object Blob]"},o=function(e,t,r){if(!!r&&typeof r=="object"&&!s(r)){for(var n in r){if(r.hasOwnProperty(n)){o(e,t==""?n:t+"["+n+"]",r[n])}}}else e.append(t,!!r?r:"")},u=function(e){var r={};if(null!=e){if(typeof e=="object"){for(var n in e){if(e.hasOwnProperty(n)){var i=t.util.urlencode(n);if(typeof e[n]=="object"&&e[n]["file"]!==true)r[i]=u(e[n]);else if(e[n]["file"]===true)r[i]=e[n]["value"];else r[i]=t.util.urlencode(e[n])}}}else r=t.util.urlencode(e)}return r},l=new e.FormData;if(n.method!=="POST"){n.data=t.ajax.prepareData(n.data);if(n.data){n.url+=(n.url.indexOf("?")!==-1?"&":"?")+n.data;n.data=""}}else{if(n.preparePost===true)n.data=u(n.data);o(l,"",n.data);n.data=l}n.preparePost=false;n.start=false;var c=t.ajax(n);if(!!n["onprogress"])c.upload.addEventListener("progress",(function(e){var t=null;if(e.lengthComputable&&(e.total||e["totalSize"])){t=e.loaded*100/(e.total||e["totalSize"])}n["onprogress"](e,t)}));c.send(l)}};t.ajax.UpdatePageData=function(e){if(e.TITLE)t.ajax.UpdatePageTitle(e.TITLE);if(e.WINDOW_TITLE||e.TITLE)t.ajax.UpdateWindowTitle(e.WINDOW_TITLE||e.TITLE);if(e.NAV_CHAIN)t.ajax.UpdatePageNavChain(e.NAV_CHAIN);if(e.CSS&&e.CSS.length>0)t.loadCSS(e.CSS);if(e.SCRIPTS&&e.SCRIPTS.length>0){var r=function(n,i,a){if(!!i&&t.type.isArray(i.scripts)){for(var s=0,o=e.SCRIPTS.length;s<o;s++){i.scripts.push({isInternal:false,JS:e.SCRIPTS[s]})}}else{t.loadScript(e.SCRIPTS,a)}t.removeCustomEvent("onAjaxSuccess",r)};t.addCustomEvent("onAjaxSuccess",r)}else{var n=function(e,r,i){if(t.type.isFunction(i)){i()}t.removeCustomEvent("onAjaxSuccess",n)};t.addCustomEvent("onAjaxSuccess",n)}};t.ajax.UpdatePageTitle=function(e){var r=t("pagetitle");if(r){t.remove(r.firstChild);if(!r.firstChild)r.appendChild(document.createTextNode(e));else r.insertBefore(document.createTextNode(e),r.firstChild)}};t.ajax.UpdateWindowTitle=function(e){document.title=e};t.ajax.UpdatePageNavChain=function(e){var r=t("navigation");if(r){r.innerHTML=e}};t.userOptions={options:null,bSend:false,delay:5e3,path:"/bitrix/admin/user_options.php?"};t.userOptions.setAjaxPath=function(e){console.warn("BX.userOptions.setAjaxPath is deprecated. There is no way to change ajax path.")};t.userOptions.save=function(e,r,n,i,a){if(t.userOptions.options===null){t.userOptions.options={}}a=Boolean(a);t.userOptions.options[`${e}.${r}.${n}`]=[e,r,n,i,a];const s=t.userOptions.__get();if(s){document.cookie=`${t.message("COOKIE_PREFIX")}_LAST_SETTINGS=${encodeURIComponent(s)}&sessid=${t.bitrix_sessid()}; expires=Thu, 31 Dec ${(new Date).getFullYear()+1} 23:59:59 GMT; path=/;`}if(!t.userOptions.bSend){t.userOptions.bSend=true;setTimeout((()=>{t.userOptions.send(null)}),t.userOptions.delay)}};t.userOptions.send=function(e){const r=t.userOptions.__get_values({backwardCompatibility:true});t.userOptions.options=null;t.userOptions.bSend=false;if(r){document.cookie=`${t.message("COOKIE_PREFIX")}_LAST_SETTINGS=; path=/;`;t.ajax.runAction("main.userOption.saveOptions",{json:{newValues:r}}).then((r=>{if(t.type.isFunction(e)){e(r)}}))}};t.userOptions.del=function(e,r,n,i){t.ajax.runAction("main.userOption.deleteOption",{json:{category:e,name:r,common:n}}).then((e=>{if(t.type.isFunction(i)){i(e)}}))};t.userOptions.__get_values=function({backwardCompatibility:e}){if(!t.userOptions||!t.Type.isPlainObject(t.userOptions.options)){return null}const r=0;const n=1;const i=2;const a=3;const s=4;const o={p:[]};let u=-1;let l="";Object.entries(t.userOptions.options).forEach((([t,c])=>{const f=c[r];const d=c[n];const p=`${f}.${d}`;if(l!==p){u++;o.p.push({c:f,n:d,v:{}});if(c[s]===true){o.p[u].d="Y"}l=p}if(c[i]===null){o.p[u].v=c[a]}else{let t=c[a];if(e&&Array.isArray(c[a])){t=c[a].join(",")}o.p[u].v[c[i]]=t}}));return o.p.length>0?o.p:null};t.userOptions.__get=function(){if(!t.userOptions.options)return"";var e="",r=-1,n="",i,a;for(a in t.userOptions.options){if(t.userOptions.options.hasOwnProperty(a)){i=t.userOptions.options[a];if(n!=i[0]+"."+i[1]){r++;e+="&p["+r+"][c]="+t.util.urlencode(i[0]);e+="&p["+r+"][n]="+t.util.urlencode(i[1]);if(i[4]==true)e+="&p["+r+"][d]=Y";n=i[0]+"."+i[1]}var s=i[2];var o=i[3];if(s===null){e+="&p["+r+"][v]="+t.util.urlencode(o)}else{e+="&p["+r+"][v]["+t.util.urlencode(s)+"]="+t.util.urlencode(o)}}}return e.substr(1)};t.ajax.history={expected_hash:"",obParams:null,obFrame:null,obImage:null,obTimer:null,bInited:false,bHashCollision:false,bPushState:!!(history.pushState&&t.type.isFunction(history.pushState)),startState:null,init:function(r){if(t.ajax.history.bInited)return;this.obParams=r;var n=this.obParams.getState();if(t.ajax.history.bPushState){t.ajax.history.expected_hash=e.location.pathname;if(e.location.search)t.ajax.history.expected_hash+=e.location.search;t.ajax.history.put(n,t.ajax.history.expected_hash,"",true);setTimeout((function(){t.bind(e,"popstate",t.ajax.history.__hashListener)}),500)}else{t.ajax.history.expected_hash=e.location.hash;if(!t.ajax.history.expected_hash||t.ajax.history.expected_hash=="#")t.ajax.history.expected_hash="__bx_no_hash__";p.put(t.ajax.history.expected_hash,n);t.ajax.history.obTimer=setTimeout(t.ajax.history.__hashListener,500);if(t.browser.IsIE()){t.ajax.history.obFrame=document.createElement("IFRAME");t.hide_object(t.ajax.history.obFrame);document.body.appendChild(t.ajax.history.obFrame);t.ajax.history.obFrame.contentWindow.document.open();t.ajax.history.obFrame.contentWindow.document.write(t.ajax.history.expected_hash);t.ajax.history.obFrame.contentWindow.document.close()}else if(t.browser.IsOpera()){t.ajax.history.obImage=document.createElement("IMG");t.hide_object(t.ajax.history.obImage);document.body.appendChild(t.ajax.history.obImage);t.ajax.history.obImage.setAttribute("src","javascript:location.href = 'javascript:BX.ajax.history.__hashListener();';")}}t.ajax.history.bInited=true},__hashListener:function(r){r=r||e.event||{state:false};if(t.ajax.history.bPushState){t.ajax.history.obParams.setState(r.state||t.ajax.history.startState)}else{if(t.ajax.history.obTimer){e.clearTimeout(t.ajax.history.obTimer);t.ajax.history.obTimer=null}var n;if(null!=t.ajax.history.obFrame)n=t.ajax.history.obFrame.contentWindow.document.body.innerText;else n=e.location.hash;if(!n||n=="#")n="__bx_no_hash__";if(n.indexOf("#")==0)n=n.substring(1);if(n!=t.ajax.history.expected_hash){var i=p.get(n);if(i){t.ajax.history.obParams.setState(i);t.ajax.history.expected_hash=n;if(null!=t.ajax.history.obFrame){var a=n=="__bx_no_hash__"?"":n;if(e.location.hash!=a&&e.location.hash!="#"+a)e.location.hash=a}}}t.ajax.history.obTimer=setTimeout(t.ajax.history.__hashListener,500)}},put:function(r,n,i,a){if(this.bPushState){if(!a){history.pushState(r,"",n)}else{t.ajax.history.startState=r}}else{if(typeof i!="undefined")n=i;else n="view"+n;p.put(n,r);t.ajax.history.expected_hash=n;e.location.hash=t.util.urlencode(n);if(null!=t.ajax.history.obFrame){t.ajax.history.obFrame.contentWindow.document.open();t.ajax.history.obFrame.contentWindow.document.write(n);t.ajax.history.obFrame.contentWindow.document.close()}}},checkRedirectStart:function(r,n){var i=e.location.hash;if(i.substring(0,1)=="#")i=i.substring(1);var a=i.substring(0,5);if(a=="view/"||a=="view%"){t.ajax.history.bHashCollision=true;document.write("<"+'div id="__ajax_hash_collision_'+n+'" style="display: none;">')}},checkRedirectFinish:function(r,n){document.write("</div>");var i=e.location.hash;if(i.substring(0,1)=="#")i=i.substring(1);t.ready((function(){var e=i.substring(0,5);if(e=="view/"||e=="view%"){var a=t("__ajax_hash_collision_"+n);var s=a.firstChild;t.cleanNode(s);a.style.display="block";if(e!="view%")i=t.util.urlencode(i);i+=(i.indexOf("%3F")==-1?"%3F":"%26")+r+"="+n;var o="/bitrix/tools/ajax_redirector.php?hash="+i;t.ajax.insertToNode(o,s)}}))}};t.ajax.component=function(e){this.node=e};t.ajax.component.prototype.getState=function(){var r={node:this.node,title:e.document.title,data:t(this.node).innerHTML};var n=t("navigation");if(null!=n)r.nav_chain=n.innerHTML;t.onCustomEvent(t(r.node),"onComponentAjaxHistoryGetState",[r]);return r};t.ajax.component.prototype.setState=function(e){t(e.node).innerHTML=e.data;t.ajax.UpdatePageTitle(e.title);if(e.nav_chain){t.ajax.UpdatePageNavChain(e.nav_chain)}t.onCustomEvent(t(e.node),"onComponentAjaxHistorySetState",[e])};var p={arHistory:{},put:function(e,t){this.arHistory[e]=t},get:function(e){return this.arHistory[e]}};t.ajax.FormData=function(){this.elements=[];this.files=[];this.features={};this.isSupported();this.log("BX FormData init")};t.ajax.FormData.isSupported=function(){var e=new t.ajax.FormData;var r=e.features.supported;e=null;return r};t.ajax.FormData.prototype.log=function(e){if(false){try{if(t.browser.IsIE())e=JSON.stringify(e);console.log(e)}catch(e){}}};t.ajax.FormData.prototype.isSupported=function(){var t={};t.fileReader=e.FileReader&&e.FileReader.prototype.readAsBinaryString;t.readFormData=t.sendFormData=!!e.FormData;t.supported=!!(t.readFormData&&t.sendFormData);this.features=t;this.log("features:");this.log(t);return t.supported};t.ajax.FormData.prototype.append=function(e,t){if(typeof t==="object"){this.files.push({name:e,value:t})}else{this.elements.push({name:e,value:t})}};t.ajax.FormData.prototype.send=function(e,r,n,i){this.log("FD send");this.xhr=t.ajax({method:"POST",dataType:"html",url:e,onsuccess:r,onfailure:i,start:false,preparePost:false});if(n){this.xhr.upload.addEventListener("progress",(function(e){if(e.lengthComputable)n(e.loaded/(e.total||e.totalSize))}),false)}if(this.features.readFormData&&this.features.sendFormData){var a=new FormData;this.log("use browser formdata");for(var s in this.elements){if(this.elements.hasOwnProperty(s))a.append(this.elements[s].name,this.elements[s].value)}for(s in this.files){if(this.files.hasOwnProperty(s))a.append(this.files[s].name,this.files[s].value)}this.xhr.send(a)}return this.xhr};t.addCustomEvent("onAjaxFailure",t.debug)})(window);(function(e,t){"use strict";var r={observer:null,images:{},imageStatus:{hidden:-2,error:-1,undefined:0,inited:1,loaded:2},imageTypes:{image:1,background:2},initObserver:function e(){this.observer=new IntersectionObserver(this.onIntersection.bind(this),{rootMargin:"20% 0% 20% 0%",threshold:.1})},onIntersection:function e(t){t.forEach(function(e){if(e.isIntersecting){this.showImage(e.target)}}.bind(this))},registerImage:function e(r,n,i){if(this.observer===null){this.initObserver()}i=i||{};if(!t.Type.isStringFilled(r)){return}if(t.Type.isObject(this.images[r])){return}var a=document.getElementById(r);if(!t.Type.isDomNode(a)){return}this.observer.observe(a);this.images[r]={id:r,node:null,src:null,dataSrcName:i.dataSrcName||"src",type:null,func:t.Type.isFunction(n)?n:null,status:this.imageStatus.undefined}},registerImages:function e(r,n,i){if(t.Type.isArray(r)){for(var a=0,s=r.length;a<s;a++){this.registerImage(r[a],n,i)}}},showImage:function e(r){var n=r.id;if(!t.Type.isStringFilled(n)){return}var i=this.images[n];if(!t.Type.isPlainObject(i)){return}if(i.status==this.imageStatus.undefined){this.initImage(i)}if(i.status!==this.imageStatus.inited){return}if(!i.node||!i.node.parentNode){i.node=null;i.status=this.imageStatus.error;return}if(i.type==this.imageTypes.image){i.node.src=i.src}else{i.node.style.backgroundImage="url('"+i.src+"')"}i.node.dataset[i.dataSrcName]="";i.status=this.imageStatus.loaded},showImages:function e(r){r=r!==false;for(var n in this.images){if(!this.images.hasOwnProperty(n)){continue}var i=this.images[n];if(i.status==this.imageStatus.undefined){this.initImage(i)}if(i.status!==this.imageStatus.inited){continue}if(!i.node||!i.node.parentNode){i.node=null;i.status=this.imageStatus.error;continue}var a=true;if(r&&t.Type.isFunction(i.func)){a=i.func(i)}if(a===true&&this.isElementVisibleOnScreen(i.node)){if(i.type==this.imageTypes.image){i.node.src=i.src}else{i.node.style.backgroundImage="url('"+i.src+"')"}i.node.dataset[i.dataSrcName]="";i.status=this.imageStatus.loaded}}},initImage:function e(r){r.status=this.imageStatus.error;var n=document.getElementById(r.id);if(!t.Type.isDomNode(n)){return}var i=n.dataset[r.dataSrcName];if(t.Type.isStringFilled(i)){r.node=n;r.src=i;r.status=this.imageStatus.inited;r.type=r.node.tagName.toLowerCase()=="img"?this.imageTypes.image:this.imageTypes.background}},isElementVisibleOnScreen:function e(t){var r=this.getElementCoords(t);var n=window.pageYOffset||document.documentElement.scrollTop;var i=n+document.documentElement.clientHeight;r.bottom=r.top+t.offsetHeight;return r.top>n&&r.top<i||r.bottom<i&&r.bottom>n},isElementVisibleOn2Screens:function e(t){var r=document.documentElement.clientHeight;var n=window.pageYOffset||document.documentElement.scrollTop;var i=n+r;var a=this.getElementCoords(t);a.bottom=a.top+t.offsetHeight;n-=r;i+=r;return a.top>n&&a.top<i||a.bottom<i&&a.bottom>n},getElementCoords:function e(t){var r=t.getBoundingClientRect();return{originTop:r.top,originLeft:r.left,top:r.top+window.pageYOffset,left:r.left+window.pageXOffset}},onScroll:function e(){},clearImages:function e(){this.images=[]}};e.LazyLoad=r})(this.BX=this.BX||{},BX);(function(e){"use strict";var t=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(!!t&&babelHelpers.typeof(t)==="object"){this.params=new Map(Object.entries(t))}else{this.params=new Map}}babelHelpers.createClass(e,[{key:"getParam",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(this.params.has(t)){return this.params.get(t)}return r}},{key:"setParam",value:function e(t,r){this.params.set(t,r)}},{key:"clear",value:function e(){this.params.clear()}}],[{key:"create",value:function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new e(r)}}]);return e}();e.ParamBag=t})(this.BX=this.BX||{});(function(){BX.FixFontSize=function(e){var t,r,n;this.node=null;this.prevWindowSize=0;this.prevWrapperSize=0;this.mainWrapper=null;this.textWrapper=null;this.objList=e.objList;this.minFontSizeList=[];this.minFontSize=0;if(e.onresize){this.prevWindowSize=window.innerWidth||document.documentElement.clientWidth;BX.bind(window,"resize",BX.throttle(this.onResize,350,this))}if(e.onAdaptiveResize){t=this.objList[0].scaleBy||this.objList[0].node;r=getComputedStyle(t);this.prevWrapperSize=parseInt(r["width"])-parseInt(r["paddingLeft"])-parseInt(r["paddingRight"]);BX.bind(window,"resize",BX.throttle(this.onAdaptiveResize,350,this))}this.createTestNodes();this.decrease()};BX.FixFontSize.prototype={createTestNodes:function(){this.textWrapper=BX.create("div",{style:{display:"inline-block",whiteSpace:"nowrap"}});this.mainWrapper=BX.create("div",{style:{height:0,overflow:"hidden"},children:[this.textWrapper]})},insertTestNodes:function(){document.body.appendChild(this.mainWrapper)},removeTestNodes:function(){document.body.removeChild(this.mainWrapper)},decrease:function(){var e,t,r,n;this.insertTestNodes();for(var i=this.objList.length-1;i>=0;i--){r=this.objList[i].scaleBy||this.objList[i].node;n=getComputedStyle(r);e=parseInt(n["width"])-parseInt(n["paddingLeft"])-parseInt(n["paddingRight"]);t=parseInt(getComputedStyle(this.objList[i].node)["font-size"]);this.textWrapperSetStyle(this.objList[i].node);if(this.textWrapperInsertText(this.objList[i].node)){while(this.textWrapper.offsetWidth>e&&t>0){this.textWrapper.style.fontSize=--t+"px"}if(this.objList[i].smallestValue){this.minFontSize=this.minFontSize?Math.min(this.minFontSize,t):t;this.minFontSizeList.push(this.objList[i].node)}else{this.objList[i].node.style.fontSize=t+"px"}}}if(this.minFontSizeList.length>0)this.setMinFont();this.removeTestNodes()},increase:function(){this.insertTestNodes();var e,t,r,n;this.insertTestNodes();for(var i=this.objList.length-1;i>=0;i--){r=this.objList[i].scaleBy||this.objList[i].node;n=getComputedStyle(r);e=parseInt(n["width"])-parseInt(n["paddingLeft"])-parseInt(n["paddingRight"]);t=parseInt(getComputedStyle(this.objList[i].node)["font-size"]);this.textWrapperSetStyle(this.objList[i].node);if(this.textWrapperInsertText(this.objList[i].node)){while(this.textWrapper.offsetWidth<e&&t<this.objList[i].maxFontSize){this.textWrapper.style.fontSize=++t+"px"}t--;if(this.objList[i].smallestValue){this.minFontSize=this.minFontSize?Math.min(this.minFontSize,t):t;this.minFontSizeList.push(this.objList[i].node)}else{this.objList[i].node.style.fontSize=t+"px"}}}if(this.minFontSizeList.length>0)this.setMinFont();this.removeTestNodes()},setMinFont:function(){for(var e=this.minFontSizeList.length-1;e>=0;e--){this.minFontSizeList[e].style.fontSize=this.minFontSize+"px"}this.minFontSize=0},onResize:function(){var e=window.innerWidth||document.documentElement.clientWidth;if(this.prevWindowSize>e)this.decrease();else if(this.prevWindowSize<e)this.increase();this.prevWindowSize=e},onAdaptiveResize:function(){var e=this.objList[0].scaleBy||this.objList[0].node,t=getComputedStyle(e),r=parseInt(t["width"])-parseInt(t["paddingLeft"])-parseInt(t["paddingRight"]);if(this.prevWrapperSize>r)this.decrease();else if(this.prevWrapperSize<r)this.increase();this.prevWrapperSize=r},textWrapperInsertText:function(e){if(e.textContent){this.textWrapper.textContent=e.textContent;return true}else if(e.innerText){this.textWrapper.innerText=e.innerText;return true}else{return false}},textWrapperSetStyle:function(e){this.textWrapper.style.fontFamily=getComputedStyle(e)["font-family"];this.textWrapper.style.fontSize=getComputedStyle(e)["font-size"];this.textWrapper.style.fontStyle=getComputedStyle(e)["font-style"];this.textWrapper.style.fontWeight=getComputedStyle(e)["font-weight"];this.textWrapper.style.lineHeight=getComputedStyle(e)["line-height"]}};BX.FixFontSize.init=function(e){return new BX.FixFontSize(e)}})()})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:51:"/bitrix/js/main/core/core_uf.min.js?167663848411603";s:6:"source";s:31:"/bitrix/js/main/core/core_uf.js";s:3:"min";s:35:"/bitrix/js/main/core/core_uf.min.js";s:3:"map";s:35:"/bitrix/js/main/core/core_uf.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Main.UF");if(typeof BX.Main.UF.Manager!=="undefined"){return}var e={};BX.Main.UF.Manager=function(){this.mode=this.mode||"";this.ajaxUrl="/bitrix/tools/uf.php"};BX.Main.UF.Manager.getEdit=function(e,t){return BX.Main.UF.EditManager.get(e,t)};BX.Main.UF.Manager.getView=function(e,t){return BX.Main.UF.ViewManager.get(e,t)};BX.Main.UF.Manager.prototype.get=function(e,t){if(!this.mode){this.displayError(["No mode set. Use BX.UF.EditManager or BX.UF.ViewManager"]);return}return this.query(this.mode,{FIELDS:e.FIELDS,FORM:e.FORM||"",CONTEXT:e.CONTEXT||"",MEDIA_TYPE:e.MEDIA_TYPE||""},t)};BX.Main.UF.Manager.prototype.add=function(e,t){if(!this.mode){this.displayError(["No mode set. Use BX.UF.EditManager or BX.UF.ViewManager"]);return}return this.query(this.mode,{action:"add",FIELDS:e.FIELDS,FORM:e.FORM||""},t)};BX.Main.UF.Manager.prototype.update=function(e,t){if(!this.mode){this.displayError(["No mode set. Use BX.UF.EditManager or BX.UF.ViewManager"]);return}return this.query(this.mode,{action:"update",FIELDS:e.FIELDS,FORM:e.FORM||""},t)};BX.Main.UF.Manager.prototype.delete=function(e,t){if(!this.mode){this.displayError(["No mode set. Use BX.UF.EditManager or BX.UF.ViewManager"]);return}return this.query(this.mode,{action:"delete",FIELDS:e.FIELDS,FORM:e.FORM||""},t)};BX.Main.UF.Manager.prototype.query=function(e,t,n){BX.ajax({dataType:"json",url:this.ajaxUrl,method:"POST",data:this.prepareQuery(e,t),onsuccess:this.queryCallback(n)})};BX.Main.UF.Manager.prototype.prepareQuery=function(e,t){var n=t||{};n.mode=e;n.lang=BX.message("LANGUAGE_ID")||"";n.tpl=BX.message("UF_SITE_TPL")||"";n.tpls=BX.message("UF_SITE_TPL_SIGN")||"";n.sessid=BX.bitrix_sessid();return n};BX.Main.UF.Manager.prototype.queryCallback=function(e){var t=BX.proxy(this.processResult,this);return function(n){t(n,e)}};BX.Main.UF.Manager.prototype.processResult=function(e,t){var n="";if(BX.type.isArray(e.ASSET)){n+=e.ASSET.join("\n")}if(!!e.ERROR){this.displayError(e.ERROR)}return BX.html(null,n).then((function(){if(!!t){t(e.FIELD)}}))};BX.Main.UF.Manager.prototype.displayError=function(e){for(var t in e){if(e.hasOwnProperty(t)){console.error(e[t])}}};BX.Main.UF.Manager.prototype.registerField=function(t,n,i){e[t]={FIELD:n,NODE:i}};BX.Main.UF.Manager.prototype.unRegisterField=function(t){if(!!e[t]){delete e[t]}};BX.Main.UF.ViewManager=function(){BX.Main.UF.ViewManager.superclass.constructor.apply(this,arguments);this.mode="main.view"};BX.extend(BX.Main.UF.ViewManager,BX.Main.UF.Manager);BX.Main.UF.EditManager=function(){BX.Main.UF.EditManager.superclass.constructor.apply(this,arguments);this.mode="main.edit"};BX.extend(BX.Main.UF.EditManager,BX.Main.UF.Manager);BX.Main.UF.EditManager.prototype.validate=function(t,n){if(t.length>0){var i=[];for(var a=0;a<t.length;a++){var r=BX.Main.UF.Factory.getValue(t[a]);if(r!==null){i.push({ENTITY_ID:e[t[a]].FIELD.ENTITY_ID,FIELD:e[t[a]].FIELD.FIELD,ENTITY_VALUE_ID:e[t[a]].FIELD.ENTITY_VALUE_ID,VALUE:r})}}return this.query(this.mode,{action:"validate",FIELDS:i},n)}else{this.queryCallback(n)({FIELD:[]})}};BX.Main.UF.BaseType=function(){};BX.Main.UF.BaseType.prototype.addRow=function(e,t){var n=t.parentNode.getElementsByTagName("span");if(n&&n.length>0&&n[0]){var i=n[0].parentNode;var a=this.getClone(n[n.length-1],e);if(i===t.parentNode){i.insertBefore(a,t)}else{i.appendChild(a)}}};BX.Main.UF.BaseType.prototype.addMobileRow=function(e,t){var n=t.parentNode.getElementsByTagName("span");if(n&&n.length&&n[0]){var i=n[0].parentNode;var a=this.getClone(n[n.length-1],e);var r=a.firstElementChild;var o=r.getAttribute("name");var s=/\[(\d)]/;var p=o.replace(s,(function(e,t){t=parseInt(t)+1;return"["+t+"]"}));var F=false;var l=false;var u=null;r.setAttribute("name",p);if(r.hasChildNodes()){r.childNodes.forEach((function(e,t,n){if(!l&&e.attributes!==undefined&&e.tagName==="INPUT"){e.setAttribute("name",p);l=e.getAttribute("id");F=l+"_1";u=e.getAttribute("data-user-field-type-name")}if(l&&e.attributes!==undefined&&e.id!==undefined){var i=e.getAttribute("id");if(i!==l){e.setAttribute("id",i.replace(l,F))}else{e.setAttribute("id",F)}}}))}if(i===t.parentNode){i.insertBefore(a,t)}else{i.appendChild(a)}if(F){BX.onCustomEvent("onAddMobileUfField",[F,u])}}};BX.Main.UF.BaseType.prototype.getClone=function(e,t){var n=e.cloneNode(true);var i=this.findInput(n,t);for(var a=0;a<i.length;a++){i[a].value=""}return n};BX.Main.UF.BaseType.prototype.findInput=function(e,t){return BX.findChildren(e,{tagName:/INPUT|TEXTAREA|SELECT/i,attribute:{name:t}},true)};BX.Main.UF.BaseType.prototype.isEmpty=function(t){var n=this.getNode(t),i=t+(e[t].FIELD.MULTIPLE==="Y"?"[]":"");if(!BX.isNodeInDom(n)){console.error("Node for field "+t+" is already removed from DOM")}var a=this.findInput(n,i);if(a.length<=0){console.error("Unable to find field "+t+" in the registered node")}else{for(var r=0;r<a.length;r++){if(a[r].value!==""){return false}}}return true};BX.Main.UF.BaseType.prototype.getValue=function(t){var n=this.getNode(t),i=t+(e[t].FIELD.MULTIPLE==="Y"?"[]":""),a=e[t].FIELD.MULTIPLE==="Y"?[]:"";if(!BX.isNodeInDom(n)){console.error("Node for field "+t+" is already removed from DOM")}var r=this.findInput(n,i);if(r.length<=0){var o=n.children.length?n.children[0]:false;if(!BX.util.in_array(e[t].FIELD.USER_TYPE_ID,["crm","employee"])&&(!o||o.getAttribute("data-has-input")!=="no")){console.error("Unable to find field "+t+" in the registered node")}}else{for(var s=0;s<r.length;s++){if(r[s].tagName==="INPUT"&&(r[s].type==="radio"||r[s].type==="checkbox")&&!r[s].checked){continue}if(e[t].FIELD.MULTIPLE==="Y"){a.push(r[s].value)}else{a=r[s].value;break}}}return a};BX.Main.UF.BaseType.prototype.focus=function(t){var n=this.getNode(t),i=t+(e[t].FIELD.MULTIPLE==="Y"?"[]":"");if(!BX.isNodeInDom(n)){console.error("Node for field "+t+" is already removed from DOM")}var a=this.findInput(n,i);if(a.length>0){BX.focus(a[0])}};BX.Main.UF.BaseType.prototype.getNode=function(t){return e[t].NODE};BX.Main.UF.TypeBoolean=function(){};BX.extend(BX.Main.UF.TypeBoolean,BX.Main.UF.BaseType);BX.Main.UF.TypeBoolean.USER_TYPE_ID="boolean";BX.Main.UF.TypeBoolean.prototype.isEmpty=function(e){return false};BX.Main.UF.TypeInteger=function(){};BX.extend(BX.Main.UF.TypeInteger,BX.Main.UF.BaseType);BX.Main.UF.TypeInteger.USER_TYPE_ID="integer";BX.Main.UF.TypeDouble=function(){};BX.extend(BX.Main.UF.TypeDouble,BX.Main.UF.BaseType);BX.Main.UF.TypeDouble.USER_TYPE_ID="double";BX.Main.UF.TypeSting=function(){};BX.extend(BX.Main.UF.TypeSting,BX.Main.UF.BaseType);BX.Main.UF.TypeSting.USER_TYPE_ID="string";BX.Main.UF.TypeUrl=function(){};BX.extend(BX.Main.UF.TypeUrl,BX.Main.UF.BaseType);BX.Main.UF.TypeUrl.USER_TYPE_ID="url";BX.Main.UF.TypeStingFormatted=function(){};BX.extend(BX.Main.UF.TypeStingFormatted,BX.Main.UF.TypeSting);BX.Main.UF.TypeStingFormatted.USER_TYPE_ID="string_formatted";BX.Main.UF.TypeEnumeration=function(){};BX.extend(BX.Main.UF.TypeEnumeration,BX.Main.UF.BaseType);BX.Main.UF.TypeEnumeration.USER_TYPE_ID="enumeration";BX.Main.UF.TypeEnumeration.prototype.findInput=function(e,t){var n=BX.Main.UF.TypeEnumeration.superclass.findInput.apply(this,arguments);if(n.length>0){for(var i=0;i<n.length;i++){if(n[i].tagName==="INPUT"&&n[i].type==="hidden"&&n.length>1){delete n[i];break}}}return BX.util.array_values(n)};BX.Main.UF.TypeEnumeration.prototype.focus=function(t){if(e[t]&&e[t].FIELD.SETTINGS.DISPLAY==="UI"&&BX.type.isElementNode(e[t].NODE)){BX.fireEvent(e[t].NODE,"focus")}else{BX.Main.UF.TypeEnumeration.superclass.focus.apply(this,arguments)}};BX.Main.UF.TypeDate=function(){};BX.extend(BX.Main.UF.TypeDate,BX.Main.UF.BaseType);BX.Main.UF.TypeDate.USER_TYPE_ID="date";BX.Main.UF.TypeDate.prototype.focus=function(t){var n=t+(e[t].FIELD.MULTIPLE==="Y"?"[]":"");var i=this.findInput(this.getNode(t),n);if(i.length>0){BX.fireEvent(i[0],"click")}BX.Main.UF.TypeDate.superclass.focus.apply(this,arguments)};BX.Main.UF.TypeDateTime=function(){};BX.extend(BX.Main.UF.TypeDateTime,BX.Main.UF.TypeDate);BX.Main.UF.TypeDateTime.USER_TYPE_ID="datetime";BX.Main.UF.TypeFile=function(){};BX.extend(BX.Main.UF.TypeFile,BX.Main.UF.BaseType);BX.Main.UF.TypeFile.USER_TYPE_ID="file";BX.Main.UF.TypeFile.prototype.findInput=function(e,t){var n=BX.Main.UF.TypeFile.superclass.findInput.apply(this,arguments);if(n.length<=0){n=BX.findChildren(e,{tagName:/INPUT/i,attribute:{type:"file",name:/^bxu_files/}},true)}return n};BX.Main.UF.TypeFile.prototype.getValue=function(t){var n=BX.Main.UF.TypeFile.superclass.getValue.apply(this,arguments),i=e[t].NODE,a=[],r;if(e[t].FIELD.MULTIPLE==="Y"){var o=t+"_del[]";if(BX.type.isArray(n)&&n.length>0){a=BX.Main.UF.TypeFile.superclass.findInput.apply(this,[i,o]);for(r=0;r<a.length;r++){var s=BX.util.array_search(a[r].value,n);if(s>=0){n[s]={old_id:a[r].value,del:"Y",tmp_name:""}}}}return BX.util.array_values(n)}if(n>0){var o=t+"_del";a=BX.Main.UF.TypeFile.superclass.findInput.apply(this,[i,o]);for(r=0;r<a.length;r++){if(n==a[r].value){n={old_id:n,del:"Y",tmp_name:""};break}}return n}return null};BX.Main.UF.Factory=function(){this.defaultTypeHandler=BX.Main.UF.BaseType;this.typeHandlerList={};this.objectCollection={}};BX.Main.UF.Factory.prototype.setTypeHandler=function(e,t){this.typeHandlerList[e]=t;if(typeof this.objectCollection[e]!=="undefined"){delete this.objectCollection[e]}};BX.Main.UF.Factory.prototype.get=function(e){if(typeof this.objectCollection[e]==="undefined"){this.objectCollection[e]=this.getObject(e)}return this.objectCollection[e]};BX.Main.UF.Factory.prototype.getObject=function(e){return new(this.typeHandlerList[e]||this.defaultTypeHandler)};BX.Main.UF.Factory.prototype.getFieldObject=function(t){if(typeof e[t]==="undefined"){console.error("Field "+t+"is not registered. Use BX.Main.UF.Factory.registerField to register");return null}return this.get(e[t]["FIELD"]["USER_TYPE_ID"])};BX.Main.UF.Factory.prototype.isEmpty=function(t){if(typeof e[t]==="undefined"){console.error("Field "+t+"is not registered. Use BX.Main.UF.Factory.registerField to register");return true}return this.get(e[t]["FIELD"]["USER_TYPE_ID"]).isEmpty(t)};BX.Main.UF.Factory.prototype.getValue=function(t){if(typeof e[t]==="undefined"){console.error("Field "+t+"is not registered. Use BX.Main.UF.Factory.registerField to register");return null}return this.get(e[t]["FIELD"]["USER_TYPE_ID"]).getValue(t)};BX.Main.UF.Factory.prototype.focus=function(t){if(typeof e[t]==="undefined"){console.error("Field "+t+"is not registered. Use BX.Main.UF.Factory.registerField to register")}return this.get(e[t]["FIELD"]["USER_TYPE_ID"]).focus(t)};BX.Main.UF.EditManager=new BX.Main.UF.EditManager;BX.Main.UF.ViewManager=new BX.Main.UF.ViewManager;BX.Main.UF.Factory=new BX.Main.UF.Factory;BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeBoolean.USER_TYPE_ID,BX.Main.UF.TypeBoolean);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeInteger.USER_TYPE_ID,BX.Main.UF.TypeInteger);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeDouble.USER_TYPE_ID,BX.Main.UF.TypeDouble);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeSting.USER_TYPE_ID,BX.Main.UF.TypeSting);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeStingFormatted.USER_TYPE_ID,BX.Main.UF.TypeStingFormatted);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeEnumeration.USER_TYPE_ID,BX.Main.UF.TypeEnumeration);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeFile.USER_TYPE_ID,BX.Main.UF.TypeFile);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeDate.USER_TYPE_ID,BX.Main.UF.TypeDate);BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeDateTime.USER_TYPE_ID,BX.Main.UF.TypeDateTime)})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:40:"/bitrix/js/main/utils.js?164661037829279";s:6:"source";s:24:"/bitrix/js/main/utils.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
var phpVars;
if(!phpVars)
{
	phpVars = {
		ADMIN_THEME_ID: '.default',
		LANGUAGE_ID: 'en',
		FORMAT_DATE: 'DD.MM.YYYY',
		FORMAT_DATETIME: 'DD.MM.YYYY HH:MI:SS',
		opt_context_ctrl: false,
		cookiePrefix: 'BITRIX_SM',
		titlePrefix: '',
		bitrix_sessid: '',
		messHideMenu: '',
		messShowMenu: '',
		messHideButtons: '',
		messShowButtons: '',
		messFilterInactive: '',
		messFilterActive: '',
		messFilterLess: '',
		messLoading: 'Loading...',
		messMenuLoading: '',
		messMenuLoadingTitle: '',
		messNoData: '',
		messExpandTabs: '',
		messCollapseTabs: '',
		messPanelFixOn: '',
		messPanelFixOff: '',
		messPanelCollapse: '',
		messPanelExpand: ''
	};
}

var jsUtils =
{
	arEvents: Array(),

	addEvent: function(el, evname, func, capture)
	{
		if(el.attachEvent) // IE
			el.attachEvent("on" + evname, func);
		else if(el.addEventListener) // Gecko / W3C
			el.addEventListener(evname, func, false);
		else
			el["on" + evname] = func;
		this.arEvents[this.arEvents.length] = {'element': el, 'event': evname, 'fn': func};
	},

	removeEvent: function(el, evname, func)
	{
		if(el.detachEvent) // IE
			el.detachEvent("on" + evname, func);
		else if(el.removeEventListener) // Gecko / W3C
			el.removeEventListener(evname, func, false);
		else
			el["on" + evname] = null;
	},

	removeAllEvents: function(el)
	{
		var i;
		for(i=0; i<this.arEvents.length; i++)
		{
			if(this.arEvents[i] && (el==false || el==this.arEvents[i].element))
			{
				jsUtils.removeEvent(this.arEvents[i].element, this.arEvents[i].event, this.arEvents[i].fn);
				this.arEvents[i] = null;
			}
		}
		if(el==false)
			this.arEvents.length = 0;
	},

	IsDoctype: function()
	{
		if (document.compatMode)
			return (document.compatMode == "CSS1Compat");

		if (document.documentElement && document.documentElement.clientHeight)
			return true;

		return false;
	},

	GetRealPos: function(el)
	{
		if(window.BX)
			return BX.pos(el);

		if(!el || !el.offsetParent)
			return false;

		var res = Array();
		res["left"] = el.offsetLeft;
		res["top"] = el.offsetTop;
		var objParent = el.offsetParent;

		while(objParent && objParent.tagName != "BODY")
		{
			res["left"] += objParent.offsetLeft;
			res["top"] += objParent.offsetTop;
			objParent = objParent.offsetParent;
		}
		res["right"] = res["left"] + el.offsetWidth;
		res["bottom"] = res["top"] + el.offsetHeight;

		return res;
	},

	FindChildObject: function(obj, tag_name, class_name, recursive)
	{
		if(!obj)
			return null;
		var tag = tag_name.toUpperCase();
		var cl = (class_name? class_name.toLowerCase() : null);
		var n = obj.childNodes.length;
		for(var j=0; j<n; j++)
		{
			var child = obj.childNodes[j];
			if(child.tagName && child.tagName.toUpperCase() == tag)
				if(!class_name || child.className.toLowerCase() == cl)
					return child;
			if(recursive == true)
			{
				var deepChild;
				if((deepChild = jsUtils.FindChildObject(child, tag_name, class_name, true)))
					return deepChild;
			}
		}
		return null;
	},

	FindParentObject: function(obj, tag_name, class_name)
	{
		if(!obj)
			return null;
		var o = obj;
		var tag = tag_name.toUpperCase();
		var cl = (class_name? class_name.toLowerCase() : null);
		while(o.parentNode)
		{
			var parent = o.parentNode;
			if(parent.tagName && parent.tagName.toUpperCase() == tag)
				if(!class_name || parent.className.toLowerCase() == cl)
					return parent;
			o = parent;
		}
		return null;
	},

	FindNextSibling: function(obj, tag_name)
	{
		if(!obj)
			return null;
		var o = obj;
		var tag = tag_name.toUpperCase();
		while(o.nextSibling)
		{
			var sibling = o.nextSibling;
			if(sibling.tagName && sibling.tagName.toUpperCase() == tag)
				return sibling;
			o = sibling;
		}
		return null;
	},

	FindPreviousSibling: function(obj, tag_name)
	{
		if(!obj)
			return null;
		var o = obj;
		var tag = tag_name.toUpperCase();
		while(o.previousSibling)
		{
			var sibling = o.previousSibling;
			if(sibling.tagName && sibling.tagName.toUpperCase() == tag)
				return sibling;
			o = sibling;
		}
		return null;
	},

	bOpera : navigator.userAgent.toLowerCase().indexOf('opera') != -1,
	bIsIE : document.attachEvent && navigator.userAgent.toLowerCase().indexOf('opera') == -1,

	IsIE: function()
	{
		return this.bIsIE;
	},

	IsOpera: function()
	{
		return this.bOpera;
	},

	IsSafari: function()
	{
		var userAgent = navigator.userAgent.toLowerCase();
		return (/webkit/.test(userAgent));
	},

	IsEditor: function()
	{
		var userAgent = navigator.userAgent.toLowerCase();
		var version = (userAgent.match( /.+(msie)[\/: ]([\d.]+)/ ) || [])[2];
		var safari = /webkit/.test(userAgent);

		if (this.IsOpera() || (document.all && !document.compatMode && version < 6) || safari)
			return false;

		return true;
	},

	ToggleDiv: function(div)
	{
		var style = document.getElementById(div).style;
		if(style.display!="none")
			style.display = "none";
		else
			style.display = "block";
		return (style.display != "none");
	},

	urlencode: function(s)
	{
		return escape(s).replace(new RegExp('\\+','g'), '%2B');
	},

	OpenWindow: function(url, width, height)
	{
		var w = screen.width, h = screen.height;
		if(this.IsOpera())
		{
			w = document.body.offsetWidth;
			h = document.body.offsetHeight;
		}
		window.open(url, '', 'status=no,scrollbars=yes,resizable=yes,width='+width+',height='+height+',top='+Math.floor((h - height)/2-14)+',left='+Math.floor((w - width)/2-5));
	},

	SetPageTitle: function(s)
	{
		document.title = phpVars.titlePrefix+s;
		var h1 = document.getElementsByTagName("H1");
		if(h1)
			h1[0].innerHTML = s;
	},

	LoadPageToDiv: function(url, div_id)
	{
		var div = document.getElementById(div_id);
		if(!div)
			return;
		CHttpRequest.Action = function(result)
		{
			CloseWaitWindow();
			document.getElementById(div_id).innerHTML = result;
		}
		ShowWaitWindow();
		CHttpRequest.Send(url);
	},

	trim: function(s)
	{
		if (typeof s == 'string' || typeof s == 'object' && s.constructor == String)
		{
			var r, re;

			re = /^[\s\r\n]+/g;
			r = s.replace(re, "");
			re = /[\s\r\n]+$/g;
			r = r.replace(re, "");
			return r;
		}
		else
			return s;
	},

	Redirect: function(args, url)
	{
		var e = null, bShift = false;
		if(args && args.length > 0)
			e = args[0];
		if(!e)
			e = window.event;
		if(e)
			bShift = e.shiftKey;

		if(bShift)
			window.open(url);
		else
		{
			window.location.href=url;
		}
	},

	False: function(){return false;},

	AlignToPos: function(pos, w, h)
	{
		var x = pos["left"], y = pos["bottom"];

		var scroll = jsUtils.GetWindowScrollPos();
		var size = jsUtils.GetWindowInnerSize();

		if((size.innerWidth + scroll.scrollLeft) - (pos["left"] + w) < 0)
		{
			if(pos["right"] - w >= 0 )
				x = pos["right"] - w;
			else
				x = scroll.scrollLeft;
		}

		if((size.innerHeight + scroll.scrollTop) - (pos["bottom"] + h) < 0)
		{
			if(pos["top"] - h >= 0)
				y = pos["top"] - h;
			else
				y = scroll.scrollTop;
		}

		return {'left':x, 'top':y};
	},

	// evaluate js string in window scope
	EvalGlobal: function(script)
	{
		try {
		if (window.execScript)
			window.execScript(script, 'javascript');
		else if (jsUtils.IsSafari())
			window.setTimeout(script, 0);
		else
			window.eval(script);
		} catch (e) {/*alert("Error! jsUtils.EvalGlobal");*/}
	},

	GetStyleValue: function(el, styleProp)
	{
		var res;
		if(el.currentStyle)
			res = el.currentStyle[styleProp];
		else if(window.getComputedStyle)
			res = document.defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
		if(!res)
			res = '';
		return res;
	},

	GetWindowInnerSize: function(pDoc)
	{
		var width, height;
		if (!pDoc)
			pDoc = document;

		if (self.innerHeight) // all except Explorer
		{
			width = self.innerWidth;
			height = self.innerHeight;
		}
		else if (pDoc.documentElement && (pDoc.documentElement.clientHeight || pDoc.documentElement.clientWidth)) // Explorer 6 Strict Mode
		{
			width = pDoc.documentElement.clientWidth;
			height = pDoc.documentElement.clientHeight;
		}
		else if (pDoc.body) // other Explorers
		{
			width = pDoc.body.clientWidth;
			height = pDoc.body.clientHeight;
		}
		return {innerWidth : width, innerHeight : height};
	},

	GetWindowScrollPos: function(pDoc)
	{
		var left, top;
		if (!pDoc)
			pDoc = document;

		if (self.pageYOffset) // all except Explorer
		{
			left = self.pageXOffset;
			top = self.pageYOffset;
		}
		else if (pDoc.documentElement && (pDoc.documentElement.scrollTop || pDoc.documentElement.scrollLeft)) // Explorer 6 Strict
		{
			left = document.documentElement.scrollLeft;
			top = document.documentElement.scrollTop;
		}
		else if (pDoc.body) // all other Explorers
		{
			left = pDoc.body.scrollLeft;
			top = pDoc.body.scrollTop;
		}
		return {scrollLeft : left, scrollTop : top};
	},

	GetWindowScrollSize: function(pDoc)
	{
		var width, height;
		if (!pDoc)
			pDoc = document;

		if ( (pDoc.compatMode && pDoc.compatMode == "CSS1Compat"))
		{
			width = pDoc.documentElement.scrollWidth;
			height = pDoc.documentElement.scrollHeight;
		}
		else
		{
			if (pDoc.body.scrollHeight > pDoc.body.offsetHeight)
				height = pDoc.body.scrollHeight;
			else
				height = pDoc.body.offsetHeight;

			if (pDoc.body.scrollWidth > pDoc.body.offsetWidth ||
				(pDoc.compatMode && pDoc.compatMode == "BackCompat") ||
				(pDoc.documentElement && !pDoc.documentElement.clientWidth)
			)
				width = pDoc.body.scrollWidth;
			else
				width = pDoc.body.offsetWidth;
		}
		return {scrollWidth : width, scrollHeight : height};
	},

	GetWindowSize: function()
	{
		var innerSize = jsUtils.GetWindowInnerSize();
		var scrollPos = jsUtils.GetWindowScrollPos();
		var scrollSize = jsUtils.GetWindowScrollSize();

		return  {
			innerWidth : innerSize.innerWidth, innerHeight : innerSize.innerHeight,
			scrollLeft : scrollPos.scrollLeft, scrollTop : scrollPos.scrollTop,
			scrollWidth : scrollSize.scrollWidth, scrollHeight : scrollSize.scrollHeight
		};
	},


	arCustomEvents: {},

	addCustomEvent: function(eventName, eventHandler, arParams, handlerContextObject)
	{
		if (!this.arCustomEvents[eventName])
			this.arCustomEvents[eventName] = [];

		if (!arParams)
			arParams = [];
		if (!handlerContextObject)
			handlerContextObject = false;

		this.arCustomEvents[eventName].push(
			{
				handler: eventHandler,
				arParams: arParams,
				obj: handlerContextObject
			}
		);
	},

	removeCustomEvent: function(eventName, eventHandler)
	{
		if (!this.arCustomEvents[eventName])
			return;

		var l = this.arCustomEvents[eventName].length;
		if (l == 1)
		{
			delete this.arCustomEvents[eventName];
			return;
		}

		for (var i = 0; i < l; i++)
		{
			if (!this.arCustomEvents[eventName][i])
				continue;
			if (this.arCustomEvents[eventName][i].handler == eventHandler)
			{
				delete this.arCustomEvents[eventName][i];
				return;
			}
		}
	},

	onCustomEvent: function(eventName, arEventParams)
	{
		if (!this.arCustomEvents[eventName])
			return;

		if (!arEventParams)
			arEventParams = [];

		var h;
		for (var i = 0, l = this.arCustomEvents[eventName].length; i < l; i++)
		{
			h = this.arCustomEvents[eventName][i];
			if (!h || !h.handler)
				continue;

			if (h.obj)
				h.handler.call(h.obj, h.arParams, arEventParams);
			else
				h.handler(h.arParams, arEventParams);
		}
	},

	loadJSFile: function(arJs, oCallBack, pDoc)
	{
		if (!pDoc)
			pDoc = document;
		if (typeof arJs == 'string')
			arJs = [arJs];
		var callback = function()
		{
			if (!oCallBack)
				return;
			if (typeof oCallBack == 'function')
				return oCallBack();
			if (typeof oCallBack != 'object' || !oCallBack.func)
				return;
			var p = oCallBack.params || {};
			if (oCallBack.obj)
				oCallBack.func.apply(oCallBack.obj, p);
			else
				oCallBack.func(p);
		};
		var load_js = function(ind)
		{
			if (ind >= arJs.length)
				return callback();
			var oSript = pDoc.body.appendChild(pDoc.createElement('script'));
			oSript.src = arJs[ind];
			var bLoaded = false;
			oSript.onload = oSript.onreadystatechange = function()
			{
				if (!bLoaded && (!oSript.readyState || oSript.readyState == "loaded" || oSript.readyState == "complete"))
				{
					bLoaded = true;
					setTimeout(function (){load_js(++ind);}, 50);
				}
			};
		};
		load_js(0);
	},

	loadCSSFile: function(arCSS, pDoc, pWin)
	{
		if (typeof arCSS == 'string')
		{
			var bSingle = true;
			arCSS = [arCSS];
		}
		var i, l = arCSS.length, pLnk = [];
		if (l == 0)
			return;
		if (!pDoc)
			pDoc = document;
		if (!pWin)
			pWin = window;
		if (!pWin.bxhead)
		{
			var heads = pDoc.getElementsByTagName('HEAD');
			pWin.bxhead = heads[0];
		}
		if (!pWin.bxhead)
			return;
		for (i = 0; i < l; i++)
		{
			var lnk = document.createElement('LINK');
			lnk.href = arCSS[i];
			lnk.rel = 'stylesheet';
			lnk.type = 'text/css';
			pWin.bxhead.appendChild(lnk);
			pLnk.push(lnk);
		}
		if (bSingle)
			return lnk;
		return pLnk;
	},

	appendBXHint : function(node, html)
	{
		if (!node || !node.parentNode || !html)
			return;
		var oBXHint = new BXHint(html);
		node.parentNode.insertBefore(oBXHint.oIcon, node);
		node.parentNode.removeChild(node);
		oBXHint.oIcon.style.marginLeft = "5px";
	},

	PreventDefault : function(e)
	{
		if(!e) e = window.event;
		if(e.stopPropagation)
		{
			e.preventDefault();
			e.stopPropagation();
		}
		else
		{
			e.cancelBubble = true;
			e.returnValue = false;
		}
		return false;
	},

	CreateElement: function(tag, arAttr, arStyles, pDoc)
	{
		if (!pDoc)
			pDoc = document;
		var pEl = pDoc.createElement(tag), p;
		if(arAttr)
		{
			for(p in arAttr)
			{
				if(p == 'className' || p == 'class')
				{
					pEl.setAttribute('class', arAttr[p]);
					if (jsUtils.IsIE())
						pEl.setAttribute('className', arAttr[p]);
					continue;
				}

				if (arAttr[p] != undefined && arAttr[p] != null)
					pEl.setAttribute(p, arAttr[p]);
			}
		}
		if(arStyles)
		{
			for(p in arStyles)
				pEl.style[p] = arStyles[p];
		}
		return pEl;
	},

	in_array: function(needle, haystack)
	{
		for(var i=0; i<haystack.length; i++)
		{
			if(haystack[i] == needle)
				return true;
		}
		return false;
	},

	htmlspecialchars: function(str)
	{
		if(!str.replace)
			return str;

		return str.replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
	}
}

/************************************************/

function JCFloatDiv()
{
	var _this = this;
	this.floatDiv = null;
	this.x = this.y = 0;

	this.Create = function(arParams)
	{
		var div = document.body.appendChild(document.createElement("DIV"));
		div.id = arParams.id;
		div.style.position = 'absolute';
		div.style.left = '-10000px';
		div.style.top = '-10000px';
		if(arParams.className)
			div.className = arParams.className;
		if(arParams.zIndex)
			div.style.zIndex = arParams.zIndex;
		if(arParams.width)
			div.style.width = arParams.width+'px';
		if(arParams.height)
			div.style.height = arParams.height+'px';
		return div;
	}

	this.Show = function(div, left, top, dxShadow, restrictDrag)
	{
		var component = BX.ZIndexManager.getComponent(div);
		if (!component)
		{
			BX.ZIndexManager.register(div);
		}

		BX.ZIndexManager.bringToFront(div);

		if (left < 0)
			left = 0;

		if (top < 0)
			top = 0;

		div.style.left = parseInt(left) + "px";
		div.style.top = parseInt(top) + "px";

		/*Restrict drag*/
		div.restrictDrag = restrictDrag || false;

		/*shadow*/
		if(isNaN(dxShadow))
			dxShadow = 5;

		div.dxShadow = dxShadow;
	}

	this.Close = function(div)
	{
		if(!div)
			return;
		var sh = document.getElementById(div.id+"_shadow");
		if(sh)
			sh.style.visibility = 'hidden';

		var frame = document.getElementById(div.id+"_frame");
		if(frame)
			frame.style.visibility = 'hidden';
	}

	this.Move = function(div, x, y)
	{
		if(!div)
			return;

		var dxShadow = div.dxShadow;
		var left = parseInt(div.style.left)+x;
		var top = parseInt(div.style.top)+y;

		if (div.restrictDrag)
		{
			//Left side
			if (left < 0)
				left = 0;

			//Right side
			if ( (document.compatMode && document.compatMode == "CSS1Compat"))
				windowWidth = document.documentElement.scrollWidth;
			else
			{
				if (document.body.scrollWidth > document.body.offsetWidth ||
					(document.compatMode && document.compatMode == "BackCompat") ||
					(document.documentElement && !document.documentElement.clientWidth)
				)
					windowWidth = document.body.scrollWidth;
				else
					windowWidth = document.body.offsetWidth;
			}

			var floatWidth = div.offsetWidth;
			if (left > (windowWidth - floatWidth - dxShadow))
				left = windowWidth - floatWidth - dxShadow;

			//Top side
			if (top < 0)
				top = 0;
		}

		div.style.left = left+'px';
		div.style.top = top+'px';

		this.AdjustShadow(div);
	}

	this.HideShadow = function(div)
	{
		var sh = document.getElementById(div.id + "_shadow");
		sh.style.visibility = 'hidden';
	}

	this.UnhideShadow = function(div)
	{
		var sh = document.getElementById(div.id + "_shadow");
		sh.style.visibility = 'visible';
	}

	this.AdjustShadow = function(div)
	{
		var sh = document.getElementById(div.id + "_shadow");
		if(sh && sh.style.visibility != 'hidden')
		{
			var dxShadow = div.dxShadow;

			sh.style.width = div.offsetWidth+'px';
			sh.style.height = div.offsetHeight+'px';
			sh.style.left = parseInt(div.style.left)+dxShadow+'px';
			sh.style.top = parseInt(div.style.top)+dxShadow+'px';
		}

		var frame = document.getElementById(div.id+"_frame");
		if(frame)
		{
			frame.style.width = div.offsetWidth + "px";
			frame.style.height = div.offsetHeight + "px";
			frame.style.left = div.style.left;
			frame.style.top = div.style.top;
		}
	}

	this.StartDrag = function(e, div)
	{
		if(!e)
			e = window.event;
		this.x = e.clientX + document.body.scrollLeft;
		this.y = e.clientY + document.body.scrollTop;
		this.floatDiv = div;

		jsUtils.addEvent(document, "mousemove", this.MoveDrag);
		document.onmouseup = this.StopDrag;
		if(document.body.setCapture)
			document.body.setCapture();

		document.onmousedown = jsUtils.False;
		var b = document.body;
		b.ondrag = jsUtils.False;
		b.onselectstart = jsUtils.False;
		b.style.MozUserSelect = _this.floatDiv.style.MozUserSelect = 'none';
		b.style.cursor = 'move';
	}

	this.StopDrag = function(e)
	{
		if(document.body.releaseCapture)
			document.body.releaseCapture();

		jsUtils.removeEvent(document, "mousemove", _this.MoveDrag);
		document.onmouseup = null;

		this.floatDiv = null;

		document.onmousedown = null;
		var b = document.body;
		b.ondrag = null;
		b.onselectstart = null;
		b.style.MozUserSelect = _this.floatDiv.style.MozUserSelect = '';
		b.style.cursor = '';
	}

	this.MoveDrag = function(e)
	{
		var x = e.clientX + document.body.scrollLeft;
		var y = e.clientY + document.body.scrollTop;

		if(_this.x == x && _this.y == y)
			return;

		_this.Move(_this.floatDiv, (x - _this.x), (y - _this.y));
		_this.x = x;
		_this.y = y;
	}
}
var jsFloatDiv = new JCFloatDiv();

/************************************************/

var BXHint = function(innerHTML, element, addParams)
{
	this.oDivOver = false;
	this.timeOutID = null;
	this.oIcon = null;
	this.freeze = false;
	this.x = 0;
	this.y = 0;
	this.time = 700;

	if (!innerHTML)
		innerHTML = "";
	this.Create(innerHTML, element, addParams);
}

BXHint.prototype.Create = function(innerHTML, element, addParams)
{
	var
		_this = this,
		width = 0,
		height = 0,
		className = null,
		type = "icon";
	this.bWidth = true;

	if (addParams)
	{
		if (addParams.width === false)
			this.bWidth = false;
		else if (addParams.width)
			width = addParams.width;

		if (addParams.height)
			height = addParams.height;

		if (addParams.className)
			className = addParams.className;

		if (addParams.type && (addParams.type == "link" || addParams.type == "icon"))
			type = addParams.type;
		if (addParams.time > 0)
			this.time = addParams.time;
	}

	if (element)
		type = "element";

	if (type == "icon")
	{
		var element = document.createElement("IMG");
		element.src = (addParams && addParams.iconSrc) ? addParams.iconSrc : "/bitrix/themes/"+phpVars.ADMIN_THEME_ID+"/public/popup/hint.gif";
		element.ondrag = jsUtils.False;
	}
	else if (type == "link")
	{
		var element = document.createElement("A");
		element.href = "";
		element.onclick = function(e){return false;}
		element.innerHTML = "[?]";
	}

	this.element = element;
	if (type == "element")
	{
		if(addParams && addParams.show_on_click)
		{
			jsUtils.addEvent(
				element,
				"click",
				function (event)
				{
					if (!event)
						event = window.event;
					_this.GetMouseXY(event);
					_this.timeOutID = setTimeout(function () {_this.Show(innerHTML,width,height,className) }, 10);
				}
			);
		}
		else
		{
			jsUtils.addEvent(
				element,
				"mouseover",
				function (event)
				{
					if (!event)
						event = window.event;
					_this.GetMouseXY(event);
					_this.timeOutID = setTimeout(function () {_this.Show(innerHTML,width,height,className) }, 750);
				}
			);
		}

		jsUtils.addEvent(
			element,
			"mouseout",
			function(event)
			{
				if (_this.timeOutID)
					clearTimeout(_this.timeOutID);
				_this.SmartHide(_this);
			}
		);
	}
	else
	{
		this.oIcon = element;
		element.onmouseover = function(event) {if (!event) event = window.event; _this.GetMouseXY(event); _this.Show(innerHTML,width,height,className)};
		element.onmouseout = function() {_this.SmartHide(_this);};
	}
}

BXHint.prototype.IsFrozen = function()
{
	return this.freeze;
}

BXHint.prototype.Freeze = function()
{
	this.freeze = true;
	this.Hide();
}

BXHint.prototype.UnFreeze = function()
{
	this.freeze = false;
}

BXHint.prototype.GetMouseXY = function(event)
{
	if (event.pageX || event.pageY)
	{
		this.x = event.pageX;
		this.y = event.pageY;
	}
	else if (event.clientX || event.clientY)
	{
		this.x = event.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft) - document.documentElement.clientLeft;
		this.y = event.clientY + (document.documentElement.scrollTop || document.body.scrollTop) - document.documentElement.clientTop;
	}
}

BXHint.prototype.Show = function(innerHTML, width, height, className)
{
	//Delete previous hint
	var old = document.getElementById("__BXHint_div");
	if (old)
		this.Hide();

	if (this.freeze)
		return;

	var _this = this;
	var oDiv = document.body.appendChild(document.createElement("DIV"));
	oDiv.onmouseover = function(){_this.oDivOver = true};
	oDiv.onmouseout = function(){_this.oDivOver = false; _this.SmartHide(_this);}
	oDiv.id = "__BXHint_div";
	oDiv.className = (className) ? className : "bxhint";
	oDiv.style.position = 'absolute';
	if (width && this.bWidth)
		oDiv.style.width = width + "px";

	if (height)
		oDiv.style.height = height + "px";
	oDiv.innerHTML = innerHTML;

	var w = oDiv.offsetWidth;
	var h = oDiv.offsetHeight;
	if (this.bWidth)
	{
		if (!width && w>200)
			w = Math.round(Math.sqrt(1.618*w*h));
		oDiv.style.width = w + "px";
		h = oDiv.offsetHeight;
	}

	var pos = {left : this.x + 10, right : this.x + w, top : this.y, bottom : this.y + h};

	pos = this.AlignToPos(pos, w, h);

	jsFloatDiv.Show(oDiv, pos.left, pos.top,3);

//	oDiv.ondrag = jsUtils.False;
//	oDiv.onselectstart = jsUtils.False;
//	oDiv.style.MozUserSelect = 'none';
	oDiv = null;
}

BXHint.prototype.AlignToPos = function(pos, w, h)
{
	var body = document.body;
	if((body.clientWidth + body.scrollLeft) < (pos.left + w))
		pos.left = (pos.left - w >= 0) ? (pos.left - w) : body.scrollLeft;

	if((body.clientHeight + body.scrollTop) - (pos["bottom"]) < 0)
		pos.top = (pos.top - h >= 0) ? (pos.top - h) : body.scrollTop;

	return pos;
}

BXHint.prototype.Hide = function()
{
	var oDiv = document.getElementById("__BXHint_div");

	if (!oDiv)
		return;

	BX.ZIndexManager.unregister(oDiv);

	jsFloatDiv.Close(oDiv);
	oDiv.parentNode.removeChild(oDiv);
	oDiv = null;
}

BXHint.prototype.SmartHide = function(_this)
{
	setTimeout(function ()
		{
			if (!_this.oDivOver)
				_this.Hide();
		}, 100
	);
}

/************************************************/

function WaitOnKeyPress(e)
{
	if(!e) e = window.event
	if(!e) return;
	if(e.keyCode == 27)
		CloseWaitWindow();
}

function ShowWaitWindow()
{
	CloseWaitWindow();

	var obWndSize = jsUtils.GetWindowSize();

	var div = document.body.appendChild(document.createElement("DIV"));
	div.id = "wait_window_div";
	div.innerHTML = phpVars.messLoading;
	div.className = "waitwindow";
	//div.style.left = obWndSize.scrollLeft + (obWndSize.innerWidth - div.offsetWidth) - (jsUtils.IsIE() ? 5 : 20) + "px";
	div.style.right = (5 - obWndSize.scrollLeft) + 'px';
	div.style.top = obWndSize.scrollTop + 5 + "px";

	if(jsUtils.IsIE())
	{
		var frame = document.createElement("IFRAME");
		frame.src = "javascript:''";
		frame.id = "wait_window_frame";
		frame.className = "waitwindow";
		frame.style.width = div.offsetWidth + "px";
		frame.style.height = div.offsetHeight + "px";
		frame.style.right = div.style.right;
		frame.style.top = div.style.top;
		document.body.appendChild(frame);
	}
	jsUtils.addEvent(document, "keypress", WaitOnKeyPress);
}

function CloseWaitWindow()
{
	jsUtils.removeEvent(document, "keypress", WaitOnKeyPress);

	var frame = document.getElementById("wait_window_frame");
	if(frame)
		frame.parentNode.removeChild(frame);

	var div = document.getElementById("wait_window_div");
	if(div)
		div.parentNode.removeChild(div);
}

/************************************************/

var jsSelectUtils =
{
	addNewOption: function(select_id, opt_value, opt_name, do_sort, check_unique)
	{
		var oSelect = (typeof(select_id) == 'string' || select_id instanceof String? document.getElementById(select_id) : select_id);
		if(oSelect)
		{
			var n = oSelect.length;
			if(check_unique !== false)
			{
				for(var i=0;i<n;i++)
					if(oSelect[i].value==opt_value)
						return;
			}
			var newoption = new Option(opt_name, opt_value, false, false);
			oSelect.options[n]=newoption;
		}
		if(do_sort === true)
			this.sortSelect(select_id);
	},

	deleteOption: function(select_id, opt_value)
	{
		var oSelect = (typeof(select_id) == 'string' || select_id instanceof String? document.getElementById(select_id) : select_id);
		if(oSelect)
		{
			for(var i=0;i<oSelect.length;i++)
				if(oSelect[i].value==opt_value)
				{
					oSelect.remove(i);
					break;
				}
		}
	},

	deleteSelectedOptions: function(select_id)
	{
		var oSelect = (typeof(select_id) == 'string' || select_id instanceof String? document.getElementById(select_id) : select_id);
		if(oSelect)
		{
			var i=0;
			while(i<oSelect.length)
				if(oSelect[i].selected)
				{
					oSelect[i].selected=false;
					oSelect.remove(i);
				}
				else
					i++;
		}
	},

	deleteAllOptions: function(oSelect)
	{
		if(oSelect)
		{
			for(var i=oSelect.length-1; i>=0; i--)
				oSelect.remove(i);
		}
	},

	optionCompare: function(record1, record2)
	{
		var value1 = record1.optText.toLowerCase();
		var value2 = record2.optText.toLowerCase();
		if (value1 > value2) return(1);
		if (value1 < value2) return(-1);
		return(0);
	},

	sortSelect: function(select_id)
	{
		var oSelect = (typeof(select_id) == 'string' || select_id instanceof String? document.getElementById(select_id) : select_id);
		if(oSelect)
		{
			var myOptions = [];
			var n = oSelect.options.length;
			for (var i=0;i<n;i++)
			{
				myOptions[i] = {
					optText:oSelect[i].text,
					optValue:oSelect[i].value
				};
			}
			myOptions.sort(this.optionCompare);
			oSelect.length=0;
			n = myOptions.length;
			for(var i=0;i<n;i++)
			{
				var newoption = new Option(myOptions[i].optText, myOptions[i].optValue, false, false);
				oSelect[i]=newoption;
			}
		}
	},

	selectAllOptions: function(select_id)
	{
		var oSelect = (typeof(select_id) == 'string' || select_id instanceof String? document.getElementById(select_id) : select_id);
		if(oSelect)
		{
			var n = oSelect.length;
			for(var i=0;i<n;i++)
				oSelect[i].selected=true;
		}
	},

	selectOption: function(select_id, opt_value)
	{
		var oSelect = (typeof(select_id) == 'string' || select_id instanceof String? document.getElementById(select_id) : select_id);
		if(oSelect)
		{
			var n = oSelect.length;
			for(var i=0;i<n;i++)
				oSelect[i].selected = (oSelect[i].value == opt_value);
		}
	},

	addSelectedOptions: function(oSelect, to_select_id, check_unique, do_sort)
	{
		if(!oSelect)
			return;
		var n = oSelect.length;
		for(var i=0; i<n; i++)
			if(oSelect[i].selected)
				this.addNewOption(to_select_id, oSelect[i].value, oSelect[i].text, do_sort, check_unique);
	},

	moveOptionsUp: function(oSelect)
	{
		if(!oSelect)
			return;
		var n = oSelect.length;
		for(var i=0; i<n; i++)
		{
			if(oSelect[i].selected && i>0 && oSelect[i-1].selected == false)
			{
				var option1 = new Option(oSelect[i].text, oSelect[i].value);
				var option2 = new Option(oSelect[i-1].text, oSelect[i-1].value);
				oSelect[i] = option2;
				oSelect[i].selected = false;
				oSelect[i-1] = option1;
				oSelect[i-1].selected = true;
			}
		}
	},

	moveOptionsDown: function(oSelect)
	{
		if(!oSelect)
			return;
		var n = oSelect.length;
		for(var i=n-1; i>=0; i--)
		{
			if(oSelect[i].selected && i<n-1 && oSelect[i+1].selected == false)
			{
				var option1 = new Option(oSelect[i].text, oSelect[i].value);
				var option2 = new Option(oSelect[i+1].text, oSelect[i+1].value);
				oSelect[i] = option2;
				oSelect[i].selected = false;
				oSelect[i+1] = option1;
				oSelect[i+1].selected = true;
			}
		}
	}

}

/************************************************/

/* End */
;
//# sourceMappingURL=kernel_main.map.js